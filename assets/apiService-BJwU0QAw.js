var o=(o,t,e)=>new Promise((r,a)=>{var n=o=>{try{i(e.next(o))}catch(t){a(t)}},s=o=>{try{i(e.throw(o))}catch(t){a(t)}},i=o=>o.done?r(o.value):Promise.resolve(o.value).then(n,s);i((e=e.apply(o,t)).next())});import{c as t,s as e}from"./index-nvKkLPdR.js";
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r=t("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),a="http://localhost:3001/api",n={get:t=>o(null,null,function*(){const o=yield fetch(`${a}${t}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});if(!o.ok)throw new Error("Erro na requisição");return o.json()}),post:(t,e)=>o(null,null,function*(){const o=yield fetch(`${a}${t}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`},body:e?JSON.stringify(e):void 0});if(!o.ok)throw new Error("Erro na requisição");return o.json()}),uploadLogo:t=>o(null,null,function*(){try{const o=t.name.split(".").pop(),r=`settings/${`logo-${Math.random().toString(36).substring(2)}.${o}`}`,{error:a}=yield e.storage.from("assets").upload(r,t);if(a)throw a;const{data:{publicUrl:n}}=e.storage.from("assets").getPublicUrl(r),{error:s}=yield e.from("settings").upsert({key:"app_logo_path",value:n,updated_at:(new Date).toISOString()},{onConflict:"key"});if(s)throw s;return{message:"Logo salva com sucesso!",path:n}}catch(o){throw console.error("Error uploading logo to Supabase:",o),new Error(o.message||"Falha no upload da logo.")}}),uploadCertificate:(t,r)=>o(null,null,function*(){try{const o=`certificates/${`certificate-${Date.now()}.pfx`}`,{error:a}=yield e.storage.from("assets").upload(o,t,{cacheControl:"3600",upsert:!0});if(a)throw a;const n=btoa(r),{error:s}=yield e.from("settings").upsert({key:"nfce_cert_password",value:n,updated_at:(new Date).toISOString()},{onConflict:"key"});if(s)throw s;const{error:i}=yield e.from("settings").upsert({key:"nfce_cert_path",value:o,updated_at:(new Date).toISOString()},{onConflict:"key"});if(i)throw i;return{message:"Certificado salvo com sucesso!"}}catch(o){throw console.error("Error uploading certificate:",o),new Error(o.message||"Falha no upload do certificado.")}})};export{r as I,n as a};
