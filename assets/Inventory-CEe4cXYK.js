var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,s=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&i(e,r,t[r]);if(n)for(var r of n(t))a.call(t,r)&&i(e,r,t[r]);return e},l=(e,n)=>t(e,r(n)),c=(e,t,r)=>new Promise((n,o)=>{var a=e=>{try{s(r.next(e))}catch(t){o(t)}},i=e=>{try{s(r.throw(e))}catch(t){o(t)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())});import{c as u,g as d,r as f,j as p,k as h,P as x,f as b,I as m,B as v,S as y,l as g,b as j,d as _,F as w,C as O,m as E,X as N}from"./index-BNkC9uSW.js";import{F as C,C as P}from"./csvService-BwjYydeN.js";import{r as S}from"./index-D3H6S5HR.js";import{GeminiService as k}from"./geminiService-D8wDBU1b.js";import{C as A,S as T,T as M}from"./trash-2-DKQ-TeIP.js";import{L as R}from"./loader-circle-Cxv8V7n7.js";import{P as I}from"./printer-DVSAoRs9.js";import{P as L}from"./plus-27bvi1iI.js";import{U as D}from"./upload-DcnMFDWW.js";
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=u("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),G=u("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),B=u("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),F=u("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),X=u("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),U=u("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),H=u("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),V=u("file-up",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]),q=u("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),$=u("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);var K,W,Q={},Y={},J={};function Z(){if(K)return J;K=1,Object.defineProperty(J,"__esModule",{value:!0});return J.default=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.text=r.text||t,this.options=r},J}function ee(){if(W)return Y;W=1,Object.defineProperty(Y,"__esModule",{value:!0}),Y.CODE39=void 0;var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Z();var n=function(e){function r(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e=e.toUpperCase(),t.mod43&&(e+=(n=function(e){for(var t=0,r=0;r<e.length;r++)t+=s(e[r]);return t%=43}(e),o[n])),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"encode",value:function(){for(var e=i("*"),t=0;t<this.data.length;t++)e+=i(this.data[t])+"0";return{data:e+=i("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],a=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function i(e){return t=s(e),a[t].toString(2);var t}function s(e){return o.indexOf(e)}return Y.CODE39=n,Y}var te,re,ne={},oe={},ae={},ie={};function se(){if(te)return ie;var e;function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}te=1,Object.defineProperty(ie,"__esModule",{value:!0});var r=ie.SET_A=0,n=ie.SET_B=1,o=ie.SET_C=2;ie.SHIFT=98;var a=ie.START_A=103,i=ie.START_B=104,s=ie.START_C=105;return ie.MODULO=103,ie.STOP=106,ie.FNC1=207,ie.SET_BY_CODE=(t(e={},a,r),t(e,i,n),t(e,s,o),e),ie.SWAP={101:r,100:n,99:o},ie.A_START_CHAR=String.fromCharCode(208),ie.B_START_CHAR=String.fromCharCode(209),ie.C_START_CHAR=String.fromCharCode(210),ie.A_CHARS="[\0-_È-Ï]",ie.B_CHARS="[ -È-Ï]",ie.C_CHARS="(Ï*[0-9]{2}Ï*)",ie.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],ie}function le(){if(re)return ae;re=1,Object.defineProperty(ae,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Z(),n=(e=r)&&e.__esModule?e:{default:e},o=se();var a=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e.substring(1),t));return n.bytes=e.split("").map(function(e){return e.charCodeAt(0)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,t=e.shift()-105,n=o.SET_BY_CODE[t];if(void 0===n)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&e.unshift(o.FNC1);var a=r.next(e,1,n);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:r.getBar(t)+a.result+r.getBar((a.checksum+t)%o.MODULO)+r.getBar(o.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return"string"==typeof e&&(e="true"===e.toLowerCase()),e}}],[{key:"getBar",value:function(e){return o.BARS[e]?o.BARS[e].toString():""}},{key:"correctIndex",value:function(e,t){if(t===o.SET_A){var r=e.shift();return r<32?r+64:r-32}return t===o.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(e,t,n){if(!e.length)return{result:"",checksum:0};var a=void 0,i=void 0;if(e[0]>=200){i=e.shift()-105;var s=o.SWAP[i];void 0!==s?a=r.next(e,t+1,s):(n!==o.SET_A&&n!==o.SET_B||i!==o.SHIFT||(e[0]=n===o.SET_A?e[0]>95?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),a=r.next(e,t+1,n))}else i=r.correctIndex(e,n),a=r.next(e,t+1,n);var l=i*t;return{result:r.getBar(i)+a.result,checksum:l+a.checksum}}}]),r}(n.default);return ae.default=a,ae}var ce,ue,de={};function fe(){if(ue)return oe;ue=1,Object.defineProperty(oe,"__esModule",{value:!0});var e=r(le()),t=r(function(){if(ce)return de;ce=1,Object.defineProperty(de,"__esModule",{value:!0});var e=se(),t=function(t){return t.match(new RegExp("^"+e.A_CHARS+"*"))[0].length},r=function(t){return t.match(new RegExp("^"+e.B_CHARS+"*"))[0].length},n=function(t){return t.match(new RegExp("^"+e.C_CHARS+"*"))[0]};function o(t,r){var n=r?e.A_CHARS:e.B_CHARS,i=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+String.fromCharCode(204)+a(t.substring(i[1].length));var s=t.match(new RegExp("^"+n+"+"))[0];return s.length===t.length?t:s+String.fromCharCode(r?205:206)+o(t.substring(s.length),!r)}function a(e){var a=n(e),i=a.length;if(i===e.length)return e;e=e.substring(i);var s=t(e)>=r(e);return a+String.fromCharCode(s?206:205)+o(e,s)}return de.default=function(i){var s=void 0;if(n(i).length>=2)s=e.C_START_CHAR+a(i);else{var l=t(i)>r(i);s=(l?e.A_START_CHAR:e.B_START_CHAR)+o(i,l)}return s.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(e,t){return String.fromCharCode(203)+t})},de}());function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=function(e){function r(e,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var a=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,(0,t.default)(e),o));else a=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,o));return n(a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),r}(e.default);return oe.default=o,oe}var pe,he={};function xe(){if(pe)return he;pe=1,Object.defineProperty(he,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=le(),n=(e=r)&&e.__esModule?e:{default:e},o=se();var a=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o.A_START_CHAR+e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return new RegExp("^"+o.A_CHARS+"+$").test(this.data)}}]),r}(n.default);return he.default=a,he}var be,me={};function ve(){if(be)return me;be=1,Object.defineProperty(me,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=le(),n=(e=r)&&e.__esModule?e:{default:e},o=se();var a=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o.B_START_CHAR+e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return new RegExp("^"+o.B_CHARS+"+$").test(this.data)}}]),r}(n.default);return me.default=a,me}var ye,ge,je={};function _e(){if(ye)return je;ye=1,Object.defineProperty(je,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=le(),n=(e=r)&&e.__esModule?e:{default:e},o=se();var a=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o.C_START_CHAR+e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return new RegExp("^"+o.C_CHARS+"+$").test(this.data)}}]),r}(n.default);return je.default=a,je}var we,Oe={},Ee={},Ne={};function Ce(){return we||(we=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.SIDE_BIN="101",Ne.MIDDLE_BIN="01010",Ne.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},Ne.EAN2_STRUCTURE=["LL","LG","GL","GG"],Ne.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],Ne.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),Ne}var Pe,Se,ke,Ae={},Te={};function Me(){if(Pe)return Te;Pe=1,Object.defineProperty(Te,"__esModule",{value:!0});var e=Ce();return Te.default=function(t,r,n){var o=t.split("").map(function(t,n){return e.BINARIES[r[n]]}).map(function(e,r){return e?e[t[r]]:""});if(n){var a=t.length-1;o=o.map(function(e,t){return t<a?e+n:e})}return o.join("")},Te}function Re(){if(Se)return Ae;Se=1,Object.defineProperty(Ae,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=Ce(),r=n(Me());function n(e){return e&&e.__esModule?e:{default:e}}var o=function(n){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return r.fontSize=!t.flat&&t.fontSize>10*t.width?10*t.width:t.fontSize,r.guardHeight=t.height+r.fontSize/2+t.textMargin,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),e(o,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,t){return this.text.substr(e,t)}},{key:"leftEncode",value:function(e,t){return(0,r.default)(e,t)}},{key:"rightText",value:function(e,t){return this.text.substr(e,t)}},{key:"rightEncode",value:function(e,t){return(0,r.default)(e,t)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},r={height:this.guardHeight};return[{data:t.SIDE_BIN,options:r},{data:this.leftEncode(),text:this.leftText(),options:e},{data:t.MIDDLE_BIN,options:r},{data:this.rightEncode(),text:this.rightText(),options:e},{data:t.SIDE_BIN,options:r}]}},{key:"encodeFlat",value:function(){return{data:[t.SIDE_BIN,this.leftEncode(),t.MIDDLE_BIN,this.rightEncode(),t.SIDE_BIN].join(""),text:this.text}}}]),o}(n(Z()).default);return Ae.default=o,Ae}function Ie(){if(ke)return Ee;ke=1,Object.defineProperty(Ee,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0},n=Ce(),o=Re(),a=(e=o)&&e.__esModule?e:{default:e};var i=function(e){return(10-e.substr(0,12).split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+3*t:e+t},0)%10)%10},s=function(e){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),-1!==e.search(/^[0-9]{12}$/)&&(e+=i(e));var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return r.lastChar=t.lastChar,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,e),t(o,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===i(this.data)}},{key:"leftText",value:function(){return r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var e=this.data.substr(1,6),t=n.EAN13_STRUCTURE[this.data[0]];return r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"leftEncode",this).call(this,e,t)}},{key:"rightText",value:function(){return r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var e=this.data.substr(7,6);return r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"rightEncode",this).call(this,e,"RRRRRR")}},{key:"encodeGuarded",value:function(){var e=r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(e.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),o}(a.default);return Ee.default=s,Ee}var Le,De={};function ze(){if(Le)return De;Le=1,Object.defineProperty(De,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0},n=Re(),o=(e=n)&&e.__esModule?e:{default:e};var a=function(e){return(10-e.substr(0,7).split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+t:e+3*t},0)%10)%10},i=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),-1!==e.search(/^[0-9]{7}$/)&&(e+=a(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),t(n,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===a(this.data)}},{key:"leftText",value:function(){return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var e=this.data.substr(0,4);return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"leftEncode",this).call(this,e,"LLLL")}},{key:"rightText",value:function(){return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var e=this.data.substr(4,4);return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"rightEncode",this).call(this,e,"RRRR")}}]),n}(o.default);return De.default=i,De}var Ge,Be={};function Fe(){if(Ge)return Be;Ge=1,Object.defineProperty(Be,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=Ce(),r=o(Me()),n=o(Z());function o(e){return e&&e.__esModule?e:{default:e}}var a=function(n){function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),e(o,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var e,n=t.EAN5_STRUCTURE[(e=this.data,e.split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+9*t:e+3*t},0)%10)];return{data:"1011"+(0,r.default)(this.data,n,"01"),text:this.text}}}]),o}(n.default);return Be.default=a,Be}var Xe,Ue={};function He(){if(Xe)return Ue;Xe=1,Object.defineProperty(Ue,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=Ce(),r=n(Me());function n(e){return e&&e.__esModule?e:{default:e}}var o=function(n){function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),e(o,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var e=t.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,r.default)(this.data,e,"01"),text:this.text}}}]),o}(n(Z()).default);return Ue.default=o,Ue}var Ve,qe={};function $e(){if(Ve)return qe;Ve=1,Object.defineProperty(qe,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();qe.checksum=o;var t=r(Me());function r(e){return e&&e.__esModule?e:{default:e}}var n=function(r){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),-1!==e.search(/^[0-9]{11}$/)&&(e+=o(e));var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.displayValue=t.displayValue,t.fontSize>10*t.width?r.fontSize=10*t.width:r.fontSize=t.fontSize,r.guardHeight=t.height+r.fontSize/2+t.textMargin,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),e(n,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==o(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=(0,t.default)(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=(0,t.default)(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,t.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,t.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,t.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,t.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),n}(r(Z()).default);function o(e){var t,r=0;for(t=1;t<11;t+=2)r+=parseInt(e[t]);for(t=0;t<11;t+=2)r+=3*parseInt(e[t]);return(10-r%10)%10}return qe.default=n,qe}var Ke,We,Qe={};function Ye(){if(Ke)return Qe;Ke=1,Object.defineProperty(Qe,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=o(Me()),r=o(Z()),n=$e();function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],s=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],l=function(r){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));if(r.isValid=!1,-1!==e.search(/^[0-9]{6}$/))r.middleDigits=e,r.upcA=c(e,"0"),r.text=t.text||""+r.upcA[0]+e+r.upcA[r.upcA.length-1],r.isValid=!0;else{if(-1===e.search(/^[01][0-9]{7}$/))return a(r);if(r.middleDigits=e.substring(1,e.length-1),r.upcA=c(r.middleDigits,e[0]),r.upcA[r.upcA.length-1]!==e[e.length-1])return a(r);r.isValid=!0}return r.displayValue=t.displayValue,t.fontSize>10*t.width?r.fontSize=10*t.width:r.fontSize=t.fontSize,r.guardHeight=t.height+r.fontSize/2+t.textMargin,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),e(n,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=this.encodeMiddleDigits(),{data:e+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],r=this.upcA[this.upcA.length-1],n=s[parseInt(r)][parseInt(e)];return(0,t.default)(this.middleDigits,n)}}]),n}(r.default);function c(e,t){for(var r=parseInt(e[e.length-1]),o=i[r],a="",s=0,l=0;l<o.length;l++){var c=o[l];a+="X"===c?e[s++]:c}return""+(a=""+t+a)+(0,n.checksum)(a)}return Qe.default=l,Qe}var Je,Ze,et={},tt={},rt={};function nt(){if(Ze)return tt;Ze=1,Object.defineProperty(tt,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=(Je||(Je=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.START_BIN="1010",rt.END_BIN="11101",rt.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),rt),n=Z();var o=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),t(n,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var e=this,t=this.data.match(/.{2}/g).map(function(t){return e.encodePair(t)}).join("");return{data:r.START_BIN+t+r.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var t=r.BINARIES[e[1]];return r.BINARIES[e[0]].split("").map(function(e,r){return("1"===e?"111":"1")+("1"===t[r]?"000":"0")}).join("")}}]),n}(((e=n)&&e.__esModule?e:{default:e}).default);return tt.default=o,tt}var ot,at,it={};function st(){if(ot)return it;ot=1,Object.defineProperty(it,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=nt(),n=(e=r)&&e.__esModule?e:{default:e};var o=function(e){var t=e.substr(0,13).split("").map(function(e){return parseInt(e,10)}).reduce(function(e,t,r){return e+t*(3-r%2*2)},0);return 10*Math.ceil(t/10)-t},a=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),-1!==e.search(/^[0-9]{13}$/)&&(e+=o(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===o(this.data)}}]),r}(n.default);return it.default=a,it}var lt,ct={},ut={};function dt(){if(lt)return ut;lt=1,Object.defineProperty(ut,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Z();var n=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"encode",value:function(){for(var e="110",t=0;t<this.data.length;t++){var r=parseInt(this.data[t]).toString(2);r=o(r,4-r.length);for(var n=0;n<r.length;n++)e+="0"==r[n]?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default);function o(e,t){for(var r=0;r<t;r++)e="0"+e;return e}return ut.default=n,ut}var ft,pt,ht={},xt={};function bt(){if(ft)return xt;return ft=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.mod10=function(e){for(var t=0,r=0;r<e.length;r++){var n=parseInt(e[r]);(r+e.length)%2==0?t+=n:t+=2*n%10+Math.floor(2*n/10)}return(10-t%10)%10},xt.mod11=function(e){for(var t=0,r=[2,3,4,5,6,7],n=0;n<e.length;n++){var o=parseInt(e[e.length-1-n]);t+=r[n%r.length]*o}return(11-t%11)%11},xt}function mt(){if(pt)return ht;pt=1,Object.defineProperty(ht,"__esModule",{value:!0});var e,t=dt(),r=(e=t)&&e.__esModule?e:{default:e},n=bt();var o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,n.mod10)(e),r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);return ht.default=o,ht}var vt,yt={};function gt(){if(vt)return yt;vt=1,Object.defineProperty(yt,"__esModule",{value:!0});var e,t=dt(),r=(e=t)&&e.__esModule?e:{default:e},n=bt();var o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,n.mod11)(e),r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);return yt.default=o,yt}var jt,_t={};function wt(){if(jt)return _t;jt=1,Object.defineProperty(_t,"__esModule",{value:!0});var e,t=dt(),r=(e=t)&&e.__esModule?e:{default:e},n=bt();var o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,n.mod10)(e),e+=(0,n.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);return _t.default=o,_t}var Ot,Et,Nt={};function Ct(){if(Ot)return Nt;Ot=1,Object.defineProperty(Nt,"__esModule",{value:!0});var e,t=dt(),r=(e=t)&&e.__esModule?e:{default:e},n=bt();var o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,n.mod11)(e),e+=(0,n.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);return Nt.default=o,Nt}var Pt,St={};function kt(){if(Pt)return St;Pt=1,Object.defineProperty(St,"__esModule",{value:!0}),St.pharmacode=void 0;var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Z();var n=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.number=parseInt(e,10),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"encode",value:function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e%2==0?(t="11100"+t,e=(e-2)/2):(t="100"+t,e=(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default);return St.pharmacode=n,St}var At,Tt={};function Mt(){if(At)return Tt;At=1,Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.codabar=void 0;var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Z();var n=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e.toUpperCase(),t));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],t=this.getEncodings(),r=0;r<this.data.length;r++)e.push(t[this.data.charAt(r)]),r!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default);return Tt.codabar=n,Tt}var Rt,It,Lt={};function Dt(){if(Rt)return Lt;Rt=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.GenericBarcode=void 0;var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Z();var n=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default);return Lt.GenericBarcode=n,Lt}function zt(){if(It)return Q;It=1,Object.defineProperty(Q,"__esModule",{value:!0});var e=ee(),t=function(){if(ge)return ne;ge=1,Object.defineProperty(ne,"__esModule",{value:!0}),ne.CODE128C=ne.CODE128B=ne.CODE128A=ne.CODE128=void 0;var e=o(fe()),t=o(xe()),r=o(ve()),n=o(_e());function o(e){return e&&e.__esModule?e:{default:e}}return ne.CODE128=e.default,ne.CODE128A=t.default,ne.CODE128B=r.default,ne.CODE128C=n.default,ne}(),r=function(){if(We)return Oe;We=1,Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.UPCE=Oe.UPC=Oe.EAN2=Oe.EAN5=Oe.EAN8=Oe.EAN13=void 0;var e=i(Ie()),t=i(ze()),r=i(Fe()),n=i(He()),o=i($e()),a=i(Ye());function i(e){return e&&e.__esModule?e:{default:e}}return Oe.EAN13=e.default,Oe.EAN8=t.default,Oe.EAN5=r.default,Oe.EAN2=n.default,Oe.UPC=o.default,Oe.UPCE=a.default,Oe}(),n=function(){if(at)return et;at=1,Object.defineProperty(et,"__esModule",{value:!0}),et.ITF14=et.ITF=void 0;var e=r(nt()),t=r(st());function r(e){return e&&e.__esModule?e:{default:e}}return et.ITF=e.default,et.ITF14=t.default,et}(),o=function(){if(Et)return ct;Et=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.MSI1110=ct.MSI1010=ct.MSI11=ct.MSI10=ct.MSI=void 0;var e=a(dt()),t=a(mt()),r=a(gt()),n=a(wt()),o=a(Ct());function a(e){return e&&e.__esModule?e:{default:e}}return ct.MSI=e.default,ct.MSI10=t.default,ct.MSI11=r.default,ct.MSI1010=n.default,ct.MSI1110=o.default,ct}(),a=kt(),i=Mt(),s=Dt();return Q.default={CODE39:e.CODE39,CODE128:t.CODE128,CODE128A:t.CODE128A,CODE128B:t.CODE128B,CODE128C:t.CODE128C,EAN13:r.EAN13,EAN8:r.EAN8,EAN5:r.EAN5,EAN2:r.EAN2,UPC:r.UPC,UPCE:r.UPCE,ITF14:n.ITF14,ITF:n.ITF,MSI:o.MSI,MSI10:o.MSI10,MSI11:o.MSI11,MSI1010:o.MSI1010,MSI1110:o.MSI1110,pharmacode:a.pharmacode,codabar:i.codabar,GenericBarcode:s.GenericBarcode},Q}var Gt,Bt={};function Ft(){if(Gt)return Bt;Gt=1,Object.defineProperty(Bt,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return Bt.default=function(t,r){return e({},t,r)},Bt}var Xt,Ut={};var Ht,Vt={};var qt,$t={},Kt={},Wt={};function Qt(){if(qt)return Wt;return qt=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.default=function(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in t)t.hasOwnProperty(r)&&"string"==typeof e[r=t[r]]&&(e[r]=parseInt(e[r],10));"string"==typeof e.displayValue&&(e.displayValue="false"!=e.displayValue);return e},Wt}var Yt,Jt,Zt={};function er(){if(Yt)return Zt;Yt=1,Object.defineProperty(Zt,"__esModule",{value:!0});return Zt.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}},Zt}var tr,rr,nr={},or={},ar={};function ir(){if(tr)return ar;tr=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.getTotalWidthOfEncodings=ar.calculateEncodingAttributes=ar.getBarcodePadding=ar.getEncodingHeight=ar.getMaximumHeightOfEncodings=void 0;var e,t=Ft(),r=(e=t)&&e.__esModule?e:{default:e};function n(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function o(e,t,r){if(r.displayValue&&t<e){if("center"==r.textAlign)return Math.floor((e-t)/2);if("left"==r.textAlign)return 0;if("right"==r.textAlign)return Math.floor(e-t)}return 0}function a(e,t,r){var n;if(r)n=r;else{if("undefined"==typeof document)return 0;n=document.createElement("canvas").getContext("2d")}n.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var o=n.measureText(e);return o?o.width:0}return ar.getMaximumHeightOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)e[r].height>t&&(t=e[r].height);return t},ar.getEncodingHeight=n,ar.getBarcodePadding=o,ar.calculateEncodingAttributes=function(e,t,i){for(var s=0;s<e.length;s++){var l,c=e[s],u=(0,r.default)(t,c.options);l=u.displayValue?a(c.text,u,i):0;var d=c.data.length*u.width;c.width=Math.ceil(Math.max(l,d)),c.height=n(c,u),c.barcodePadding=o(l,d,u)}},ar.getTotalWidthOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].width;return t},ar}function sr(){if(rr)return or;rr=1,Object.defineProperty(or,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Ft(),n=(e=r)&&e.__esModule?e:{default:e},o=ir();var a=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.encodings=r,this.options=n}return t(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,n.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,o.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,o.getTotalWidthOfEncodings)(this.encodings),r=(0,o.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=r,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var r,n=this.canvas.getContext("2d"),o=t.data;r="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,n.fillStyle=e.lineColor;for(var a=0;a<o.length;a++){var i=a*e.width+t.barcodePadding;"1"===o[a]?n.fillRect(i,r,e.width,e.height):o[a]&&n.fillRect(i,r,e.width,e.height*o[a])}}},{key:"drawCanvasText",value:function(e,t){var r,n,o=this.canvas.getContext("2d"),a=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(n="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,o.font=a,"left"==e.textAlign||t.barcodePadding>0?(r=0,o.textAlign="left"):"right"==e.textAlign?(r=t.width-1,o.textAlign="right"):(r=t.width/2,o.textAlign="center"),o.fillText(t.text,r,n))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),e}();return or.default=a,or}var lr,cr={};function ur(){if(lr)return cr;lr=1,Object.defineProperty(cr,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Ft(),n=(e=r)&&e.__esModule?e:{default:e},o=ir();var a="http://www.w3.org/2000/svg",i=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.svg=t,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return t(e,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var r=this.encodings[t],o=(0,n.default)(this.options,r.options),a=this.createGroup(e,o.marginTop,this.svg);this.setGroupOptions(a,o),this.drawSvgBarcode(a,o,r),this.drawSVGText(a,o,r),e+=r.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,o.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,o.getTotalWidthOfEncodings)(this.encodings),t=(0,o.getMaximumHeightOfEncodings)(this.encodings),r=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(r,t),this.options.background&&this.drawRect(0,0,r,t,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,t,r){var n,o=r.data;n="top"==t.textPosition?t.fontSize+t.textMargin:0;for(var a=0,i=0,s=0;s<o.length;s++)i=s*t.width+r.barcodePadding,"1"===o[s]?a++:a>0&&(this.drawRect(i-t.width*a,n,t.width*a,t.height,e),a=0);a>0&&this.drawRect(i-t.width*(a-1),n,t.width*a,t.height,e)}},{key:"drawSVGText",value:function(e,t,r){var n,o,i=this.document.createElementNS(a,"text");t.displayValue&&(i.setAttribute("style","font:"+t.fontOptions+" "+t.fontSize+"px "+t.font),o="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||r.barcodePadding>0?(n=0,i.setAttribute("text-anchor","start")):"right"==t.textAlign?(n=r.width-1,i.setAttribute("text-anchor","end")):(n=r.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",n),i.setAttribute("y",o),i.appendChild(this.document.createTextNode(r.text)),e.appendChild(i))}},{key:"setSvgAttributes",value:function(e,t){var r=this.svg;r.setAttribute("width",e+"px"),r.setAttribute("height",t+"px"),r.setAttribute("x","0px"),r.setAttribute("y","0px"),r.setAttribute("viewBox","0 0 "+e+" "+t),r.setAttribute("xmlns",a),r.setAttribute("version","1.1"),r.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,t,r){var n=this.document.createElementNS(a,"g");return n.setAttribute("transform","translate("+e+", "+t+")"),r.appendChild(n),n}},{key:"setGroupOptions",value:function(e,t){e.setAttribute("style","fill:"+t.lineColor+";")}},{key:"drawRect",value:function(e,t,r,n,o){var i=this.document.createElementNS(a,"rect");return i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",r),i.setAttribute("height",n),o.appendChild(i),i}}]),e}();return cr.default=i,cr}var dr,fr,pr={};function hr(){if(dr)return pr;dr=1,Object.defineProperty(pr,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var t=function(){function t(e,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.object=e,this.encodings=r,this.options=n}return e(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();return pr.default=t,pr}var xr,br,mr={};function vr(){if(xr)return mr;function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}xr=1,Object.defineProperty(mr,"__esModule",{value:!0});var n=function(){function n(r,o){e(this,n);var a=t(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.name="InvalidInputException",a.symbology=r,a.input=o,a.message='"'+a.input+'" is not a valid input for '+a.symbology,a}return r(n,Error),n}(),o=function(){function n(){e(this,n);var r=t(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return r(n,Error),n}(),a=function(){function n(){e(this,n);var r=t(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.name="NoElementException",r.message="No element to render on.",r}return r(n,Error),n}();return mr.InvalidInputException=n,mr.InvalidElementException=o,mr.NoElementException=a,mr}function yr(){if(br)return $t;br=1,Object.defineProperty($t,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(){if(Jt)return Kt;Jt=1,Object.defineProperty(Kt,"__esModule",{value:!0});var e=r(Qt()),t=r(er());function r(e){return e&&e.__esModule?e:{default:e}}return Kt.default=function(r){var n={};for(var o in t.default)t.default.hasOwnProperty(o)&&(r.hasAttribute("jsbarcode-"+o.toLowerCase())&&(n[o]=r.getAttribute("jsbarcode-"+o.toLowerCase())),r.hasAttribute("data-"+o.toLowerCase())&&(n[o]=r.getAttribute("data-"+o.toLowerCase())));return n.value=r.getAttribute("jsbarcode-value")||r.getAttribute("data-value"),(0,e.default)(n)},Kt}(),r=i(t),n=function(){if(fr)return nr;fr=1,Object.defineProperty(nr,"__esModule",{value:!0});var e=n(sr()),t=n(ur()),r=n(hr());function n(e){return e&&e.__esModule?e:{default:e}}return nr.default={CanvasRenderer:e.default,SVGRenderer:t.default,ObjectRenderer:r.default},nr}(),o=i(n),a=vr();function i(e){return e&&e.__esModule?e:{default:e}}function s(t){if("string"==typeof t)return function(e){var t=document.querySelectorAll(e);if(0===t.length)return;for(var r=[],n=0;n<t.length;n++)r.push(s(t[n]));return r}(t);if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i++)n.push(s(t[i]));return n}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLImageElement)return l=t,{element:c=document.createElement("canvas"),options:(0,r.default)(l),renderer:o.default.CanvasRenderer,afterRender:function(){l.setAttribute("src",c.toDataURL())}};if(t&&t.nodeName&&"svg"===t.nodeName.toLowerCase()||"undefined"!=typeof SVGElement&&t instanceof SVGElement)return{element:t,options:(0,r.default)(t),renderer:o.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement)return{element:t,options:(0,r.default)(t),renderer:o.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:o.default.CanvasRenderer};if(t&&"object"===(void 0===t?"undefined":e(t))&&!t.nodeName)return{element:t,renderer:o.default.ObjectRenderer};throw new a.InvalidElementException;var l,c}return $t.default=s,$t}var gr,jr,_r,wr={};function Or(){if(gr)return wr;gr=1,Object.defineProperty(wr,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=e}return e(t,[{key:"handleCatch",value:function(e){if("InvalidInputException"!==e.name)throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(r){return this.handleCatch(r),this.api}}}]),t}();return wr.default=t,wr}const Er=d(function(){if(_r)return jr;_r=1;var e=c(zt()),t=c(Ft()),r=c((Xt||(Xt=1,Object.defineProperty(Ut,"__esModule",{value:!0}),Ut.default=function(e){var t=[];return function e(r){if(Array.isArray(r))for(var n=0;n<r.length;n++)e(r[n]);else r.text=r.text||"",r.data=r.data||"",t.push(r)}(e),t}),Ut)),n=c((Ht||(Ht=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}),Vt)),o=c(yr()),a=c(Qt()),i=c(Or()),s=vr(),l=c(er());function c(e){return e&&e.__esModule?e:{default:e}}var u=function(){},d=function(e,t,r){var n=new u;if(void 0===e)throw Error("No element to render on was provided.");return n._renderProperties=(0,o.default)(e),n._encodings=[],n._options=l.default,n._errorHandler=new i.default(n),void 0!==t&&((r=r||{}).format||(r.format=x()),n.options(r)[r.format](t,r).render()),n};for(var f in d.getModule=function(t){return e.default[t]},e.default)e.default.hasOwnProperty(f)&&p(e.default,f);function p(e,r){u.prototype[r]=u.prototype[r.toUpperCase()]=u.prototype[r.toLowerCase()]=function(n,o){var i=this;return i._errorHandler.wrapBarcodeCall(function(){o.text=void 0===o.text?void 0:""+o.text;var s=(0,t.default)(i._options,o);s=(0,a.default)(s);var l=e[r],c=h(n,l,s);return i._encodings.push(c),i})}}function h(e,n,o){var a=new n(e=""+e,o);if(!a.valid())throw new s.InvalidInputException(a.constructor.name,e);var i=a.encode();i=(0,r.default)(i);for(var l=0;l<i.length;l++)i[l].options=(0,t.default)(o,i[l].options);return i}function x(){return e.default.CODE128?"CODE128":Object.keys(e.default)[0]}function b(e,o,a){o=(0,r.default)(o);for(var i=0;i<o.length;i++)o[i].options=(0,t.default)(a,o[i].options),(0,n.default)(o[i].options);(0,n.default)(a),new(0,e.renderer)(e.element,o,a).render(),e.afterRender&&e.afterRender()}return u.prototype.options=function(e){return this._options=(0,t.default)(this._options,e),this},u.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this},u.prototype.init=function(){var r;if(this._renderProperties)for(var n in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){r=this._renderProperties[n];var o=(0,t.default)(this._options,r.options);"auto"==o.format&&(o.format=x()),this._errorHandler.wrapBarcodeCall(function(){var t=h(o.value,e.default[o.format.toUpperCase()],o);b(r,t,o)})}},u.prototype.render=function(){if(!this._renderProperties)throw new s.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)b(this._renderProperties[e],this._encodings,this._options);else b(this._renderProperties,this._encodings,this._options);return this},u.prototype._defaults=l.default,"undefined"!=typeof window&&(window.JsBarcode=d),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var r=[];return jQuery(this).each(function(){r.push(this)}),d(r,e,t)}),jr=d}()),Nr=e=>{var t;const r=(new DOMParser).parseFromString(e,"text/xml"),n=(e,t)=>{const r=e.getElementsByTagName(t)[0];return r?r.textContent:""},o=r.getElementsByTagName("infNFe")[0],a=o&&(null==(t=o.getAttribute("Id"))?void 0:t.replace("NFe",""))||"",i=r.getElementsByTagName("ide")[0],s=n(i,"nNF")||"",l=n(i,"serie")||"",c=n(i,"dhEmi")||"",u=r.getElementsByTagName("emit")[0],d={name:n(u,"xNome")||"",document:n(u,"CNPJ")||"",phone:n(u,"fone")||"",address:`${n(u,"xLgr")}, ${n(u,"nro")} - ${n(u,"xBairro")}, ${n(u,"xMun")}/${n(u,"UF")}`},f=[],p=r.getElementsByTagName("det");for(let x=0;x<p.length;x++){const e=p[x].getElementsByTagName("prod")[0];f.push({code:"SEM GTIN"!==n(e,"cEAN")?n(e,"cEAN"):n(e,"cProd"),name:n(e,"xProd"),ncm:n(e,"NCM"),unit:n(e,"uCom"),quantity:parseFloat(n(e,"qCom")||"0"),cost:parseFloat(n(e,"vUnCom")||"0"),price:1.5*parseFloat(n(e,"vUnCom")||"0")})}const h=r.getElementsByTagName("total")[0].getElementsByTagName("ICMSTot")[0];return{accessKey:a,number:s,series:l,date:c,supplier:d,products:f,totalValue:parseFloat(n(h,"vNF")||"0")}},Cr=({isOpen:e,onClose:t,onSuccess:r})=>{const[n,o]=f.useState("UPLOAD"),[a,i]=f.useState(null),[u,d]=f.useState(!1),[j,_]=f.useState("1"),w=f.useRef(null);if(!e)return null;const O=e=>c(null,null,function*(){if(e&&a){const e=parseInt(j),t=a.totalValue/e;for(let r=1;r<=e;r++){const n=new Date;n.setMonth(n.getMonth()+r),yield y.addFinancialRecord({id:crypto.randomUUID(),type:"EXPENSE",description:`NFe #${a.number} - Parc ${r}/${e} - ${a.supplier.name}`,amount:t,category:"COMPRA DE MERCADORIA",date:n.toISOString(),status:"PENDING",referenceId:a.number})}}r(),t()});return p.jsx(h,{children:p.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col shadow-2xl",children:[p.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight uppercase",children:"Importar NF-e (XML)"}),p.jsx("p",{className:"text-slate-500 font-medium",children:"Entrada de mercadorias e fornecedores"})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx("div",{className:"w-3 h-3 rounded-full "+("UPLOAD"===n?"bg-blue-500":"bg-slate-200")}),p.jsx("div",{className:"w-3 h-3 rounded-full "+("CONFERENCE"===n?"bg-blue-500":"bg-slate-200")}),p.jsx("div",{className:"w-3 h-3 rounded-full "+("FINANCIAL"===n?"bg-blue-500":"bg-slate-200")})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-8",children:["UPLOAD"===n&&p.jsxs("div",{onClick:()=>{var e;return null==(e=w.current)?void 0:e.click()},className:"border-4 border-dashed border-slate-100 rounded-[2rem] p-20 flex flex-col items-center justify-center gap-6 hover:border-blue-200 hover:bg-blue-50/30 transition-all cursor-pointer group",children:[p.jsx("div",{className:"w-24 h-24 bg-blue-50 rounded-3xl flex items-center justify-center text-blue-500 group-hover:scale-110 transition-transform",children:p.jsx(V,{size:48})}),p.jsxs("div",{className:"text-center",children:[p.jsx("h3",{className:"text-xl font-bold text-slate-800 mb-2",children:"Selecione o arquivo XML"}),p.jsx("p",{className:"text-slate-500",children:"Clique aqui ou arraste o arquivo da nota fiscal"})]}),p.jsx("input",{type:"file",ref:w,className:"hidden",accept:".xml",onChange:e=>{var t;const r=null==(t=e.target.files)?void 0:t[0];if(!r)return;const n=new FileReader;n.onload=e=>{var t;const r=null==(t=e.target)?void 0:t.result;try{const e=Nr(r);i(e),o("CONFERENCE")}catch(n){alert("Erro ao processar XML da NFe. Verifique se o arquivo é válido.")}},n.readAsText(r)}})]}),"CONFERENCE"===n&&a&&p.jsxs("div",{className:"space-y-8",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[p.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4 text-slate-400 uppercase text-[10px] font-black tracking-widest",children:[p.jsx($,{size:14})," Fornecedor"]}),p.jsx("h4",{className:"text-lg font-bold text-slate-800",children:a.supplier.name}),p.jsx("p",{className:"text-sm text-slate-500",children:a.supplier.document}),p.jsx("p",{className:"text-xs text-slate-400 mt-2",children:a.supplier.address})]}),p.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4 text-slate-400 uppercase text-[10px] font-black tracking-widest",children:[p.jsx(x,{size:14})," Dados da Nota"]}),p.jsxs("h4",{className:"text-lg font-bold text-slate-800",children:["NF-e #",a.number]}),p.jsxs("p",{className:"text-sm text-slate-500",children:["Série: ",a.series]}),p.jsxs("p",{className:"text-sm font-black text-blue-600 mt-2",children:["Valor Total: ",b(a.totalValue)]})]})]}),p.jsx("div",{className:"border border-slate-100 rounded-3xl overflow-hidden",children:p.jsxs("table",{className:"w-full text-left border-collapse",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"bg-slate-50 border-b border-slate-100",children:[p.jsx("th",{className:"p-4 text-[10px] font-black uppercase text-slate-400 tracking-widest",children:"Produto"}),p.jsx("th",{className:"p-4 text-[10px] font-black uppercase text-slate-400 tracking-widest text-center",children:"Qtd"}),p.jsx("th",{className:"p-4 text-[10px] font-black uppercase text-slate-400 tracking-widest text-right",children:"Custo Un."}),p.jsx("th",{className:"p-4 text-[10px] font-black uppercase text-slate-400 tracking-widest text-right",children:"Total"})]})}),p.jsx("tbody",{children:a.products.map((e,t)=>p.jsxs("tr",{className:"border-b border-slate-50 last:border-0",children:[p.jsxs("td",{className:"p-4",children:[p.jsx("div",{className:"font-bold text-slate-800",children:e.name}),p.jsx("div",{className:"text-[10px] text-slate-400 font-mono",children:e.code})]}),p.jsxs("td",{className:"p-4 text-center font-bold text-slate-600",children:[e.quantity," ",e.unit]}),p.jsx("td",{className:"p-4 text-right font-bold text-slate-600",children:b(e.cost||0)}),p.jsx("td",{className:"p-4 text-right font-black text-slate-800",children:b((e.cost||0)*(e.quantity||0))})]},t))})]})})]}),"FINANCIAL"===n&&p.jsxs("div",{className:"flex flex-col items-center justify-center py-10 gap-8",children:[p.jsx("div",{className:"w-20 h-20 bg-emerald-50 text-emerald-500 rounded-full flex items-center justify-center",children:p.jsx(B,{size:40})}),p.jsxs("div",{className:"text-center max-w-md",children:[p.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Entrada Processada!"}),p.jsx("p",{className:"text-slate-500 font-medium",children:"O estoque foi atualizado e o fornecedor cadastrado. Deseja gerar uma fatura no Contas a Pagar?"})]}),p.jsxs("div",{className:"w-full max-w-sm bg-slate-50 p-8 rounded-[2rem] border border-slate-100",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-6 text-slate-400 uppercase text-[10px] font-black tracking-widest",children:[p.jsx(A,{size:14})," Configurar Pagamento"]}),p.jsx(m,{label:"Número de Parcelas",type:"number",min:"1",max:"12",value:j,onChange:e=>_(e.target.value)}),p.jsxs("div",{className:"mt-4 p-4 bg-white rounded-2xl border border-slate-100 flex justify-between items-center",children:[p.jsx("span",{className:"text-xs font-bold text-slate-400 uppercase",children:"Valor da Parcela"}),p.jsx("span",{className:"text-lg font-black text-slate-800",children:b(a.totalValue/parseInt(j||"1"))})]})]})]})]}),p.jsxs("div",{className:"p-8 bg-slate-50 border-t border-slate-100 flex gap-4",children:["CONFERENCE"===n&&p.jsxs(p.Fragment,{children:[p.jsx(v,{variant:"ghost",onClick:()=>o("UPLOAD"),className:"flex-1",children:"Voltar"}),p.jsx(v,{onClick:()=>c(null,null,function*(){if(a){d(!0);try{yield y.saveSupplier(a.supplier);for(const e of a.products){const t=(yield y.getProducts()).find(t=>t.code===e.code);if(t)yield y.updateStock(t.id,e.quantity||0,g.ENTRY,a.number,`Entrada via NFe #${a.number}`),yield y.saveProduct(l(s({},t),{cost:e.cost||t.cost,price:e.price||t.price}));else{const t={id:crypto.randomUUID(),code:e.code||"",name:e.name||"",price:e.price||0,cost:e.cost||0,stock:e.quantity||0,ncm:e.ncm||"",cest:"",origin:"0",taxGroup:"A",unit:e.unit||"UN",minStock:0};yield y.saveProduct(t),yield y.updateStock(t.id,e.quantity||0,g.ENTRY,a.number,`Entrada via NFe #${a.number} (Novo Produto)`)}}o("FINANCIAL")}catch(e){console.error(e),alert("Erro ao processar entrada.")}finally{d(!1)}}}),disabled:u,className:"flex-[2]",children:u?p.jsx(R,{className:"animate-spin"}):p.jsxs(p.Fragment,{children:[p.jsx(B,{size:18})," Confirmar Entrada"]})})]}),"FINANCIAL"===n&&p.jsxs(p.Fragment,{children:[p.jsx(v,{variant:"ghost",onClick:()=>O(!1),className:"flex-1",children:"Não Gerar"}),p.jsx(v,{variant:"success",onClick:()=>O(!0),className:"flex-[2]",children:"Gerar Contas a Pagar"})]}),"UPLOAD"===n&&p.jsx(v,{variant:"ghost",onClick:t,className:"w-full",children:"Cancelar"})]})]})})},Pr=({value:e,className:t})=>{const r=f.useRef(null);return f.useEffect(()=>{if(r.current)try{Er(r.current,e,{format:"CODE128",width:2,height:30,displayValue:!0,fontSize:12,margin:0,background:"transparent"})}catch(t){console.error("Barcode error",t)}},[e]),p.jsx("svg",{ref:r,className:`w-full h-full max-w-full ${t}`})},Sr=()=>{const[e,t]=f.useState([]),[r,n]=f.useState([]),[o,a]=f.useState("LIST"),[i,u]=f.useState(!1),[d,h]=f.useState(!1),[x,A]=f.useState(!1),[R,B]=f.useState(!1),[V,$]=f.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[K,W]=f.useState({isOpen:!1,title:"",message:"",type:"info"}),Q=(e,t="Atenção",r="info")=>{W({isOpen:!0,message:e,title:t,type:r})},[Y,J]=f.useState([]),[Z,ee]=f.useState(""),[te,re]=f.useState(1),[ne,oe]=f.useState(!1),[ae,ie]=f.useState({taxGroup:"A",unit:"UN",origin:"0"}),[se,le]=f.useState(null);f.useEffect(()=>{ce()},[]);const ce=()=>c(null,null,function*(){try{const[e,r]=yield Promise.all([y.getProducts(),y.getKardex()]);t(Array.isArray(e)?e:[]);const o=Array.isArray(r)?r:[];n(o.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()))}catch(e){console.error("Error refreshing inventory data:",e),t([]),n([])}}),ue=(e,t)=>{t<1||J(r=>r.map(r=>r.product.id===e?l(s({},r),{qty:t}):r))},de=Z.length>0?e.filter(e=>e.name.toLowerCase().includes(Z.toLowerCase())||e.code.includes(Z)).slice(0,10):[],fe=Y.flatMap(e=>Array(e.qty).fill(e.product));return p.jsxs("div",{className:"space-y-6",children:[p.jsx(j,{isOpen:V.isOpen,onClose:()=>$(e=>l(s({},e),{isOpen:!1})),onConfirm:V.onConfirm,title:V.title,message:V.message}),p.jsx(_,{isOpen:K.isOpen,onClose:()=>W(e=>l(s({},e),{isOpen:!1})),title:K.title,message:K.message,type:K.type}),p.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[p.jsxs("div",{children:[p.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Controle de Estoque"}),p.jsx("p",{className:"text-slate-500",children:"Gerencie produtos e visualize o Kardex"})]}),p.jsxs("div",{className:"flex gap-2 flex-wrap",children:[p.jsxs("div",{className:"flex bg-white rounded-lg border border-slate-200 p-1",children:[p.jsx("button",{onClick:()=>a("LIST"),className:"px-4 py-1.5 rounded-md text-sm font-medium transition "+("LIST"===o?"bg-brand-100 text-brand-700":"text-slate-500 hover:text-slate-700"),children:"Produtos"}),p.jsx("button",{onClick:()=>a("KARDEX"),className:"px-4 py-1.5 rounded-md text-sm font-medium transition "+("KARDEX"===o?"bg-brand-100 text-brand-700":"text-slate-500 hover:text-slate-700"),children:"Kardex (Livro)"})]}),p.jsxs(v,{variant:"secondary",onClick:()=>{A(!0),oe(!1)},children:[p.jsx(I,{size:18})," Etiquetas"]}),p.jsxs(v,{variant:"secondary",onClick:()=>h(!0),children:[p.jsx(C,{size:18})," Excel/CSV"]}),p.jsxs(v,{variant:"secondary",onClick:()=>B(!0),children:[p.jsx(w,{size:18})," Importar NF-e"]}),p.jsxs(v,{onClick:()=>u(!0),children:[p.jsx(L,{size:18})," Novo Produto"]})]})]}),"LIST"===o?p.jsxs(O,{className:"overflow-hidden p-0",children:[p.jsx("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex gap-4",children:p.jsxs("div",{className:"relative flex-1 max-w-md",children:[p.jsx(T,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),p.jsx("input",{className:"w-full pl-10 pr-4 py-2 rounded-md border border-slate-300 text-sm focus:ring-2 focus:ring-brand-500 outline-none",placeholder:"Buscar por nome, EAN ou NCM..."})]})}),p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-sm text-left",children:[p.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-200",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3",children:"Código"}),p.jsx("th",{className:"px-6 py-3",children:"Produto"}),p.jsx("th",{className:"px-6 py-3",children:"NCM"}),p.jsx("th",{className:"px-6 py-3 text-right",children:"Estoque"}),p.jsx("th",{className:"px-6 py-3 text-right",children:"Custo"}),p.jsx("th",{className:"px-6 py-3 text-right",children:"Venda"}),p.jsx("th",{className:"px-6 py-3",children:"Status"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(e=>p.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[p.jsx("td",{className:"px-6 py-4 font-mono text-slate-500",children:e.code}),p.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:e.name}),p.jsx("td",{className:"px-6 py-4 text-slate-500",children:e.ncm}),p.jsxs("td",{className:"px-6 py-4 text-right font-bold "+(e.stock<=e.minStock?"text-red-600":"text-slate-700"),children:[e.stock," ",e.unit]}),p.jsx("td",{className:"px-6 py-4 text-right text-slate-500",children:b(e.cost)}),p.jsx("td",{className:"px-6 py-4 text-right text-slate-900",children:b(e.price)}),p.jsx("td",{className:"px-6 py-4",children:e.stock<=e.minStock?p.jsx(E,{color:"bg-red-100 text-red-700",children:"Crítico"}):p.jsx(E,{color:"bg-emerald-100 text-emerald-700",children:"Ok"})})]},e.id))})]})})]}):p.jsx(O,{className:"overflow-hidden p-0",children:p.jsx("div",{className:"overflow-x-auto",children:p.jsxs("table",{className:"w-full text-sm text-left",children:[p.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-200",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3",children:"Data/Hora"}),p.jsx("th",{className:"px-6 py-3",children:"Produto"}),p.jsx("th",{className:"px-6 py-3",children:"Tipo"}),p.jsx("th",{className:"px-6 py-3",children:"Doc Ref."}),p.jsx("th",{className:"px-6 py-3 text-right",children:"Qtd Mov."}),p.jsx("th",{className:"px-6 py-3 text-right",children:"Saldo Final"})]})}),p.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(t=>{var r;const n=(null==(r=e.find(e=>e.id===t.productId))?void 0:r.name)||t.productName||"Desconhecido",o=t.type===g.ENTRY||t.type===g.ADJUSTMENT&&t.quantity>0;return p.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[p.jsx("td",{className:"px-6 py-4 text-slate-500",children:new Date(t.date).toLocaleString()}),p.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:n}),p.jsx("td",{className:"px-6 py-4",children:p.jsxs("div",{className:"flex items-center gap-1 "+(o?"text-emerald-600":"text-red-600"),children:[o?p.jsx(G,{size:16}):p.jsx(z,{size:16}),p.jsx("span",{className:"font-bold",children:t.type})]})}),p.jsx("td",{className:"px-6 py-4 font-mono text-xs text-slate-500",children:t.documentRef||"-"}),p.jsxs("td",{className:"px-6 py-4 text-right font-bold "+(o?"text-emerald-600":"text-red-600"),children:[o?"+":"",t.quantity]}),p.jsx("td",{className:"px-6 py-4 text-right font-bold text-slate-900",children:t.balanceAfter})]},t.id)})})]})})}),d&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg p-6",children:[p.jsx("h3",{className:"text-xl font-bold mb-2",children:"Importar/Exportar Produtos"}),p.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Use planilhas (Excel/CSV) para gerenciar seu estoque em massa."}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[p.jsxs("h4",{className:"font-bold text-slate-700 mb-2 flex items-center gap-2",children:[p.jsx(U,{size:18})," Exportar Dados"]}),p.jsxs("div",{className:"flex gap-3",children:[p.jsx(v,{variant:"secondary",onClick:()=>{P.downloadTemplate()},className:"text-sm w-full",children:"Baixar Modelo em Branco"}),p.jsx(v,{variant:"secondary",onClick:()=>{P.exportProducts(e)},className:"text-sm w-full",children:"Exportar Estoque Atual"})]})]}),p.jsxs("div",{className:"p-4 bg-brand-50 rounded-lg border border-brand-200",children:[p.jsxs("h4",{className:"font-bold text-brand-800 mb-2 flex items-center gap-2",children:[p.jsx(D,{size:18})," Importar Planilha"]}),p.jsx("p",{className:"text-xs text-brand-600 mb-3",children:"Selecione o arquivo .csv preenchido conforme o modelo. Produtos com códigos existentes serão atualizados."}),p.jsx("input",{type:"file",accept:".csv",onChange:e=>c(null,null,function*(){var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){try{const e=yield P.parseCsv(r);e.length>0?$({isOpen:!0,title:"Importação de Dados",message:`Encontrados ${e.length} produtos. Deseja importar? \n(Códigos existentes serão atualizados)`,onConfirm:()=>c(null,null,function*(){const t=e.map(e=>l(s({},e),{id:e.id||crypto.randomUUID(),stock:e.stock||0}));try{yield y.saveProductsBatch(t),yield ce(),h(!1),Q("Importação concluída com sucesso!","Sucesso","success")}catch(r){Q(r.message||"Erro ao importar produtos.","Erro","error")}})}):Q("Nenhum produto válido encontrado no arquivo.","Erro","error")}catch(n){Q("Erro ao processar arquivo. Verifique o formato.","Erro","error")}e.target.value=""}}),className:"block w-full text-sm text-slate-500\r\n                                file:mr-4 file:py-2 file:px-4\r\n                                file:rounded-full file:border-0\r\n                                file:text-sm file:font-semibold\r\n                                file:bg-brand-100 file:text-brand-700\r\n                                hover:file:bg-brand-200\r\n                            "})]})]}),p.jsx("div",{className:"mt-6 flex justify-end",children:p.jsx(v,{onClick:()=>h(!1),children:"Fechar"})})]})}),x&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[p.jsxs("div",{className:"p-5 border-b border-slate-200 bg-slate-50 flex justify-between items-center shrink-0",children:[p.jsxs("div",{children:[p.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[p.jsx(I,{className:"text-brand-600"}),ne?"Pré-visualização de Impressão":"Gerador de Etiquetas"]}),p.jsx("p",{className:"text-xs text-slate-500",children:ne?"Verifique o layout antes de imprimir. Papel: 3 Colunas (33x21mm)":"Selecione os produtos para compor a fila de impressão."})]}),p.jsx("button",{onClick:()=>A(!1),className:"text-slate-400 hover:text-slate-600 transition p-2 hover:bg-slate-200 rounded-full",children:p.jsx(N,{size:24})})]}),p.jsx("div",{className:"flex-1 overflow-hidden relative",children:ne?p.jsxs("div",{className:"h-full flex flex-col bg-slate-200",children:[p.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center",children:p.jsxs("div",{className:"bg-white shadow-xl relative",style:{width:"105mm",minHeight:"100mm",paddingBottom:"20px"},children:[p.jsx("div",{className:"absolute top-0 left-0 bottom-0 w-[1px] bg-slate-100 border-l border-slate-200"}),p.jsx("div",{className:"absolute top-0 right-0 bottom-0 w-[1px] bg-slate-100 border-r border-slate-200"}),p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 33mm)",justifyContent:"start",padding:0,margin:0},children:fe.map((e,t)=>p.jsxs("div",{className:"relative border-b border-dashed border-slate-200 border-r",style:{width:"33mm",height:"21mm",padding:"1mm 2mm",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",overflow:"hidden"},children:[p.jsx("div",{className:"w-full text-center",children:p.jsx("p",{className:"text-[8px] font-bold leading-tight truncate w-full uppercase text-black",children:e.name.substring(0,18)})}),p.jsx("div",{className:"w-full text-center -mt-1",children:p.jsxs("p",{className:"text-[10px] font-black text-black",children:["R$ ",e.price.toFixed(2).replace(".",",")]})}),p.jsx("div",{className:"w-[95%] h-[12mm] flex items-center justify-center overflow-hidden",children:p.jsx(Pr,{value:e.code})})]},`${e.id}-${t}`))})]})}),p.jsxs("div",{className:"p-4 bg-white border-t border-slate-300 flex justify-between items-center z-20",children:[p.jsxs(v,{variant:"secondary",onClick:()=>oe(!1),className:"px-6",children:[p.jsx(F,{size:20})," Voltar e Editar"]}),p.jsxs("div",{className:"text-center text-sm text-slate-500",children:[p.jsxs("p",{className:"font-bold text-slate-700",children:[fe.length," Etiquetas"]}),p.jsxs("p",{children:["~",Math.ceil(fe.length/3)," Linhas de impressão"]})]}),p.jsxs(v,{onClick:()=>{window.print()},className:"px-8 py-3 bg-brand-700 hover:bg-brand-800 text-lg",children:[p.jsx(I,{size:20})," Imprimir Agora"]})]})]}):p.jsxs("div",{className:"flex h-full flex-col md:flex-row",children:[p.jsxs("div",{className:"w-full md:w-5/12 p-6 border-r border-slate-200 flex flex-col gap-6 bg-white z-10",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Adicionar à Fila"}),p.jsxs("div",{className:"flex gap-2 mb-2",children:[p.jsxs("div",{className:"w-24",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Qtd"}),p.jsx("input",{type:"number",min:"1",value:te,onChange:e=>re(parseInt(e.target.value)||1),className:"w-full p-3 border border-slate-300 rounded-lg text-center font-bold text-slate-800 focus:ring-2 focus:ring-brand-500 outline-none"})]}),p.jsxs("div",{className:"flex-1 relative",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Buscar Produto (Nome ou EAN)"}),p.jsxs("div",{className:"relative",children:[p.jsx(T,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),p.jsx("input",{value:Z,onChange:e=>ee(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 outline-none",placeholder:"Digite para buscar...",autoFocus:!0})]}),Z.length>0&&p.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-xl border border-slate-200 max-h-64 overflow-y-auto z-50",children:de.length>0?de.map(e=>p.jsxs("button",{onClick:()=>{return t=e,r=te,J(e=>{const n=e.findIndex(e=>e.product.id===t.id);if(n>=0){const t=[...e];return t[n].qty+=r,t}return[...e,{product:t,qty:r}]}),ee(""),void re(1);var t,r},className:"w-full text-left p-3 hover:bg-brand-50 border-b border-slate-50 last:border-none flex justify-between items-center transition group",children:[p.jsxs("div",{children:[p.jsx("p",{className:"font-bold text-sm text-slate-800 group-hover:text-brand-700",children:e.name}),p.jsxs("p",{className:"text-xs text-slate-400",children:[e.code," • ",b(e.price)]})]}),p.jsxs("div",{className:"flex items-center gap-2 text-brand-600 opacity-0 group-hover:opacity-100 transition",children:[p.jsxs("span",{className:"text-xs font-bold",children:["Adicionar ",te,"x"]}),p.jsx(L,{size:18})]})]},e.id)):p.jsx("div",{className:"p-4 text-center text-slate-400 text-sm",children:"Nenhum produto encontrado."})})]})]}),p.jsx("p",{className:"text-xs text-slate-400",children:"Dica: Defina a quantidade primeiro, depois busque e clique no produto."})]}),p.jsxs("div",{className:"bg-brand-50 p-4 rounded-xl border border-brand-100 flex-1 flex flex-col items-center justify-center text-brand-800 opacity-70",children:[p.jsx(q,{size:48,className:"mb-2"}),p.jsx("p",{className:"text-center text-sm font-medium",children:"Selecione produtos ao lado para montar sua fila de impressão."})]})]}),p.jsxs("div",{className:"w-full md:w-7/12 bg-slate-50 flex flex-col",children:[p.jsxs("div",{className:"p-4 bg-white border-b border-slate-200 flex justify-between items-center shadow-sm",children:[p.jsxs("h4",{className:"font-bold text-slate-700 flex items-center gap-2",children:[p.jsx("span",{className:"bg-slate-800 text-white text-xs px-2 py-0.5 rounded-full",children:Y.length}),"Itens na Fila"]}),p.jsx("button",{onClick:()=>J([]),className:"text-xs text-red-500 hover:text-red-700 hover:underline",children:"Limpar Fila"})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:0===Y.length?p.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[p.jsx(I,{size:48,className:"mb-4 opacity-20"}),p.jsx("p",{children:"Sua fila de impressão está vazia."})]}):Y.map(e=>p.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-slate-200 flex items-center justify-between group hover:border-brand-300 transition",children:[p.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[p.jsxs("div",{className:"w-8 h-8 bg-slate-100 rounded flex items-center justify-center text-slate-500 font-bold text-xs",children:[e.qty,"x"]}),p.jsxs("div",{className:"truncate",children:[p.jsx("p",{className:"font-bold text-sm text-slate-800 truncate",children:e.product.name}),p.jsx("p",{className:"text-[10px] text-slate-500 font-mono",children:e.product.code})]})]}),p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsxs("div",{className:"flex items-center border border-slate-200 rounded-md bg-slate-50",children:[p.jsx("button",{onClick:()=>ue(e.product.id,e.qty-1),className:"px-2 py-1 hover:bg-slate-200 text-slate-600",children:"-"}),p.jsx("input",{type:"number",min:"1",value:e.qty,onChange:t=>ue(e.product.id,parseInt(t.target.value)||1),className:"w-10 text-center bg-transparent text-sm font-bold outline-none"}),p.jsx("button",{onClick:()=>ue(e.product.id,e.qty+1),className:"px-2 py-1 hover:bg-slate-200 text-slate-600",children:"+"})]}),p.jsx("button",{onClick:()=>{return t=e.product.id,void J(e=>e.filter(e=>e.product.id!==t));var t},className:"text-slate-400 hover:text-red-500 p-1 rounded transition",children:p.jsx(M,{size:16})})]})]},e.product.id))}),p.jsxs("div",{className:"p-4 bg-white border-t border-slate-200",children:[p.jsxs("div",{className:"flex justify-between text-sm text-slate-600 mb-4 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[p.jsx("span",{children:"Total de Etiquetas:"}),p.jsx("span",{className:"font-bold text-lg text-brand-600",children:Y.reduce((e,t)=>e+t.qty,0)})]}),p.jsxs(v,{onClick:()=>oe(!0),disabled:0===Y.length,className:"w-full py-3 text-lg font-bold shadow-lg shadow-brand-200",children:[p.jsx(H,{size:20})," Pré-visualizar Impressão"]})]})]})]})})]})}),S.createPortal(p.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 33mm)",width:"105mm",justifyContent:"start",backgroundColor:"white"},children:fe.map((e,t)=>p.jsxs("div",{style:{width:"33mm",height:"21mm",padding:"1mm 2mm",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",overflow:"hidden",boxSizing:"border-box",textAlign:"center",color:"black",backgroundColor:"white"},children:[p.jsx("div",{className:"w-full text-center",children:p.jsx("p",{style:{fontSize:"8px",fontWeight:"bold",margin:0,color:"black"},children:e.name.substring(0,18).toUpperCase()})}),p.jsx("div",{className:"w-full text-center",children:p.jsxs("p",{style:{fontSize:"10px",fontWeight:"900",margin:0,color:"black"},children:["R$ ",e.price.toFixed(2).replace(".",",")]})}),p.jsx("div",{style:{width:"95%",height:"12mm",display:"flex",alignItems:"center",justifyContent:"center"},children:p.jsx(Pr,{value:e.code})})]},`${e.id}-${t}`))}),document.getElementById("printable-area")||document.body),i&&p.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:p.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[p.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between",children:[p.jsx("h3",{className:"text-xl font-bold",children:"Cadastro de Produto"}),p.jsx("button",{onClick:()=>u(!1),className:"text-slate-400 hover:text-slate-600",children:"✕"})]}),p.jsxs("div",{className:"p-6 space-y-4",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx(m,{label:"Código EAN/Barras",value:ae.code||"",onChange:e=>ie(l(s({},ae),{code:e.target.value})),placeholder:"789..."}),p.jsx(m,{label:"Nome do Produto",value:ae.name||"",onChange:e=>ie(l(s({},ae),{name:e.target.value}))})]}),p.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[p.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 flex items-center gap-1",children:[p.jsx(w,{size:14})," Dados Fiscais (NFC-e)"]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsx("div",{className:"flex justify-between items-end gap-2",children:p.jsx(m,{label:"NCM",value:ae.ncm||"",onChange:e=>ie(l(s({},ae),{ncm:e.target.value})),className:"flex-1"})}),p.jsx(m,{label:"CEST",value:ae.cest||"",onChange:e=>ie(l(s({},ae),{cest:e.target.value}))})]}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Origem da Mercadoria"}),p.jsxs("select",{className:"border border-slate-300 rounded-md p-2 text-sm bg-white",value:ae.origin,onChange:e=>ie(l(s({},ae),{origin:e.target.value})),children:[p.jsx("option",{value:"0",children:"0 - Nacional"}),p.jsx("option",{value:"1",children:"1 - Estrangeira (Imp. Direta)"}),p.jsx("option",{value:"2",children:"2 - Estrangeira (Adq. Mercado Interno)"}),p.jsxs("option",{value:"3",children:["3 - Nacional (Conteúdo Imp. ",">"," 40%)"]}),p.jsxs("option",{value:"5",children:["5 - Nacional (Conteúdo Imp. ","<="," 40%)"]})]})]}),p.jsxs("div",{className:"mt-2",children:[p.jsxs(v,{variant:"secondary",onClick:()=>c(null,null,function*(){if(ae.name&&ae.ncm){le("Analisando...");const e=yield k.auditProduct(ae.name,ae.ncm);le(e)}}),type:"button",className:"w-full text-xs py-1 h-8",children:[p.jsx(X,{size:14})," Auditar Dados Fiscais com IA"]}),se&&"string"==typeof se&&p.jsx("p",{className:"text-xs text-brand-600 mt-2 text-center",children:se}),se&&"object"==typeof se&&p.jsxs("div",{className:"mt-2 text-sm p-2 rounded "+(se.valid?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"),children:[p.jsx("span",{className:"font-bold",children:se.valid?"NCM Válido!":"Atenção: NCM pode estar incorreto."}),p.jsx("p",{className:"mt-1 text-xs",children:se.reason})]})]})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsx(m,{label:"Preço Custo",type:"number",value:ae.cost,onChange:e=>ie(l(s({},ae),{cost:parseFloat(e.target.value)}))}),p.jsx(m,{label:"Preço Venda",type:"number",value:ae.price,onChange:e=>ie(l(s({},ae),{price:parseFloat(e.target.value)}))}),p.jsx(m,{label:"Estoque Inicial",type:"number",value:ae.stock,onChange:e=>ie(l(s({},ae),{stock:parseFloat(e.target.value)}))})]}),p.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Unidade"}),p.jsxs("select",{className:"border border-slate-300 rounded-md p-2",value:ae.unit,onChange:e=>ie(l(s({},ae),{unit:e.target.value})),children:[p.jsx("option",{value:"UN",children:"UN - Unidade"}),p.jsx("option",{value:"KG",children:"KG - Quilograma"}),p.jsx("option",{value:"L",children:"L - Litro"}),p.jsx("option",{value:"CX",children:"CX - Caixa"})]})]}),p.jsx(m,{label:"Estoque Mínimo",type:"number",value:ae.minStock,onChange:e=>ie(l(s({},ae),{minStock:parseFloat(e.target.value)}))}),p.jsxs("div",{className:"flex flex-col gap-1",children:[p.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Grupo Tributário"}),p.jsxs("select",{className:"border border-slate-300 rounded-md p-2",value:ae.taxGroup,onChange:e=>ie(l(s({},ae),{taxGroup:e.target.value})),children:[p.jsx("option",{value:"A",children:"Grupo A - Tributado"}),p.jsx("option",{value:"B",children:"Grupo B - Isento"}),p.jsx("option",{value:"C",children:"Grupo C - Subst. Trib."})]})]})]})]}),p.jsxs("div",{className:"p-6 border-t border-slate-100 flex justify-end gap-3",children:[p.jsx(v,{variant:"secondary",onClick:()=>u(!1),children:"Cancelar"}),p.jsx(v,{onClick:()=>c(null,null,function*(){if(!ae.name||!ae.code)return;const e={id:crypto.randomUUID(),code:ae.code,name:ae.name,price:Number(ae.price||0),cost:Number(ae.cost||0),stock:Number(ae.stock||0),ncm:ae.ncm||"",cest:ae.cest||"",origin:ae.origin||"0",minStock:Number(ae.minStock||0),taxGroup:ae.taxGroup||"A",unit:ae.unit||"UN"};try{yield y.saveProduct(e),e.stock>0&&(yield y.updateStock(e.id,e.stock,g.ENTRY,"INIT","Estoque Inicial")),u(!1),ie({}),le(null),yield ce()}catch(t){Q(t.message||"Erro ao salvar produto.","Erro","error")}}),children:"Salvar Produto"})]})]})}),p.jsx(Cr,{isOpen:R,onClose:()=>B(!1),onSuccess:()=>{ce(),Q("Entrada de NF-e processada com sucesso!","Sucesso","success")}})]})};export{Sr as Inventory};
