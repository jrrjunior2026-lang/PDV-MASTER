var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,l=(t,s,n)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[s]=n,o=(e,t)=>{for(var s in t||(t={}))r.call(t,s)&&l(e,s,t[s]);if(n)for(var s of n(t))a.call(t,s)&&l(e,s,t[s]);return e},i=(e,n)=>t(e,s(n)),c=(e,t,s)=>new Promise((n,r)=>{var a=e=>{try{o(s.next(e))}catch(t){r(t)}},l=e=>{try{o(s.throw(e))}catch(t){r(t)}},o=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,l);o((s=s.apply(e,t)).next())});import{c as d,g as u,r as h,S as x,A as m,j as f,f as p,b as g,d as b,L as N,H as j,W as v,e as w,P as y,h as C,I as E,B as I,X as A,i as k,F as R,M as S}from"./index-CYX4AbMr.js";import{I as T,C as P}from"./image-CR8tJUAK.js";import{U as M}from"./user-jVPXLX5N.js";import{S as L}from"./search-CaOhx3f7.js";import{L as O}from"./lock-NqwC8KLE.js";import{C as F}from"./calendar-NBKDiix3.js";import{D as B}from"./dollar-sign-CQLbe4-m.js";import{T as D}from"./trending-up-BTZiMTIq.js";import{P as z}from"./printer-DTxGc6o4.js";
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=d("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),_=d("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),H=d("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),V=d("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),$=d("octagon-alert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),Y=d("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),K=d("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),q=d("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),J={generatePayload:(e,t,s,n,r)=>{const a=t.substring(0,25).toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),l=s.substring(0,15).toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),o=r.toFixed(2),i=(e,t)=>`${e}${t.length.toString().padStart(2,"0")}${t}`;let c=i("00","01");const d=i("00","br.gov.bcb.pix"),u=i("01",e);c+=i("26",d+u),c+=i("52","0000"),c+=i("53","986"),c+=i("54",o),c+=i("58","BR"),c+=i("59",a),c+=i("60",l);const h=i("05",n||"***");c+=i("62",h),c+="6304";return c+J.calculateCRC16(c)},calculateCRC16:e=>{let t=65535;for(let s=0;s<e.length;s++){t^=e.charCodeAt(s)<<8;for(let e=0;e<8;e++)32768&t?t=t<<1^4129:t<<=1}return(65535&t).toString(16).toUpperCase().padStart(4,"0")}};var Q,G,X={};var W,Z={},ee={};function te(){if(W)return ee;let e;W=1;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return ee.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},ee.getSymbolTotalCodewords=function(e){return t[e]},ee.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},ee.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');e=t},ee.isKanjiModeEnabled=function(){return void 0!==e},ee.toSJIS=function(t){return e(t)},ee}var se,ne,re,ae,le,oe={};function ie(){return se||(se=1,(e=oe).L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},e.from=function(t,s){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(n){return s}}),oe;var e}var ce,de={};var ue,he={};var xe,me={};var fe,pe={};function ge(){if(fe)return pe;fe=1;const e=ie(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return pe.getBlocksCount=function(s,n){switch(n){case e.L:return t[4*(s-1)+0];case e.M:return t[4*(s-1)+1];case e.Q:return t[4*(s-1)+2];case e.H:return t[4*(s-1)+3];default:return}},pe.getTotalCodewordsCount=function(t,n){switch(n){case e.L:return s[4*(t-1)+0];case e.M:return s[4*(t-1)+1];case e.Q:return s[4*(t-1)+2];case e.H:return s[4*(t-1)+3];default:return}},pe}var be,Ne,je,ve,we={},ye={};function Ce(){return Ne||(Ne=1,function(e){const t=function(){if(be)return ye;be=1;const e=new Uint8Array(512),t=new Uint8Array(256);return function(){let s=1;for(let n=0;n<255;n++)e[n]=s,t[s]=n,s<<=1,256&s&&(s^=285);for(let t=255;t<512;t++)e[t]=e[t-255]}(),ye.log=function(e){if(e<1)throw new Error("log("+e+")");return t[e]},ye.exp=function(t){return e[t]},ye.mul=function(s,n){return 0===s||0===n?0:e[t[s]+t[n]]},ye}();e.mul=function(e,s){const n=new Uint8Array(e.length+s.length-1);for(let r=0;r<e.length;r++)for(let a=0;a<s.length;a++)n[r+a]^=t.mul(e[r],s[a]);return n},e.mod=function(e,s){let n=new Uint8Array(e);for(;n.length-s.length>=0;){const e=n[0];for(let a=0;a<s.length;a++)n[a]^=t.mul(s[a],e);let r=0;for(;r<n.length&&0===n[r];)r++;n=n.slice(r)}return n},e.generateECPolynomial=function(s){let n=new Uint8Array([1]);for(let r=0;r<s;r++)n=e.mul(n,new Uint8Array([1,t.exp(r)]));return n}}(we)),we}var Ee,Ie={},Ae={},ke={};function Re(){return Ee||(Ee=1,ke.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),ke}var Se,Te,Pe,Me={};function Le(){if(Se)return Me;Se=1;const e="[0-9]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+")(?:.|[\r\n]))+";Me.KANJI=new RegExp(t,"g"),Me.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Me.BYTE=new RegExp(s,"g"),Me.NUMERIC=new RegExp(e,"g"),Me.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const n=new RegExp("^"+t+"$"),r=new RegExp("^"+e+"$"),a=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Me.testKanji=function(e){return n.test(e)},Me.testNumeric=function(e){return r.test(e)},Me.testAlphanumeric=function(e){return a.test(e)},Me}function Oe(){return Te||(Te=1,function(e){const t=Re(),s=Le();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(e,s){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!t.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?e.ccBits[0]:s<27?e.ccBits[1]:e.ccBits[2]},e.getBestModeForData=function(t){return s.testNumeric(t)?e.NUMERIC:s.testAlphanumeric(t)?e.ALPHANUMERIC:s.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},e.isValid=function(e){return e&&e.bit&&e.ccBits},e.from=function(t,s){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(n){return s}}}(Ae)),Ae}function Fe(){return Pe||(Pe=1,function(e){const t=te(),s=ge(),n=ie(),r=Oe(),a=Re(),l=t.getBCHDigit(7973);function o(e,t){return r.getCharCountIndicator(e,t)+4}function i(e,t){let s=0;return e.forEach(function(e){const n=o(e.mode,t);s+=n+e.getBitsLength()}),s}e.from=function(e,t){return a.isValid(e)?parseInt(e,10):t},e.getCapacity=function(e,n,l){if(!a.isValid(e))throw new Error("Invalid QR Code version");void 0===l&&(l=r.BYTE);const i=8*(t.getSymbolTotalCodewords(e)-s.getTotalCodewordsCount(e,n));if(l===r.MIXED)return i;const c=i-o(l,e);switch(l){case r.NUMERIC:return Math.floor(c/10*3);case r.ALPHANUMERIC:return Math.floor(c/11*2);case r.KANJI:return Math.floor(c/13);case r.BYTE:default:return Math.floor(c/8)}},e.getBestVersionForData=function(t,s){let a;const l=n.from(s,n.M);if(Array.isArray(t)){if(t.length>1)return function(t,s){for(let n=1;n<=40;n++)if(i(t,n)<=e.getCapacity(n,s,r.MIXED))return n}(t,l);if(0===t.length)return 1;a=t[0]}else a=t;return function(t,s,n){for(let r=1;r<=40;r++)if(s<=e.getCapacity(r,n,t))return r}(a.mode,a.getLength(),l)},e.getEncodedBits=function(e){if(!a.isValid(e)||e<7)throw new Error("Invalid QR Code version");let s=e<<12;for(;t.getBCHDigit(s)-l>=0;)s^=7973<<t.getBCHDigit(s)-l;return e<<12|s}}(Ie)),Ie}var Be,De={};var ze,Ue,_e,He,Ve,$e,Ye,Ke,qe,Je,Qe={};function Ge(){if(Ke)return Ye;Ke=1;const e=$e?Ve:($e=1,Ve=function(e){for(var t=[],s=e.length,n=0;n<s;n++){var r=e.charCodeAt(n);if(r>=55296&&r<=56319&&s>n+1){var a=e.charCodeAt(n+1);a>=56320&&a<=57343&&(r=1024*(r-55296)+a-56320+65536,n+=1)}r<128?t.push(r):r<2048?(t.push(r>>6|192),t.push(63&r|128)):r<55296||r>=57344&&r<65536?(t.push(r>>12|224),t.push(r>>6&63|128),t.push(63&r|128)):r>=65536&&r<=1114111?(t.push(r>>18|240),t.push(r>>12&63|128),t.push(r>>6&63|128),t.push(63&r|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}),t=Oe();function s(s){this.mode=t.BYTE,"string"==typeof s&&(s=e(s)),this.data=new Uint8Array(s)}return s.getBitsLength=function(e){return 8*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){for(let t=0,s=this.data.length;t<s;t++)e.put(this.data[t],8)},Ye=s}var Xe,We,Ze,et={exports:{}};function tt(){return We||(We=1,function(e){const t=Oe(),s=function(){if(Ue)return ze;Ue=1;const e=Oe();function t(t){this.mode=e.NUMERIC,this.data=t.toString()}return t.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){let t,s,n;for(t=0;t+3<=this.data.length;t+=3)s=this.data.substr(t,3),n=parseInt(s,10),e.put(n,10);const r=this.data.length-t;r>0&&(s=this.data.substr(t),n=parseInt(s,10),e.put(n,3*r+1))},ze=t}(),n=function(){if(He)return _e;He=1;const e=Oe(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(t){this.mode=e.ALPHANUMERIC,this.data=t}return s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let s;for(s=0;s+2<=this.data.length;s+=2){let n=45*t.indexOf(this.data[s]);n+=t.indexOf(this.data[s+1]),e.put(n,11)}this.data.length%2&&e.put(t.indexOf(this.data[s]),6)},_e=s}(),r=Ge(),a=function(){if(Je)return qe;Je=1;const e=Oe(),t=te();function s(t){this.mode=e.KANJI,this.data=t}return s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let s;for(s=0;s<this.data.length;s++){let n=t.toSJIS(this.data[s]);if(n>=33088&&n<=40956)n-=33088;else{if(!(n>=57408&&n<=60351))throw new Error("Invalid SJIS character: "+this.data[s]+"\nMake sure your charset is UTF-8");n-=49472}n=192*(n>>>8&255)+(255&n),e.put(n,13)}},qe=s}(),l=Le(),o=te(),i=function(){return Xe?et.exports:(Xe=1,et.exports=e={single_source_shortest_paths:function(t,s,n){var r={},a={};a[s]=0;var l,o,i,c,d,u,h,x=e.PriorityQueue.make();for(x.push(s,0);!x.empty();)for(i in o=(l=x.pop()).value,c=l.cost,d=t[o]||{})d.hasOwnProperty(i)&&(u=c+d[i],h=a[i],(void 0===a[i]||h>u)&&(a[i]=u,x.push(i,u),r[i]=o));if(void 0!==n&&void 0===a[n]){var m=["Could not find a path from ",s," to ",n,"."].join("");throw new Error(m)}return r},extract_shortest_path_from_predecessor_list:function(e,t){for(var s=[],n=t;n;)s.push(n),e[n],n=e[n];return s.reverse(),s},find_path:function(t,s,n){var r=e.single_source_shortest_paths(t,s,n);return e.extract_shortest_path_from_predecessor_list(r,n)},PriorityQueue:{make:function(t){var s,n=e.PriorityQueue,r={};for(s in t=t||{},n)n.hasOwnProperty(s)&&(r[s]=n[s]);return r.queue=[],r.sorter=t.sorter||n.default_sorter,r},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var s={value:e,cost:t};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}});var e}();function c(e){return unescape(encodeURIComponent(e)).length}function d(e,t,s){const n=[];let r;for(;null!==(r=e.exec(s));)n.push({data:r[0],index:r.index,mode:t,length:r[0].length});return n}function u(e){const s=d(l.NUMERIC,t.NUMERIC,e),n=d(l.ALPHANUMERIC,t.ALPHANUMERIC,e);let r,a;o.isKanjiModeEnabled()?(r=d(l.BYTE,t.BYTE,e),a=d(l.KANJI,t.KANJI,e)):(r=d(l.BYTE_KANJI,t.BYTE,e),a=[]);return s.concat(n,r,a).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function h(e,l){switch(l){case t.NUMERIC:return s.getBitsLength(e);case t.ALPHANUMERIC:return n.getBitsLength(e);case t.KANJI:return a.getBitsLength(e);case t.BYTE:return r.getBitsLength(e)}}function x(e,l){let i;const c=t.getBestModeForData(e);if(i=t.from(l,c),i!==t.BYTE&&i.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+t.toString(i)+".\n Suggested mode is: "+t.toString(c));switch(i!==t.KANJI||o.isKanjiModeEnabled()||(i=t.BYTE),i){case t.NUMERIC:return new s(e);case t.ALPHANUMERIC:return new n(e);case t.KANJI:return new a(e);case t.BYTE:return new r(e)}}e.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(x(t,null)):t.data&&e.push(x(t.data,t.mode)),e},[])},e.fromString=function(s,n){const r=function(e){const s=[];for(let n=0;n<e.length;n++){const r=e[n];switch(r.mode){case t.NUMERIC:s.push([r,{data:r.data,mode:t.ALPHANUMERIC,length:r.length},{data:r.data,mode:t.BYTE,length:r.length}]);break;case t.ALPHANUMERIC:s.push([r,{data:r.data,mode:t.BYTE,length:r.length}]);break;case t.KANJI:s.push([r,{data:r.data,mode:t.BYTE,length:c(r.data)}]);break;case t.BYTE:s.push([{data:r.data,mode:t.BYTE,length:c(r.data)}])}}return s}(u(s,o.isKanjiModeEnabled())),a=function(e,s){const n={},r={start:{}};let a=["start"];for(let l=0;l<e.length;l++){const o=e[l],i=[];for(let e=0;e<o.length;e++){const c=o[e],d=""+l+e;i.push(d),n[d]={node:c,lastCount:0},r[d]={};for(let e=0;e<a.length;e++){const l=a[e];n[l]&&n[l].node.mode===c.mode?(r[l][d]=h(n[l].lastCount+c.length,c.mode)-h(n[l].lastCount,c.mode),n[l].lastCount+=c.length):(n[l]&&(n[l].lastCount=c.length),r[l][d]=h(c.length,c.mode)+4+t.getCharCountIndicator(c.mode,s))}}a=i}for(let t=0;t<a.length;t++)r[a[t]].end=0;return{map:r,table:n}}(r,n),l=i.find_path(a.map,"start","end"),d=[];for(let e=1;e<l.length-1;e++)d.push(a.table[l[e]].node);return e.fromArray(function(e){return e.reduce(function(e,t){const s=e.length-1>=0?e[e.length-1]:null;return s&&s.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(d))},e.rawSplit=function(t){return e.fromArray(u(t,o.isKanjiModeEnabled()))}}(Qe)),Qe}function st(){if(Ze)return Z;Ze=1;const e=te(),t=ie(),s=function(){if(re)return ne;function e(){this.buffer=[],this.length=0}return re=1,e.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let s=0;s<t;s++)this.putBit(1==(e>>>t-s-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},ne=e}(),n=function(){if(le)return ae;function e(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return le=1,e.prototype.set=function(e,t,s,n){const r=e*this.size+t;this.data[r]=s,n&&(this.reservedBit[r]=!0)},e.prototype.get=function(e,t){return this.data[e*this.size+t]},e.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s},e.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},ae=e}(),r=(ce||(ce=1,function(e){const t=te().getSymbolSize;e.getRowColCoords=function(e){if(1===e)return[];const s=Math.floor(e/7)+2,n=t(e),r=145===n?26:2*Math.ceil((n-13)/(2*s-2)),a=[n-7];for(let t=1;t<s-1;t++)a[t]=a[t-1]-r;return a.push(6),a.reverse()},e.getPositions=function(t){const s=[],n=e.getRowColCoords(t),r=n.length;for(let e=0;e<r;e++)for(let t=0;t<r;t++)0===e&&0===t||0===e&&t===r-1||e===r-1&&0===t||s.push([n[e],n[t]]);return s}}(de)),de),a=function(){if(ue)return he;ue=1;const e=te().getSymbolSize;return he.getPositions=function(t){const s=e(t);return[[0,0],[s-7,0],[0,s-7]]},he}(),l=(xe||(xe=1,function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t=3,s=3,n=40,r=10;function a(t,s,n){switch(t){case e.Patterns.PATTERN000:return(s+n)%2==0;case e.Patterns.PATTERN001:return s%2==0;case e.Patterns.PATTERN010:return n%3==0;case e.Patterns.PATTERN011:return(s+n)%3==0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(n/3))%2==0;case e.Patterns.PATTERN101:return s*n%2+s*n%3==0;case e.Patterns.PATTERN110:return(s*n%2+s*n%3)%2==0;case e.Patterns.PATTERN111:return(s*n%3+(s+n)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(e){const s=e.size;let n=0,r=0,a=0,l=null,o=null;for(let i=0;i<s;i++){r=a=0,l=o=null;for(let c=0;c<s;c++){let s=e.get(i,c);s===l?r++:(r>=5&&(n+=t+(r-5)),l=s,r=1),s=e.get(c,i),s===o?a++:(a>=5&&(n+=t+(a-5)),o=s,a=1)}r>=5&&(n+=t+(r-5)),a>=5&&(n+=t+(a-5))}return n},e.getPenaltyN2=function(e){const t=e.size;let n=0;for(let s=0;s<t-1;s++)for(let r=0;r<t-1;r++){const t=e.get(s,r)+e.get(s,r+1)+e.get(s+1,r)+e.get(s+1,r+1);4!==t&&0!==t||n++}return n*s},e.getPenaltyN3=function(e){const t=e.size;let s=0,r=0,a=0;for(let n=0;n<t;n++){r=a=0;for(let l=0;l<t;l++)r=r<<1&2047|e.get(n,l),l>=10&&(1488===r||93===r)&&s++,a=a<<1&2047|e.get(l,n),l>=10&&(1488===a||93===a)&&s++}return s*n},e.getPenaltyN4=function(e){let t=0;const s=e.data.length;for(let n=0;n<s;n++)t+=e.data[n];return Math.abs(Math.ceil(100*t/s/5)-10)*r},e.applyMask=function(e,t){const s=t.size;for(let n=0;n<s;n++)for(let r=0;r<s;r++)t.isReserved(r,n)||t.xor(r,n,a(e,r,n))},e.getBestMask=function(t,s){const n=Object.keys(e.Patterns).length;let r=0,a=1/0;for(let l=0;l<n;l++){s(l),e.applyMask(l,t);const n=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(l,t),n<a&&(a=n,r=l)}return r}}(me)),me),o=ge(),i=function(){if(ve)return je;ve=1;const e=Ce();function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(t){this.degree=t,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(t.length+this.degree);s.set(t);const n=e.mod(s,this.genPoly),r=this.degree-n.length;if(r>0){const e=new Uint8Array(this.degree);return e.set(n,r),e}return n},je=t}(),c=Fe(),d=function(){if(Be)return De;Be=1;const e=te(),t=e.getBCHDigit(1335);return De.getEncodedBits=function(s,n){const r=s.bit<<3|n;let a=r<<10;for(;e.getBCHDigit(a)-t>=0;)a^=1335<<e.getBCHDigit(a)-t;return 21522^(r<<10|a)},De}(),u=Oe(),h=tt();function x(e,t,s){const n=e.size,r=d.getEncodedBits(t,s);let a,l;for(a=0;a<15;a++)l=1==(r>>a&1),a<6?e.set(a,8,l,!0):a<8?e.set(a+1,8,l,!0):e.set(n-15+a,8,l,!0),a<8?e.set(8,n-a-1,l,!0):a<9?e.set(8,15-a-1+1,l,!0):e.set(8,15-a-1,l,!0);e.set(n-8,8,1,!0)}function m(t,n,r){const a=new s;r.forEach(function(e){a.put(e.mode.bit,4),a.put(e.getLength(),u.getCharCountIndicator(e.mode,t)),e.write(a)});const l=8*(e.getSymbolTotalCodewords(t)-o.getTotalCodewordsCount(t,n));for(a.getLengthInBits()+4<=l&&a.put(0,4);a.getLengthInBits()%8!=0;)a.putBit(0);const c=(l-a.getLengthInBits())/8;for(let e=0;e<c;e++)a.put(e%2?17:236,8);return function(t,s,n){const r=e.getSymbolTotalCodewords(s),a=o.getTotalCodewordsCount(s,n),l=r-a,c=o.getBlocksCount(s,n),d=r%c,u=c-d,h=Math.floor(r/c),x=Math.floor(l/c),m=x+1,f=h-x,p=new i(f);let g=0;const b=new Array(c),N=new Array(c);let j=0;const v=new Uint8Array(t.buffer);for(let e=0;e<c;e++){const t=e<u?x:m;b[e]=v.slice(g,g+t),N[e]=p.encode(b[e]),g+=t,j=Math.max(j,t)}const w=new Uint8Array(r);let y,C,E=0;for(y=0;y<j;y++)for(C=0;C<c;C++)y<b[C].length&&(w[E++]=b[C][y]);for(y=0;y<f;y++)for(C=0;C<c;C++)w[E++]=N[C][y];return w}(a,t,n)}function f(t,s,o,i){let d;if(Array.isArray(t))d=h.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let e=s;if(!e){const s=h.rawSplit(t);e=c.getBestVersionForData(s,o)}d=h.fromString(t,e||40)}}const u=c.getBestVersionForData(d,o);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(s){if(s<u)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+u+".\n")}else s=u;const f=m(s,o,d),p=e.getSymbolSize(s),g=new n(p);return function(e,t){const s=e.size,n=a.getPositions(t);for(let r=0;r<n.length;r++){const t=n[r][0],a=n[r][1];for(let n=-1;n<=7;n++)if(!(t+n<=-1||s<=t+n))for(let r=-1;r<=7;r++)a+r<=-1||s<=a+r||(n>=0&&n<=6&&(0===r||6===r)||r>=0&&r<=6&&(0===n||6===n)||n>=2&&n<=4&&r>=2&&r<=4?e.set(t+n,a+r,!0,!0):e.set(t+n,a+r,!1,!0))}}(g,s),function(e){const t=e.size;for(let s=8;s<t-8;s++){const t=s%2==0;e.set(s,6,t,!0),e.set(6,s,t,!0)}}(g),function(e,t){const s=r.getPositions(t);for(let n=0;n<s.length;n++){const t=s[n][0],r=s[n][1];for(let s=-2;s<=2;s++)for(let n=-2;n<=2;n++)-2===s||2===s||-2===n||2===n||0===s&&0===n?e.set(t+s,r+n,!0,!0):e.set(t+s,r+n,!1,!0)}}(g,s),x(g,o,0),s>=7&&function(e,t){const s=e.size,n=c.getEncodedBits(t);let r,a,l;for(let o=0;o<18;o++)r=Math.floor(o/3),a=o%3+s-8-3,l=1==(n>>o&1),e.set(r,a,l,!0),e.set(a,r,l,!0)}(g,s),function(e,t){const s=e.size;let n=-1,r=s-1,a=7,l=0;for(let o=s-1;o>0;o-=2)for(6===o&&o--;;){for(let s=0;s<2;s++)if(!e.isReserved(r,o-s)){let n=!1;l<t.length&&(n=1==(t[l]>>>a&1)),e.set(r,o-s,n),a--,-1===a&&(l++,a=7)}if(r+=n,r<0||s<=r){r-=n,n=-n;break}}}(g,f),isNaN(i)&&(i=l.getBestMask(g,x.bind(null,g,o))),l.applyMask(i,g),x(g,o,i),{modules:g,version:s,errorCorrectionLevel:o,maskPattern:i,segments:d}}return Z.create=function(s,n){if(void 0===s||""===s)throw new Error("No input text");let r,a,o=t.M;return void 0!==n&&(o=t.from(n.errorCorrectionLevel,t.M),r=c.from(n.version),a=l.from(n.maskPattern),n.toSJISFunc&&e.setToSJISFunction(n.toSJISFunc)),f(s,r,o,a)},Z}var nt,rt,at={},lt={};function ot(){return nt||(nt=1,function(e){function t(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const s=parseInt(t.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:255&s,hex:"#"+t.slice(0,6).join("")}}e.getOptions=function(e){e||(e={}),e.color||(e.color={});const s=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,n=e.width&&e.width>=21?e.width:void 0,r=e.scale||4;return{width:n,scale:n?4:r,margin:s,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},e.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},e.getImageWidth=function(t,s){const n=e.getScale(t,s);return Math.floor((t+2*s.margin)*n)},e.qrToImageData=function(t,s,n){const r=s.modules.size,a=s.modules.data,l=e.getScale(r,n),o=Math.floor((r+2*n.margin)*l),i=n.margin*l,c=[n.color.light,n.color.dark];for(let e=0;e<o;e++)for(let s=0;s<o;s++){let d=4*(e*o+s),u=n.color.light;if(e>=i&&s>=i&&e<o-i&&s<o-i){u=c[a[Math.floor((e-i)/l)*r+Math.floor((s-i)/l)]?1:0]}t[d++]=u.r,t[d++]=u.g,t[d++]=u.b,t[d]=u.a}}}(lt)),lt}function it(){return rt||(rt=1,function(e){const t=ot();e.render=function(e,s,n){let r=n,a=s;void 0!==r||s&&s.getContext||(r=s,s=void 0),s||(a=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),r=t.getOptions(r);const l=t.getImageWidth(e.modules.size,r),o=a.getContext("2d"),i=o.createImageData(l,l);return t.qrToImageData(i.data,e,r),function(e,t,s){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=s,t.width=s,t.style.height=s+"px",t.style.width=s+"px"}(o,a,l),o.putImageData(i,0,0),a},e.renderToDataURL=function(t,s,n){let r=n;void 0!==r||s&&s.getContext||(r=s,s=void 0),r||(r={});const a=e.render(t,s,r),l=r.type||"image/png",o=r.rendererOpts||{};return a.toDataURL(l,o.quality)}}(at)),at}var ct,dt,ut={};function ht(){if(ct)return ut;ct=1;const e=ot();function t(e,t){const s=e.a/255,n=t+'="'+e.hex+'"';return s<1?n+" "+t+'-opacity="'+s.toFixed(2).slice(1)+'"':n}function s(e,t,s){let n=e+t;return void 0!==s&&(n+=" "+s),n}return ut.render=function(n,r,a){const l=e.getOptions(r),o=n.modules.size,i=n.modules.data,c=o+2*l.margin,d=l.color.light.a?"<path "+t(l.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",u="<path "+t(l.color.dark,"stroke")+' d="'+function(e,t,n){let r="",a=0,l=!1,o=0;for(let i=0;i<e.length;i++){const c=Math.floor(i%t),d=Math.floor(i/t);c||l||(l=!0),e[i]?(o++,i>0&&c>0&&e[i-1]||(r+=l?s("M",c+n,.5+d+n):s("m",a,0),a=0,l=!1),c+1<t&&e[i+1]||(r+=s("h",o),o=0)):a++}return r}(i,o,l.margin)+'"/>',h='viewBox="0 0 '+c+" "+c+'"',x='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+h+' shape-rendering="crispEdges">'+d+u+"</svg>\n";return"function"==typeof a&&a(null,x),x},ut}const xt=u(function(){if(dt)return X;dt=1;const e=G?Q:(G=1,Q=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}),t=st(),s=it(),n=ht();function r(s,n,r,a,l){const o=[].slice.call(arguments,1),i=o.length,c="function"==typeof o[i-1];if(!c&&!e())throw new Error("Callback required as last argument");if(!c){if(i<1)throw new Error("Too few arguments provided");return 1===i?(r=n,n=a=void 0):2!==i||n.getContext||(a=r,r=n,n=void 0),new Promise(function(e,l){try{const l=t.create(r,a);e(s(l,n,a))}catch(o){l(o)}})}if(i<2)throw new Error("Too few arguments provided");2===i?(l=r,r=n,n=a=void 0):3===i&&(n.getContext&&void 0===l?(l=a,a=void 0):(l=a,a=r,r=n,n=void 0));try{const e=t.create(r,a);l(null,s(e,n,a))}catch(d){l(d)}}return X.create=t.create,X.toCanvas=r.bind(null,s.render),X.toDataURL=r.bind(null,s.renderToDataURL),X.toString=r.bind(null,function(e,t,s){return n.render(e,s)}),X}()),mt=({cart:e,cartEndRef:t,logoUrl:s})=>f.jsxs("div",{className:"w-full md:w-1/2 bg-white flex flex-col border-r border-slate-300 relative shadow-lg z-20",children:[f.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-0 overflow-hidden p-10",children:s?f.jsx("img",{src:s,alt:"Logo",className:"object-contain transition-all duration-500 ease-in-out "+(0===e.length?"opacity-100 w-full max-h-[70%]":"opacity-5 w-2/3 max-h-[60%] grayscale")}):f.jsx("div",{className:"transition-all duration-500 "+(0===e.length?"opacity-100":"opacity-5"),children:f.jsx("div",{className:"w-64 h-64 bg-slate-100 rounded-full flex items-center justify-center text-slate-300",children:f.jsx(T,{size:120})})})}),0===e.length&&f.jsx("div",{className:"absolute inset-0 z-10 flex items-end justify-center pb-20 pointer-events-none",children:f.jsx("h1",{className:"text-4xl md:text-5xl font-black text-slate-300 uppercase tracking-widest drop-shadow-md",children:"Caixa Livre"})}),f.jsx("div",{className:"absolute inset-0 z-10 flex flex-col overflow-hidden min-h-0",children:e.length>0&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-12 text-xs font-bold text-slate-500 border-b border-slate-200 py-3 px-4 bg-white/95 backdrop-blur-sm uppercase shadow-sm shrink-0 z-30",children:[f.jsx("div",{className:"col-span-1",children:"#"}),f.jsx("div",{className:"col-span-7",children:"Descrição"}),f.jsx("div",{className:"col-span-4 text-right",children:"Total"})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-4 space-y-4 min-h-0",children:[e.map((e,t)=>f.jsxs("div",{className:"grid grid-cols-12 items-start py-2 border-b border-dashed border-slate-300/50 last:border-0 relative",children:[f.jsx("div",{className:"col-span-1 text-slate-400 text-sm mt-1 font-mono",children:t+1}),f.jsxs("div",{className:"col-span-7 pr-2",children:[f.jsx("div",{className:"text-lg font-bold leading-tight text-slate-800 uppercase drop-shadow-sm break-words",children:e.name}),f.jsxs("div",{className:"text-xs text-slate-600 mt-1 font-medium",children:[e.qty," ",e.unit," x ",p(e.price)," (",e.code,")"]})]}),f.jsx("div",{className:"col-span-4 text-right font-bold text-lg text-slate-900 mt-1",children:p(e.total)})]},e.id)),f.jsx("div",{ref:t,className:"h-4"})]}),f.jsx("div",{className:"p-4 bg-slate-100/90 border-t border-slate-200 backdrop-blur-sm mt-auto shrink-0 z-30",children:f.jsxs("div",{className:"flex justify-between items-center text-slate-600 font-bold text-lg",children:[f.jsx("span",{children:"ITENS"}),f.jsx("span",{children:e.length})]})})]})})]}),ft=()=>{var e,t,s,n,r,a,l,d,u,T,Q,G;const[X,W]=h.useState([]),[Z,ee]=h.useState([]),[te,se]=h.useState(""),[ne,re]=h.useState([]),[ae,le]=h.useState(!1),[oe,ie]=h.useState(!1),[ce,de]=h.useState(null),[ue,he]=h.useState(null),xe=(()=>{const[e,t]=h.useState([]),s=h.useRef(null),n=h.useMemo(()=>e.reduce((e,t)=>e+t.total,0),[e]);h.useEffect(()=>{var t;e.length>0&&(null==(t=s.current)||t.scrollIntoView({behavior:"smooth"}))},[e]);const r=h.useCallback(e=>{t(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?i(o({},t),{qty:t.qty+1,total:(t.qty+1)*t.price}):t):[...t,i(o({},e),{qty:1,total:e.price})])},[]),a=h.useCallback((e,s)=>{t(t=>t.map(t=>t.id===e?s<=0?null:i(o({},t),{qty:s,total:s*t.price}):t).filter(e=>null!==e))},[]),l=h.useCallback(()=>{t(e=>e.slice(0,-1))},[]),c=h.useCallback(()=>{t([])},[]);return{cart:e,cartEndRef:s,total:n,addToCart:r,updateItemQuantity:a,removeLastItem:l,clearCart:c}})(),me=(()=>{const[e,t]=h.useState(null),[s,n]=h.useState(null),[r,a]=h.useState("NONE"),[l,o]=h.useState(""),[i,d]=h.useState(""),[u,f]=h.useState(""),[p,g]=h.useState(null),[b,N]=h.useState(""),[j,v]=h.useState(null);h.useEffect(()=>{c(null,null,function*(){const e=x.getCurrentUser();if(!e)return;const s=yield x.getCurrentRegister(e.id);if(t(s),!s){const e=yield x.getLastClosedRegister();n(e),a("OPEN_BOX")}})},[]);const w=h.useCallback(()=>c(null,null,function*(){const e=parseFloat(l.replace(",","."));if(isNaN(e))return;const s=x.getCurrentUser();if(!s)return void console.error("No user logged in");const n=yield x.openRegister(e,s.id);t(n),a("NONE"),o("")}),[l]),y=h.useCallback(s=>c(null,null,function*(){const n=parseFloat(i.replace(",","."));if(isNaN(n)||!u)return;if(!e)return;x.addCashTransaction({id:crypto.randomUUID(),registerId:e.id,type:s,amount:n,description:u,date:(new Date).toISOString()}),m.log("CASH_OPERATION",`${"BLEED"===s?"Sangria":"Suprimento"}: ${n.toFixed(2)}. Motivo: ${u}`,"BLEED"===s?"WARNING":"INFO");const r=x.getCurrentUser();if(r){const e=yield x.getCurrentRegister(r.id);t(e)}a("NONE"),d(""),f("")}),[i,u,e]),C=h.useCallback(()=>c(null,null,function*(){if(!e)return;const t=yield x.getRegisterSummary(e.id);g(t),N(""),a("CLOSE_BOX")}),[e]),E=h.useCallback(()=>c(null,null,function*(){if(!e)return null;const s=parseFloat(b.replace(",","."));if(isNaN(s))return null;yield x.closeRegister(e.id,s);const n=yield x.getLastClosedRegister();return n&&(v(n),t(null),a("NONE")),n}),[b,e]);return{register:e,lastClosedRegister:s,modal:r,openingBalance:l,transactionAmount:i,transactionReason:u,closingSummary:p,closingCount:b,closedRegisterData:j,setModal:a,setOpeningBalance:o,setTransactionAmount:d,setTransactionReason:f,setClosingCount:N,openRegister:w,addCashTransaction:y,initiateCloseRegister:C,executeCloseRegister:E,resetAndPrepareForNewRegister:()=>{v(null);const e=x.getLastClosedRegister();n(e),a("OPEN_BOX")}}})(),[fe,pe]=h.useState("NONE"),[ge,be]=h.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[Ne,je]=h.useState({isOpen:!1,title:"",message:"",type:"info"}),ve=(e,t="Atenção",s="info")=>{je({isOpen:!0,message:e,title:t,type:s})},[we,ye]=h.useState("METHODS"),[Ce,Ee]=h.useState(""),[Ie,Ae]=h.useState(null),[ke,Re]=h.useState(null),[Se,Te]=h.useState(""),[Pe,Me]=h.useState("NFCE"),[Le,Oe]=h.useState("SALE"),Fe=h.useRef(null),Be=h.useRef(null);h.useEffect(()=>{var e;c(null,null,function*(){const[e,t,s]=yield Promise.all([x.getProducts(),x.getCustomers(),x.getSettings()]);W(e),ee(t),he(s)}),"NONE"===me.modal&&(null==(e=Fe.current)||e.focus());const t=setInterval(()=>{le(Math.random()>.95)},5e3);return()=>clearInterval(t)},[me.modal]),h.useEffect(()=>{var e;"PAYMENT"===fe&&"CASH"===we&&(null==(e=Be.current)||e.focus())},[fe,we]),h.useEffect(()=>{if("PRINT_RECEIPT"===fe&&ke&&"SALE"===Le){const e=`http://www.sefaz.gov.br/nfce/qrcode?p=${ke.accessKey}|2|1|1|${ke.total.toFixed(2).replace(".","")}|${ke.date}`;xt.toDataURL(e,{width:150,margin:0}).then(Te)}},[fe,ke,Le]);const De=(e,t)=>c(null,null,function*(){if(0===xe.cart.length)return;const s=x.getCurrentUser();if(!s)return void ve("Usuário não autenticado","Erro","error");if(!me.register)return void ve("Caixa não está aberto","Erro","error");ie(!0);const n=`352410${Math.floor(1e14*Math.random())}550010000000011000000001`,r=yield x.createSale({id:crypto.randomUUID(),date:(new Date).toISOString(),items:xe.cart,total:xe.total,subtotal:xe.total,discount:0,paymentMethod:e,fiscalStatus:ae?"OFFLINE":"AUTHORIZED",operatorId:s.id,registerId:me.register.id,accessKey:n,customerId:null==ce?void 0:ce.id,amountPaid:null==t?void 0:t.paid,change:null==t?void 0:t.change});r&&(Re(r),xe.clearCart(),de(null),ie(!1),Oe("SALE"),ye("METHODS"),Ee(""),pe("PRINT_RECEIPT"),Ae(null),Me("NFCE"))}),ze=()=>{me.executeCloseRegister()?(Oe("CLOSING"),pe("PRINT_RECEIPT")):ve("Informe o valor contado na gaveta.")};h.useEffect(()=>{const e=e=>{var t,s;if("NONE"===me.modal&&"NONE"===fe&&!ge.isOpen&&!Ne.isOpen)switch(e.key){case"F1":e.preventDefault(),null==(t=Fe.current)||t.focus();break;case"F2":e.preventDefault(),pe("CUSTOMER");break;case"F5":e.preventDefault(),xe.cart.length>0&&(ye("METHODS"),Ee(""),pe("PAYMENT"));break;case"F8":e.preventDefault(),(()=>{if(xe.cart.length>0){const e=xe.cart[xe.cart.length-1];be({isOpen:!0,title:"Cancelar Item",message:`Deseja remover o item "${e.name}" do carrinho?`,variant:"danger",onConfirm:()=>{m.log("ITEM_CANCEL",`Cancelou item: ${e.name} (R$ ${e.total.toFixed(2)})`,"WARNING"),xe.removeLastItem()}})}})();break;case"F10":e.preventDefault(),pe("MENU");break;case"Escape":e.preventDefault(),ne.length>0?re([]):null==(s=Fe.current)||s.focus()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[fe,me.modal,xe.cart.length,ne,ge.isOpen,Ne.isOpen]);const Ue=xe.cart[xe.cart.length-1],_e=parseFloat(Ce.replace(",","."))-xe.total;return ue?f.jsxs("div",{className:"h-full flex flex-col bg-slate-900 text-slate-800 font-sans overflow-hidden",children:[f.jsx(g,{isOpen:ge.isOpen,onClose:()=>be(e=>i(o({},e),{isOpen:!1})),onConfirm:ge.onConfirm,title:ge.title,message:ge.message,variant:ge.variant}),f.jsx(b,{isOpen:Ne.isOpen,onClose:()=>je(e=>i(o({},e),{isOpen:!1})),title:Ne.title,message:Ne.message,type:Ne.type}),f.jsxs("header",{className:"h-12 bg-blue-950 flex items-center justify-between px-4 shrink-0 z-30 shadow-md border-b border-blue-900",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx(N,{to:"/",className:"text-blue-200 hover:text-white transition",children:f.jsx(j,{size:18})}),f.jsx("div",{className:"h-4 w-[1px] bg-blue-800"}),f.jsx("h1",{className:"font-bold text-sm tracking-wide text-blue-100 uppercase",children:(null==(e=null==ue?void 0:ue.company)?void 0:e.fantasyName)||"PDV MASTER"})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2 px-2 py-0.5 rounded text-[10px] font-bold uppercase "+(ae?"bg-red-900 text-red-200":"bg-emerald-900 text-emerald-200"),children:[ae?f.jsx(v,{size:10}):f.jsx(w,{size:10}),ae?"OFFLINE":"ONLINE"]}),f.jsxs("div",{className:"text-xs text-blue-200 font-mono",children:["CAIXA: ",(null==(t=me.register)?void 0:t.id.slice(0,4))||"FECHADO"," | OP: ADMIN"]})]})]}),f.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[f.jsx(mt,{cart:xe.cart,cartEndRef:xe.cartEndRef,logoUrl:null==(s=null==ue?void 0:ue.appearance)?void 0:s.logoUrl}),f.jsxs("div",{className:"w-full md:w-1/2 flex flex-col bg-slate-50 relative border-l border-slate-300",children:[f.jsxs("div",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-6 z-10 shadow-sm shrink-0",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-full "+(ce?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-400"),children:f.jsx(M,{size:24})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] font-bold uppercase text-slate-400",children:"Cliente Identificado"}),f.jsx("p",{className:"font-bold text-lg leading-none truncate max-w-[200px] "+(ce?"text-blue-800":"text-slate-500"),children:ce?ce.name:"CONSUMIDOR FINAL"})]})]}),f.jsx("button",{onClick:()=>pe("CUSTOMER"),className:"px-4 py-2 bg-slate-100 hover:bg-blue-50 text-blue-600 rounded text-xs font-bold uppercase transition border border-slate-200 hover:border-blue-200 whitespace-nowrap",children:"Trocar (F2)"})]}),f.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center p-8 z-10 relative overflow-hidden",children:[f.jsxs("p",{className:"text-blue-500 font-bold uppercase tracking-widest text-xs mb-6 flex items-center gap-2 self-center",children:[f.jsx(V,{size:16})," Último Registro"]}),Ue?f.jsxs("div",{className:"animate-slideInRight w-full max-w-2xl text-center",children:[f.jsx("h1",{className:"text-4xl md:text-3xl font-black text-slate-800 leading-snug mb-6 drop-shadow-sm uppercase break-words line-clamp-3 py-2 px-2",children:Ue.name}),f.jsxs("div",{className:"flex items-end justify-between border-t-2 border-slate-200 pt-6 px-4",children:[f.jsxs("div",{className:"text-left",children:[f.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Valor Unitário"}),f.jsx("p",{className:"text-2xl md:text-2xl font-bold text-slate-600",children:p(Ue.price)})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"text-slate-400 text-xs font-bold uppercase tracking-wider mb-1",children:"Total Item"}),f.jsx("p",{className:"text-3xl md:text-4xl font-black text-blue-600 tracking-tighter leading-none",children:p(Ue.total)})]})]})]}):f.jsx("div",{className:"text-center opacity-20",children:f.jsx("h1",{className:"text-6xl md:text-8xl font-black text-slate-400 uppercase tracking-widest",children:"LIVRE"})})]}),f.jsx("div",{className:"px-8 pb-8 pt-4 z-20 shrink-0 w-full max-w-4xl mx-auto",children:f.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!te.trim())return;const t=X.find(e=>e.code===te);if(t)return xe.addToCart(t),se(""),void re([]);if(1===ne.length)return xe.addToCart(ne[0]),se(""),void re([]);const s=X.find(e=>e.name.toLowerCase().includes(te.toLowerCase()));if(s)return xe.addToCart(s),se(""),void re([]);ve("Produto não encontrado!"),se(""),re([])},className:"relative group",children:[f.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:f.jsx(L,{className:"text-blue-500 group-focus-within:text-blue-600",size:24})}),f.jsx("input",{ref:Fe,value:te,onChange:e=>{const t=e.target.value;if(se(t),t.trim().length>0){const e=X.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.code.includes(t)).slice(0,6);re(e)}else re([])},className:"block w-full pl-12 pr-4 py-4 border-2 border-slate-300 rounded-xl leading-5 bg-white placeholder-slate-400 focus:outline-none focus:border-blue-500 focus:ring-4 focus:ring-blue-100 text-xl font-bold transition shadow-md",placeholder:"Digitar código ou nome (F1)",autoComplete:"off"}),f.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:f.jsx("kbd",{className:"hidden sm:inline-block border border-slate-200 rounded px-2 text-sm font-sans font-medium text-slate-400",children:"ENTER"})}),ne.length>0&&f.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-2 bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden z-50 animate-fadeInUp origin-bottom",children:[f.jsxs("div",{className:"bg-blue-50 px-4 py-2 border-b border-blue-100 text-xs font-bold text-blue-600 uppercase flex justify-between",children:[f.jsx("span",{children:"Produtos Sugeridos"}),f.jsx("span",{children:"(Clique para adicionar)"})]}),ne.map((e,t)=>f.jsxs("button",{type:"button",onClick:()=>{return t=e,xe.addToCart(t),se(""),re([]),void(null==(s=Fe.current)||s.focus());var t,s},className:"w-full text-left px-4 py-3 border-b border-slate-50 last:border-0 hover:bg-brand-50 hover:pl-6 transition-all duration-200 group flex justify-between items-center "+(0===t?"bg-slate-50":""),children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-lg flex items-center justify-center text-slate-400 group-hover:bg-white group-hover:text-brand-500 transition",children:f.jsx(y,{size:20})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-bold text-slate-800 text-base leading-tight group-hover:text-brand-700",children:e.name}),f.jsx("p",{className:"text-xs text-slate-500 font-mono mt-0.5",children:e.code})]})]}),f.jsxs("div",{className:"text-right",children:[f.jsx("p",{className:"font-black text-slate-700 text-lg group-hover:text-brand-600",children:p(e.price)}),f.jsxs("p",{className:"text-[10px] font-bold "+(e.stock<=e.minStock?"text-red-500":"text-emerald-600"),children:["EST: ",e.stock]})]})]},e.id))]})]})}),f.jsxs("div",{className:"bg-blue-900 p-8 z-20 text-white shadow-[0_-5px_30px_rgba(0,0,0,0.15)] shrink-0",children:[f.jsxs("div",{className:"flex justify-between items-end mb-6",children:[f.jsx("div",{className:"text-blue-300 font-bold uppercase tracking-widest text-sm mb-1",children:"Total a Pagar"}),f.jsx("div",{className:"text-6xl font-black tracking-tighter",children:p(xe.total)})]}),f.jsxs("button",{disabled:0===xe.cart.length,onClick:()=>{ye("METHODS"),Ee(""),pe("PAYMENT")},className:"w-full py-5 bg-emerald-500 hover:bg-emerald-400 disabled:opacity-50 disabled:bg-slate-700 disabled:cursor-not-allowed text-white text-2xl font-black uppercase tracking-wide rounded-xl shadow-lg transition-transform active:scale-[0.99] flex items-center justify-center gap-3",children:[f.jsx("span",{children:"FINALIZAR VENDA (F5)"}),f.jsx(U,{size:28,strokeWidth:3})]})]})]})]}),f.jsx("div",{className:"bg-white border-t border-slate-200 py-3 flex justify-center gap-6 text-sm uppercase font-bold text-slate-500 tracking-wider shrink-0 overflow-x-auto",children:[{k:"F1",l:"Busca"},{k:"F2",l:"Cliente"},{k:"F5",l:"Pagamento"},{k:"F8",l:"Cancelar Item"},{k:"F10",l:"Menu"},{k:"ESC",l:"Voltar"}].map(e=>f.jsxs("button",{className:"flex items-center gap-2 cursor-pointer hover:text-blue-600 hover:bg-blue-50 px-3 py-2 rounded-lg transition active:scale-95 whitespace-nowrap",onClick:()=>{const t="Busca"===e.k?"F1":"Voltar"===e.k?"Escape":e.k.split(" ")[0];window.dispatchEvent(new KeyboardEvent("keydown",{key:t}))},children:[f.jsx("span",{className:"bg-slate-100 border-2 border-slate-300 px-2 py-0.5 rounded text-slate-700 text-xs font-black shadow-sm",children:e.k}),f.jsx("span",{children:e.l})]},e.k))}),"OPEN_BOX"===me.modal&&f.jsx("div",{className:"fixed inset-0 bg-blue-950/90 z-50 flex items-center justify-center backdrop-blur-md",children:f.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-xl shadow-2xl animate-scaleIn overflow-hidden",children:[f.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-200 flex justify-between items-center",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-blue-100 rounded-lg text-blue-600",children:f.jsx(O,{size:24})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-slate-800",children:"Abertura de Caixa"}),f.jsx("p",{className:"text-xs text-slate-500 font-medium",children:"Inicie o turno de vendas"})]})]}),f.jsxs("div",{className:"text-right",children:[f.jsxs("p",{className:"text-sm font-bold text-slate-700 flex items-center justify-end gap-1",children:[f.jsx(F,{size:14})," ",(new Date).toLocaleDateString()]}),f.jsxs("p",{className:"text-xs text-slate-500 flex items-center justify-end gap-1",children:[f.jsx(C,{size:12})," ",(new Date).toLocaleTimeString().slice(0,5)]})]})]}),f.jsxs("div",{className:"p-8",children:[f.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[f.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[f.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:"Operador"}),f.jsxs("p",{className:"font-bold text-slate-700 flex items-center gap-2",children:[f.jsx(M,{size:16})," ADMIN"]})]}),f.jsxs("div",{className:"bg-slate-50 p-4 rounded-xl border border-slate-200",children:[f.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mb-1",children:"Saldo Anterior"}),f.jsxs("p",{className:"font-bold flex items-center gap-2 "+(me.lastClosedRegister?"text-slate-700":"text-slate-400 italic"),children:[f.jsx(B,{size:16}),me.lastClosedRegister?p(me.lastClosedRegister.finalCount||0):"N/A"]})]})]}),f.jsxs("div",{className:"mb-8",children:[f.jsx("label",{className:"block text-slate-600 font-bold mb-3 text-sm uppercase tracking-wider text-center",children:"Informe o Fundo de Troco (R$)"}),f.jsx("div",{className:"relative max-w-xs mx-auto",children:f.jsx(E,{autoFocus:!0,type:"number",value:me.openingBalance,onChange:e=>me.setOpeningBalance(e.target.value),className:"text-center text-4xl py-4 font-black border-2 border-blue-100 text-slate-800 focus:ring-4 focus:ring-blue-100 focus:border-blue-400 rounded-xl shadow-inner bg-slate-50",placeholder:"0,00"})})]}),f.jsx(I,{onClick:me.openRegister,className:"w-full py-4 text-lg font-bold shadow-xl bg-blue-600 hover:bg-blue-700 text-white rounded-xl",children:"CONFIRMAR ABERTURA"}),f.jsx("div",{className:"mt-4 text-center",children:f.jsx(N,{to:"/",className:"text-slate-400 hover:text-slate-600 text-xs font-bold uppercase tracking-wider transition-colors",children:"Voltar ao Dashboard"})})]})]})}),"CLOSE_BOX"===me.modal&&me.closingSummary&&f.jsx("div",{className:"fixed inset-0 bg-blue-950/90 z-50 flex items-center justify-center p-4 backdrop-blur-md",children:f.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-xl shadow-2xl animate-scaleIn overflow-hidden",children:[f.jsxs("div",{className:"bg-slate-50 p-6 border-b border-slate-200 flex justify-between items-center",children:[f.jsxs("h2",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[f.jsx($,{className:"text-red-500"})," Fechamento de Caixa"]}),f.jsx("button",{onClick:()=>me.setModal("NONE"),className:"text-slate-400 hover:text-slate-600",children:f.jsx(A,{})})]}),f.jsxs("div",{className:"p-8",children:[f.jsxs("div",{className:"space-y-4 mb-8",children:[f.jsxs("div",{className:"flex justify-between items-center",children:[f.jsx("span",{className:"text-slate-500",children:"Fundo de Abertura"}),f.jsx("span",{className:"font-bold",children:p(me.closingSummary.opening)})]}),f.jsxs("div",{className:"flex justify-between items-center text-emerald-600",children:[f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(D,{size:16})," Vendas em Dinheiro"]}),f.jsxs("span",{className:"font-bold",children:["+ ",p(me.closingSummary.salesCash)]})]}),f.jsxs("div",{className:"flex justify-between items-center text-blue-600",children:[f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(D,{size:16})," Suprimentos"]}),f.jsxs("span",{className:"font-bold",children:["+ ",p(me.closingSummary.supply)]})]}),f.jsxs("div",{className:"flex justify-between items-center text-red-600",children:[f.jsxs("span",{className:"flex items-center gap-2",children:[f.jsx(q,{size:16})," Sangrias"]}),f.jsxs("span",{className:"font-bold",children:["- ",p(me.closingSummary.bleed)]})]})]}),f.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-6 rounded-xl mb-6",children:[f.jsx("label",{className:"block text-amber-900 font-bold mb-2 uppercase text-xs tracking-wider",children:"Conferência Física (Gaveta)"}),f.jsx(E,{autoFocus:!0,type:"number",value:me.closingCount,onChange:e=>me.setClosingCount(e.target.value),className:"text-center text-3xl font-black bg-white border-amber-300 focus:ring-amber-500 text-amber-900",placeholder:"0,00"}),me.closingCount&&f.jsxs("div",{className:"text-center mt-3 text-sm font-bold "+(parseFloat(me.closingCount.replace(",","."))-me.closingSummary.calculated>=-.01?"text-emerald-600":"text-red-600"),children:["Diferença: ",p(parseFloat(me.closingCount.replace(",","."))-me.closingSummary.calculated)]})]}),f.jsx(I,{onClick:()=>be({isOpen:!0,title:"Fechar Caixa",message:"Deseja realmente fechar o caixa agora?",variant:"danger",onConfirm:ze}),className:"w-full py-4 text-lg font-bold shadow-lg bg-slate-800 hover:bg-slate-900 text-white",children:"CONFIRMAR FECHAMENTO"})]})]})}),"PRINT_RECEIPT"===fe&&(ke&&"SALE"===Le||me.closedRegisterData&&"CLOSING"===Le)&&f.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:f.jsxs("div",{className:"bg-white rounded-xl w-full max-w-4xl h-[90vh] flex shadow-2xl overflow-hidden animate-scaleIn",children:[f.jsx("div",{className:"w-1/2 bg-slate-100 p-8 overflow-y-auto flex justify-center",children:f.jsx("div",{id:"printable-area",className:"bg-white shadow-lg w-[80mm] min-h-[120mm] p-4 text-[10px] font-mono leading-tight text-slate-800 border-t-4 border-slate-300",children:"SALE"===Le&&ke?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"text-center mb-2",children:[f.jsx("h2",{className:"font-bold text-sm uppercase",children:(null==(n=null==ue?void 0:ue.company)?void 0:n.fantasyName)||"PDV MASTER"}),f.jsx("p",{children:(null==(r=null==ue?void 0:ue.company)?void 0:r.corporateName)||""}),f.jsx("p",{children:(null==(a=null==ue?void 0:ue.company)?void 0:a.address)||""}),f.jsxs("p",{children:["CNPJ: ",(null==(l=null==ue?void 0:ue.company)?void 0:l.cnpj)||"","  IE: ",(null==(d=null==ue?void 0:ue.company)?void 0:d.ie)||""]}),f.jsx("hr",{className:"border-dashed border-slate-300 my-2"}),f.jsx("h3",{className:"font-bold uppercase mb-1",children:"NFCE"===Pe?"Documento Auxiliar da Nota Fiscal de Consumidor Eletrônica":"RECIBO SIMPLES - SEM VALOR FISCAL"}),"NFCE"===Pe&&f.jsx("p",{children:"Não permite aproveitamento de crédito de ICMS"})]}),f.jsxs("table",{className:"w-full mb-2",children:[f.jsx("thead",{children:f.jsxs("tr",{className:"border-b border-dashed border-slate-400",children:[f.jsx("th",{className:"text-left",children:"Item"}),f.jsx("th",{className:"text-right",children:"Qtd"}),f.jsx("th",{className:"text-right",children:"Unit"}),f.jsx("th",{className:"text-right",children:"Total"})]})}),f.jsx("tbody",{children:ke.items.map((e,t)=>f.jsxs("tr",{children:[f.jsx("td",{className:"truncate max-w-[30mm]",children:e.name}),f.jsx("td",{className:"text-right",children:e.qty}),f.jsx("td",{className:"text-right",children:e.price.toFixed(2)}),f.jsx("td",{className:"text-right",children:e.total.toFixed(2)})]},t))})]}),f.jsx("hr",{className:"border-dashed border-slate-300 my-2"}),f.jsxs("div",{className:"flex justify-between font-bold text-xs",children:[f.jsx("span",{children:"TOTAL R$"}),f.jsx("span",{children:ke.total.toFixed(2).replace(".",",")})]}),f.jsxs("div",{className:"flex justify-between mt-1",children:[f.jsx("span",{children:"Forma Pagamento"}),f.jsx("span",{children:ke.paymentMethod})]}),"CASH"===ke.paymentMethod&&f.jsxs(f.Fragment,{children:[" ",f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"Valor Recebido"}),f.jsx("span",{children:p(ke.amountPaid||0)})]})," ",f.jsxs("div",{className:"flex justify-between font-bold",children:[f.jsx("span",{children:"Troco"}),f.jsx("span",{children:p(ke.change||0)})]})]}),f.jsx("hr",{className:"border-dashed border-slate-300 my-2"}),f.jsxs("div",{className:"text-center",children:[f.jsxs("p",{children:["Consumidor: ",(null==(u=Z.find(e=>e.id===ke.customerId))?void 0:u.name)||"Não Identificado"]}),(null==(T=Z.find(e=>e.id===ke.customerId))?void 0:T.document)&&f.jsxs("p",{children:["CPF: ",null==(Q=Z.find(e=>e.id===ke.customerId))?void 0:Q.document]})]}),"NFCE"===Pe&&f.jsxs("div",{className:"mt-4 text-center",children:[f.jsx("p",{className:"mb-1 text-[9px]",children:"Consulta via Leitor de QR Code"}),f.jsx("div",{className:"flex justify-center mb-1",children:Se&&f.jsx("img",{src:Se,className:"w-24 h-24",alt:"QR Code"})}),f.jsxs("p",{className:"break-all text-[8px] mb-2 font-bold",children:["Chave de Acesso: ",f.jsx("br",{})," ",null==(G=ke.accessKey)?void 0:G.replace(/(.{4})/g,"$1 ")]}),f.jsx("p",{children:"Protocolo de Autorização: 135240001234567"}),f.jsxs("p",{children:["Data de Autorização: ",new Date(ke.date).toLocaleString()]})]}),f.jsxs("div",{className:"mt-4 text-center border-t border-dashed border-slate-300 pt-2",children:[f.jsxs("p",{children:["Tributos Totais Incidentes (Lei Federal 12.741/2012): R$ ",(.18*ke.total).toFixed(2)]}),f.jsx("p",{className:"mt-2 font-bold italic",children:"PDV MASTER ERP"})]})]}):me.closedRegisterData&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"text-center mb-4",children:[f.jsx("h2",{className:"font-bold text-sm uppercase",children:"Relatório de Fechamento"}),f.jsxs("p",{children:["Caixa: ",me.closedRegisterData.id.slice(0,8)]}),f.jsx("p",{children:"Operador: ADMIN"}),f.jsxs("p",{children:["Abertura: ",new Date(me.closedRegisterData.openedAt).toLocaleString()]}),f.jsxs("p",{children:["Fechamento: ",new Date(me.closedRegisterData.closedAt).toLocaleString()]})]}),f.jsx("hr",{className:"border-dashed border-slate-300 my-2"}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{children:"(+) Abertura"}),f.jsx("span",{children:p(me.closedRegisterData.openingBalance)})]}),f.jsxs("div",{className:"flex justify-between font-bold mt-2",children:[f.jsx("span",{children:"(=) Saldo Sistema"}),f.jsx("span",{children:p(me.closedRegisterData.currentBalance)})]}),f.jsxs("div",{className:"flex justify-between font-bold",children:[f.jsx("span",{children:"(=) Saldo Físico"}),f.jsx("span",{children:p(me.closedRegisterData.finalCount||0)})]}),f.jsx("hr",{className:"border-dashed border-slate-300 my-2"}),f.jsxs("div",{className:"flex justify-between font-black text-xs",children:[f.jsx("span",{children:"DIFERENÇA"}),f.jsx("span",{children:p(me.closedRegisterData.difference||0)})]})]}),f.jsx("div",{className:"mt-8 text-center text-[9px] italic",children:f.jsx("p",{children:"Conferido por: _______________________"})})]})})}),f.jsxs("div",{className:"w-1/2 p-10 bg-white flex flex-col justify-between",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6 text-emerald-600",children:[f.jsx(k,{size:48}),f.jsx("h2",{className:"text-3xl font-bold text-slate-800",children:"SALE"===Le?"Venda Finalizada!":"Caixa Fechado!"})]}),f.jsx("p",{className:"text-slate-500 mb-8 text-lg",children:"SALE"===Le?"Selecione o tipo de comprovante para imprimir.":"Imprima o relatório de fechamento para conferência."}),"SALE"===Le&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs("label",{className:"flex items-center gap-4 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-500 transition group",children:[f.jsx("input",{type:"radio",name:"receiptType",checked:"NFCE"===Pe,onChange:()=>Me("NFCE"),className:"w-5 h-5 text-blue-600"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-bold text-slate-800 group-hover:text-blue-700",children:"Nota Fiscal (NFC-e)"}),f.jsx("p",{className:"text-sm text-slate-400",children:"Documento fiscal válido com QR Code"})]}),f.jsx("div",{className:"p-2 bg-blue-100 text-blue-600 rounded-lg",children:f.jsx(R,{size:24})})]}),f.jsxs("label",{className:"flex items-center gap-4 p-4 border-2 border-slate-200 rounded-xl cursor-pointer hover:border-blue-500 transition group",children:[f.jsx("input",{type:"radio",name:"receiptType",checked:"RECIBO"===Pe,onChange:()=>Me("RECIBO"),className:"w-5 h-5 text-blue-600"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-bold text-slate-800 group-hover:text-blue-700",children:"Recibo Simples"}),f.jsx("p",{className:"text-sm text-slate-400",children:"Comprovante de venda sem valor fiscal"})]}),f.jsx("div",{className:"p-2 bg-slate-100 text-slate-600 rounded-lg",children:f.jsx(z,{size:24})})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs(I,{onClick:()=>{var e;const t=document.getElementById("printable-area");if(console.log("Print request:",{printType:Le,lastSale:!!ke,closedRegisterData:!!me.closedRegisterData,printableArea:!!t}),!t)return void alert("Área de impressão não encontrada!");if(!(null==(e=t.textContent)?void 0:e.trim()))return void alert("Não há conteúdo para imprimir!");const s=window.open("","_blank","width=600,height=400");if(!s)return void alert("Bloqueador de pop-ups! Permita pop-ups para imprimir.");const n=t.innerHTML;s.document.write(`<!DOCTYPE html><html><head><title>Imprimir Recibo</title>\n          <style>\n              @page { size: 80mm auto; margin: 0; } body { font-family: monospace; font-size: 10px; line-height: 1.2; margin: 0; padding: 2mm; background: white; color: black; width: 80mm; box-sizing: border-box; } .text-center { text-align: center; } .text-right { text-align: right; } .text-left { text-align: left; } .font-bold { font-weight: bold; } .uppercase { text-transform: uppercase; } .dashed-line { border-bottom: 1px dashed black; margin: 3px 0; width: 100%; display: block; } table { width: 100%; border-collapse: collapse; font-size: 9px; } th, td { padding: 1px 0; } img { max-width: 70mm; height: auto; } @media print { html, body { margin: 0; padding: 1mm; } .dashed-line { page-break-inside: avoid; } }\n          </style>\n      </head><body>${n}</body></html>`),s.document.close(),s.onload=()=>{s.print(),s.close()}},className:"w-full py-4 text-xl font-bold shadow-lg shadow-blue-200 gap-3",children:[f.jsx(z,{size:24})," IMPRIMIR ","SALE"===Le?"NFCE"===Pe?"NFC-e":"RECIBO":"RELATÓRIO"]}),f.jsx(I,{variant:"secondary",onClick:()=>{var e;pe("NONE"),Re(null),"CLOSING"===Le?me.resetAndPrepareForNewRegister():null==(e=Fe.current)||e.focus()},className:"w-full py-4 font-bold text-slate-500",children:"SALE"===Le?"Fechar e Nova Venda (ESC)":"Fechar e Sair"})]})]})]})}),"PAYMENT"===fe&&f.jsx("div",{className:"fixed inset-0 bg-blue-950/90 z-50 flex items-center justify-center p-4 backdrop-blur-md",children:f.jsxs("div",{className:"bg-white rounded-xl w-full max-w-5xl h-[85vh] flex shadow-2xl overflow-hidden animate-scaleIn",children:[f.jsxs("div",{className:"w-1/3 bg-slate-50 p-10 flex flex-col justify-between border-r border-slate-200",children:[f.jsx("h3",{className:"text-slate-400 font-bold uppercase tracking-wider mb-2 text-sm",children:"Resumo do Pagamento"}),f.jsx("p",{className:"text-6xl font-black text-slate-800 tracking-tighter mb-8",children:p(xe.total)}),f.jsxs("div",{className:"space-y-4 text-slate-600",children:[f.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-3",children:[f.jsx("span",{className:"font-medium",children:"Itens"}),f.jsx("span",{className:"font-bold text-lg",children:xe.cart.length})]}),f.jsxs("div",{className:"flex justify-between border-b border-slate-200 pb-3",children:[f.jsx("span",{className:"font-medium",children:"Cliente"}),f.jsx("span",{className:"font-bold text-right",children:(null==ce?void 0:ce.name)||"Não Identificado"})]})]}),f.jsx(I,{variant:"secondary",onClick:()=>pe("NONE"),className:"w-full py-4 uppercase font-bold",children:"Cancelar (ESC)"})]}),f.jsxs("div",{className:"w-2/3 p-10 bg-white overflow-y-auto relative",children:["METHODS"===we&&f.jsxs("div",{className:"animate-fadeIn",children:[f.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-8",children:"Como o cliente vai pagar?"}),f.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[f.jsxs("button",{onClick:()=>ye("CASH"),className:"h-40 bg-white hover:bg-emerald-50 border-2 rounded-2xl flex flex-col items-center justify-center gap-4 transition group",children:[f.jsx("div",{className:"p-4 bg-emerald-100 rounded-full text-emerald-600",children:f.jsx(B,{size:40})}),f.jsx("span",{className:"font-bold text-xl",children:"Dinheiro"})]}),f.jsxs("button",{onClick:()=>c(null,null,function*(){var e,t;const s=crypto.randomUUID().replace(/-/g,"").substring(0,25),n=J.generatePayload((null==(e=null==ue?void 0:ue.payment)?void 0:e.pixKey)||"00.000.000/0001-00",(null==(t=null==ue?void 0:ue.company)?void 0:t.fantasyName)||"PDV MASTER","SAO PAULO",s,xe.total);try{const e=yield xt.toDataURL(n,{width:300,margin:2});Ae({payload:n,img:e}),pe("PIX_WAITING")}catch(r){ve("Erro ao gerar QR Code")}}),className:"h-40 bg-white hover:bg-brand-50 border-2 rounded-2xl flex flex-col items-center justify-center gap-4 transition group",children:[f.jsx("div",{className:"p-4 bg-brand-100 rounded-full text-brand-600",children:f.jsx(K,{size:40})}),f.jsx("span",{className:"font-bold text-xl",children:"PIX"})]}),f.jsxs("button",{onClick:()=>De("DEBIT"),className:"h-40 bg-white hover:bg-blue-50 border-2 rounded-2xl flex flex-col items-center justify-center gap-4 transition group",children:[f.jsx("div",{className:"p-4 bg-blue-100 rounded-full text-blue-600",children:f.jsx(P,{size:40})}),f.jsx("span",{className:"font-bold text-xl",children:"Débito"})]}),f.jsxs("button",{onClick:()=>De("CREDIT"),className:"h-40 bg-white hover:bg-purple-50 border-2 rounded-2xl flex flex-col items-center justify-center gap-4 transition group",children:[f.jsx("div",{className:"p-4 bg-purple-100 rounded-full text-purple-600",children:f.jsx(P,{size:40})}),f.jsx("span",{className:"font-bold text-xl",children:"Crédito"})]})]})]}),"CASH"===we&&f.jsxs("div",{className:"animate-fadeIn flex flex-col h-full",children:[f.jsxs("button",{onClick:()=>ye("METHODS"),className:"absolute top-6 left-6 flex items-center gap-2 text-sm font-bold text-slate-500 hover:text-slate-800",children:[f.jsx(_,{size:18})," Voltar"]}),f.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2 text-center",children:"Pagamento em Dinheiro"}),f.jsx("p",{className:"text-center text-slate-500 mb-8",children:"Informe o valor recebido para calcular o troco."}),f.jsxs("div",{className:"space-y-4 mb-6",children:[f.jsx(E,{label:"Valor Recebido (R$)",type:"number",value:Ce,onChange:e=>Ee(e.target.value),ref:Be,className:"text-center text-4xl py-4 font-black",placeholder:"0,00"}),f.jsx("div",{className:"grid grid-cols-4 gap-2",children:[5,10,20,50,100,xe.total].map(e=>f.jsx("button",{onClick:()=>Ee(e.toFixed(2).replace(".",",")),className:"py-2 bg-slate-100 rounded-lg font-bold",children:e===xe.total?"Exato":`R$ ${e}`},e))})]}),f.jsxs("div",{className:"flex-1 p-6 rounded-xl flex flex-col items-center justify-center text-center transition "+(_e>=0?"bg-blue-50":"bg-red-50"),children:[f.jsx("p",{className:"text-sm font-bold uppercase text-blue-800",children:"Troco"}),f.jsx("p",{className:"text-7xl font-black text-blue-900 tracking-tighter",children:p(_e>=0?_e:0)})]}),f.jsx(I,{onClick:()=>De("CASH",{paid:parseFloat(Ce.replace(",",".")),change:_e}),disabled:_e<0||!Ce,className:"w-full py-5 text-xl font-bold mt-6",children:"Confirmar Pagamento"})]}),oe&&f.jsxs("div",{className:"absolute inset-0 bg-white/80 flex flex-col items-center justify-center gap-3 text-blue-600 animate-pulse font-bold backdrop-blur-sm",children:[f.jsx(Y,{className:"animate-spin",size:32}),f.jsx("span",{children:"Processando..."})]})]})]})}),"PIX_WAITING"===fe&&Ie&&f.jsx("div",{className:"fixed inset-0 bg-blue-950/90 z-50 flex items-center justify-center p-4 backdrop-blur-md",children:f.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg p-8 shadow-2xl animate-scaleIn text-center",children:[f.jsx("div",{className:"mb-6",children:f.jsx("div",{className:"p-4 bg-brand-100 rounded-full text-brand-600 inline-block",children:f.jsx(K,{size:48})})}),f.jsx("h2",{className:"text-2xl font-black text-slate-800 mb-2",children:"Escaneie o QR Code"}),f.jsx("p",{className:"text-slate-500 mb-6",children:"Abra o aplicativo do seu banco e pague via PIX"}),f.jsx("div",{className:"bg-white p-4 rounded-xl border-2 inline-block mb-6",children:f.jsx("img",{src:Ie.img,alt:"QR Code Pix",className:"w-64 h-64"})}),f.jsxs("div",{className:"mb-8",children:[f.jsx("p",{className:"text-xs font-bold text-slate-400 uppercase tracking-wider mb-2",children:"Valor"}),f.jsx("p",{className:"text-4xl font-black text-brand-600",children:p(xe.total)})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"relative",children:[f.jsx("input",{readOnly:!0,value:Ie.payload,className:"w-full pl-4 pr-12 py-3 bg-slate-50 rounded-lg text-xs font-mono truncate"}),f.jsx("button",{onClick:()=>{Ie&&(navigator.clipboard.writeText(Ie.payload),ve("Código PIX copiado!","Sucesso","success"))},className:"absolute right-2 top-2 p-1.5 bg-white rounded",children:f.jsx(H,{size:16})})]}),f.jsx(I,{onClick:()=>De("PIX"),className:"w-full py-4 text-lg font-bold",children:"PAGAMENTO RECEBIDO"}),f.jsx("button",{onClick:()=>pe("PAYMENT"),className:"text-slate-400 hover:text-red-500 font-bold",children:"Cancelar"})]})]})}),"CUSTOMER"===fe&&f.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:f.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg p-6 shadow-2xl animate-scaleIn",children:[f.jsxs("h3",{className:"text-xl font-bold text-slate-800 mb-6 flex items-center gap-2",children:[f.jsx(M,{size:24,className:"text-blue-600"})," Identificar Cliente"]}),f.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-3 mb-6 pr-2",children:[f.jsx("button",{onClick:()=>{var e;de(null),pe("NONE"),null==(e=Fe.current)||e.focus()},className:"w-full text-left p-4 hover:bg-blue-50 rounded-xl border-2 transition",children:f.jsx("span",{className:"font-bold text-lg",children:"Consumidor Final"})}),Z.map(e=>f.jsxs("button",{onClick:()=>{var t;de(e),pe("NONE"),null==(t=Fe.current)||t.focus()},className:"w-full text-left p-4 hover:bg-blue-50 rounded-xl border-2 flex justify-between items-center group",children:[f.jsxs("div",{children:[f.jsx("span",{className:"font-bold block group-hover:text-blue-700",children:e.name}),f.jsx("span",{className:"text-xs text-slate-400",children:e.email||"Sem email"})]}),f.jsx("span",{className:"font-mono text-sm bg-slate-100 px-3 py-1 rounded-lg",children:e.document})]},e.id))]}),f.jsx(I,{variant:"secondary",onClick:()=>pe("NONE"),className:"w-full py-3",children:"Cancelar"})]})}),"MENU"===fe&&f.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:f.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-3xl shadow-2xl overflow-hidden animate-fadeIn",children:[f.jsxs("div",{className:"p-6 border-b flex justify-between items-center bg-slate-50",children:[f.jsxs("h2",{className:"text-xl font-bold flex items-center gap-2",children:[f.jsx(S,{className:"text-blue-600"})," Menu de Funções"]}),f.jsx("button",{onClick:()=>pe("NONE"),className:"text-slate-400 hover:text-red-500",children:f.jsx(A,{})})]}),f.jsxs("div",{className:"p-8 grid grid-cols-2 md:grid-cols-3 gap-6",children:[f.jsxs("button",{onClick:()=>{me.setModal("SUPRIMENTO"),me.setTransactionAmount(""),me.setTransactionReason(""),pe("NONE")},className:"p-6 hover:bg-emerald-50 rounded-xl flex flex-col items-center gap-3 transition border",children:[f.jsx("div",{className:"p-3 bg-emerald-100 rounded-full text-emerald-600",children:f.jsx(D,{size:32})}),f.jsx("span",{children:"Suprimento"})]}),f.jsxs("button",{onClick:()=>{me.setModal("SANGRIA"),me.setTransactionAmount(""),me.setTransactionReason(""),pe("NONE")},className:"p-6 hover:bg-red-50 rounded-xl flex flex-col items-center gap-3 transition border",children:[f.jsx("div",{className:"p-3 bg-red-100 rounded-full text-red-600",children:f.jsx(q,{size:32})}),f.jsx("span",{children:"Sangria"})]}),f.jsxs("button",{onClick:()=>{me.initiateCloseRegister(),pe("NONE")},className:"p-6 hover:bg-amber-50 rounded-xl flex flex-col items-center gap-3 transition border",children:[f.jsx("div",{className:"p-3 bg-amber-100 rounded-full text-amber-600",children:f.jsx($,{size:32})}),f.jsx("span",{children:"Fechar Caixa"})]})]})]})}),("SANGRIA"===me.modal||"SUPRIMENTO"===me.modal)&&f.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:f.jsxs("div",{className:"bg-white rounded-xl w-full max-w-md p-6 shadow-2xl animate-scaleIn",children:[f.jsxs("h3",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:["SANGRIA"===me.modal?f.jsx(q,{className:"text-red-500"}):f.jsx(D,{className:"text-emerald-500"}),"SANGRIA"===me.modal?"Realizar Sangria":"Realizar Suprimento"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(E,{label:"Valor (R$)",type:"number",autoFocus:!0,value:me.transactionAmount,onChange:e=>me.setTransactionAmount(e.target.value)}),f.jsx(E,{label:"Motivo / Descrição",value:me.transactionReason,onChange:e=>me.setTransactionReason(e.target.value)})]}),f.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[f.jsx(I,{variant:"secondary",onClick:()=>me.setModal("NONE"),children:"Cancelar"}),f.jsx(I,{variant:"SANGRIA"===me.modal?"danger":"success",onClick:()=>me.addCashTransaction("SANGRIA"===me.modal?"BLEED":"SUPPLY"),children:"Confirmar"})]})]})})]}):f.jsx("div",{className:"h-full flex items-center justify-center bg-slate-900 text-white",children:f.jsxs("div",{className:"text-center",children:[f.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),f.jsx("p",{children:"Carregando configurações..."})]})})};export{ft as POS};
