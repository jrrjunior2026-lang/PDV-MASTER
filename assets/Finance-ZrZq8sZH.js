var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,c=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,n=(e,s)=>{for(var t in s||(s={}))l.call(s,t)&&c(e,t,s[t]);if(a)for(var t of a(s))r.call(s,t)&&c(e,t,s[t]);return e},d=(e,a)=>s(e,t(a)),i=(e,s,t)=>new Promise((a,l)=>{var r=e=>{try{n(t.next(e))}catch(s){l(s)}},c=e=>{try{n(t.throw(e))}catch(s){l(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(r,c);n((t=t.apply(e,s)).next())});import{c as o,r as x,S as p,j as m,B as h,C as j,f as u,k as b,I as N}from"./index-CYX4AbMr.js";import{P as g}from"./plus-BhKEq4Cy.js";
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=o("circle-arrow-down",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 8v8",key:"napkw2"}],["path",{d:"m8 12 4 4 4-4",key:"k98ssh"}]]),f=o("circle-arrow-up",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m16 12-4-4-4 4",key:"177agl"}],["path",{d:"M12 16V8",key:"1sbj14"}]]),v=o("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),E=()=>{var e;const[s,t]=x.useState([]),[a,l]=x.useState(!1),[r,c]=x.useState({type:"EXPENSE",status:"PENDING"});x.useEffect(()=>{o()},[]);const o=()=>i(null,null,function*(){const e=yield p.getFinancialRecords();t(e.sort((e,s)=>new Date(s.date).getTime()-new Date(e.date).getTime()))}),E=s.filter(e=>"INCOME"===e.type).reduce((e,s)=>e+s.amount,0),P=s.filter(e=>"EXPENSE"===e.type).reduce((e,s)=>e+s.amount,0),w=E-P;return m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Financeiro"}),m.jsx("p",{className:"text-slate-500",children:"Contas a Pagar e Receber"})]}),m.jsxs(h,{onClick:()=>l(!0),children:[m.jsx(g,{size:18})," Lançamento"]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsx(j,{className:"border-l-4 border-l-emerald-500",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-emerald-100 text-emerald-600 rounded-full",children:m.jsx(f,{size:24})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-slate-500 uppercase font-bold",children:"Receitas"}),m.jsx("p",{className:"text-2xl font-bold text-slate-800",children:u(E)})]})]})}),m.jsx(j,{className:"border-l-4 border-l-red-500",children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 bg-red-100 text-red-600 rounded-full",children:m.jsx(y,{size:24})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-slate-500 uppercase font-bold",children:"Despesas"}),m.jsx("p",{className:"text-2xl font-bold text-slate-800",children:u(P)})]})]})}),m.jsx(j,{className:"border-l-4 "+(w>=0?"border-l-blue-500":"border-l-red-500"),children:m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"p-3 rounded-full "+(w>=0?"bg-blue-100 text-blue-600":"bg-red-100 text-red-600"),children:m.jsx("span",{className:"font-bold text-lg",children:"Total"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm text-slate-500 uppercase font-bold",children:"Saldo"}),m.jsx("p",{className:"text-2xl font-bold "+(w>=0?"text-blue-700":"text-red-600"),children:u(w)})]})]})})]}),m.jsxs(j,{className:"p-0 overflow-hidden",children:[m.jsxs("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex justify-between items-center",children:[m.jsx("h3",{className:"font-bold text-slate-700",children:"Extrato de Lançamentos"}),m.jsxs("button",{className:"flex items-center gap-2 text-sm text-slate-500 hover:text-slate-700",children:[m.jsx(v,{size:16})," Filtrar"]})]}),m.jsxs("table",{className:"w-full text-sm text-left",children:[m.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-200",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3",children:"Data"}),m.jsx("th",{className:"px-6 py-3",children:"Descrição"}),m.jsx("th",{className:"px-6 py-3",children:"Categoria"}),m.jsx("th",{className:"px-6 py-3",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-right",children:"Valor"})]})}),m.jsx("tbody",{className:"divide-y divide-slate-100",children:s.map(e=>m.jsxs("tr",{className:"hover:bg-slate-50",children:[m.jsx("td",{className:"px-6 py-4 text-slate-500",children:new Date(e.date).toLocaleDateString()}),m.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:e.description}),m.jsx("td",{className:"px-6 py-4 text-slate-500",children:m.jsx("span",{className:"px-2 py-1 bg-slate-100 rounded text-xs",children:e.category})}),m.jsx("td",{className:"px-6 py-4",children:"PAID"===e.status?m.jsx(b,{color:"bg-emerald-100 text-emerald-700",children:"Pago"}):m.jsx(b,{color:"bg-amber-100 text-amber-700",children:"Pendente"})}),m.jsxs("td",{className:"px-6 py-4 text-right font-bold "+("INCOME"===e.type?"text-emerald-600":"text-red-600"),children:["INCOME"===e.type?"+":"-",u(e.amount)]})]},e.id))})]})]}),a&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg p-6",children:[m.jsx("h3",{className:"text-xl font-bold mb-4",children:"Novo Lançamento"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex gap-4",children:[m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"radio",name:"type",checked:"INCOME"===r.type,onChange:()=>c(d(n({},r),{type:"INCOME"}))}),m.jsx("span",{className:"text-emerald-600 font-bold",children:"Receita"})]}),m.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[m.jsx("input",{type:"radio",name:"type",checked:"EXPENSE"===r.type,onChange:()=>c(d(n({},r),{type:"EXPENSE"}))}),m.jsx("span",{className:"text-red-600 font-bold",children:"Despesa"})]})]}),m.jsx(N,{label:"Descrição",value:r.description||"",onChange:e=>c(d(n({},r),{description:e.target.value}))}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx(N,{label:"Valor (R$)",type:"number",value:r.amount,onChange:e=>c(d(n({},r),{amount:parseFloat(e.target.value)}))}),m.jsx(N,{label:"Categoria",value:r.category||"",onChange:e=>c(d(n({},r),{category:e.target.value}))})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsx(N,{label:"Data Vencimento",type:"date",value:null==(e=r.date)?void 0:e.split("T")[0],onChange:e=>c(d(n({},r),{date:new Date(e.target.value).toISOString()}))}),m.jsxs("div",{className:"flex flex-col gap-1",children:[m.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Status"}),m.jsxs("select",{className:"border border-slate-300 rounded-md p-2",value:r.status,onChange:e=>c(d(n({},r),{status:e.target.value})),children:[m.jsx("option",{value:"PENDING",children:"Pendente"}),m.jsx("option",{value:"PAID",children:"Pago/Recebido"})]})]})]})]}),m.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[m.jsx(h,{variant:"secondary",onClick:()=>l(!1),children:"Cancelar"}),m.jsx(h,{onClick:()=>i(null,null,function*(){if(!r.description||!r.amount)return;const e={id:crypto.randomUUID(),type:r.type,description:r.description,amount:Number(r.amount),category:r.category||"Geral",date:r.date||(new Date).toISOString(),status:r.status};yield p.addFinancialRecord(e),o(),l(!1),c({type:"EXPENSE",status:"PENDING"})}),children:"Salvar"})]})]})})]})};export{E as Finance};
