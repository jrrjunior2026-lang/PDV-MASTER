var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,i=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,s=(e,t)=>{for(var r in t||(t={}))o.call(t,r)&&i(e,r,t[r]);if(n)for(var r of n(t))a.call(t,r)&&i(e,r,t[r]);return e},l=(e,n)=>t(e,r(n)),u=(e,t,r)=>new Promise((n,o)=>{var a=e=>{try{s(r.next(e))}catch(t){o(t)}},i=e=>{try{s(r.throw(e))}catch(t){o(t)}},s=e=>e.done?n(e.value):Promise.resolve(e.value).then(a,i);s((r=r.apply(e,t)).next())});import{c,g as f,r as d,S as p,j as h,b,d as v,B as x,C as y,f as m,k as g,X as j,I as _,F as w}from"./index-C0OxTEVM.js";import{F as O,C as E}from"./csvService-z_RrmFBr.js";import{r as C}from"./index-ChsL25-v.js";import{GeminiService as N}from"./geminiService-D8wDBU1b.js";import{P as S}from"./printer-BApmAYaP.js";import{P}from"./plus-BG9Kn8pI.js";import{S as A}from"./search-Dj-0DwqB.js";import{U as k,T}from"./upload-BZJNAV85.js";
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=c("arrow-down-left",[["path",{d:"M17 7 7 17",key:"15tmo1"}],["path",{d:"M17 17H7V7",key:"1org7z"}]]),R=c("arrow-up-right",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),L=c("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),I=c("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),D=c("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),G=c("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),z=c("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var B,X,H=(e=>(e.SALE="SALE",e.ENTRY="ENTRY",e.ADJUSTMENT="ADJUSTMENT",e))(H||{}),U={},V={},F={};function $(){if(B)return F;B=1,Object.defineProperty(F,"__esModule",{value:!0});return F.default=function e(t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.text=r.text||t,this.options=r},F}function q(){if(X)return V;X=1,Object.defineProperty(V,"__esModule",{value:!0}),V.CODE39=void 0;var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=$();var n=function(e){function r(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),e=e.toUpperCase(),t.mod43&&(e+=(n=function(e){for(var t=0,r=0;r<e.length;r++)t+=s(e[r]);return t%=43}(e),o[n])),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"encode",value:function(){for(var e=i("*"),t=0;t<this.data.length;t++)e+=i(this.data[t])+"0";return{data:e+=i("*"),text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default),o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],a=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function i(e){return t=s(e),a[t].toString(2);var t}function s(e){return o.indexOf(e)}return V.CODE39=n,V}var W,K,Q={},Y={},J={},Z={};function ee(){if(W)return Z;var e;function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}W=1,Object.defineProperty(Z,"__esModule",{value:!0});var r=Z.SET_A=0,n=Z.SET_B=1,o=Z.SET_C=2;Z.SHIFT=98;var a=Z.START_A=103,i=Z.START_B=104,s=Z.START_C=105;return Z.MODULO=103,Z.STOP=106,Z.FNC1=207,Z.SET_BY_CODE=(t(e={},a,r),t(e,i,n),t(e,s,o),e),Z.SWAP={101:r,100:n,99:o},Z.A_START_CHAR=String.fromCharCode(208),Z.B_START_CHAR=String.fromCharCode(209),Z.C_START_CHAR=String.fromCharCode(210),Z.A_CHARS="[\0-_È-Ï]",Z.B_CHARS="[ -È-Ï]",Z.C_CHARS="(Ï*[0-9]{2}Ï*)",Z.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011],Z}function te(){if(K)return J;K=1,Object.defineProperty(J,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=$(),n=(e=r)&&e.__esModule?e:{default:e},o=ee();var a=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e.substring(1),t));return n.bytes=e.split("").map(function(e){return e.charCodeAt(0)}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var e=this.bytes,t=e.shift()-105,n=o.SET_BY_CODE[t];if(void 0===n)throw new RangeError("The encoding does not start with a start character.");!0===this.shouldEncodeAsEan128()&&e.unshift(o.FNC1);var a=r.next(e,1,n);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:r.getBar(t)+a.result+r.getBar((a.checksum+t)%o.MODULO)+r.getBar(o.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var e=this.options.ean128||!1;return"string"==typeof e&&(e="true"===e.toLowerCase()),e}}],[{key:"getBar",value:function(e){return o.BARS[e]?o.BARS[e].toString():""}},{key:"correctIndex",value:function(e,t){if(t===o.SET_A){var r=e.shift();return r<32?r+64:r-32}return t===o.SET_B?e.shift()-32:10*(e.shift()-48)+e.shift()-48}},{key:"next",value:function(e,t,n){if(!e.length)return{result:"",checksum:0};var a=void 0,i=void 0;if(e[0]>=200){i=e.shift()-105;var s=o.SWAP[i];void 0!==s?a=r.next(e,t+1,s):(n!==o.SET_A&&n!==o.SET_B||i!==o.SHIFT||(e[0]=n===o.SET_A?e[0]>95?e[0]-96:e[0]:e[0]<32?e[0]+96:e[0]),a=r.next(e,t+1,n))}else i=r.correctIndex(e,n),a=r.next(e,t+1,n);var l=i*t;return{result:r.getBar(i)+a.result,checksum:l+a.checksum}}}]),r}(n.default);return J.default=a,J}var re,ne,oe={};function ae(){if(ne)return Y;ne=1,Object.defineProperty(Y,"__esModule",{value:!0});var e=r(te()),t=r(function(){if(re)return oe;re=1,Object.defineProperty(oe,"__esModule",{value:!0});var e=ee(),t=function(t){return t.match(new RegExp("^"+e.A_CHARS+"*"))[0].length},r=function(t){return t.match(new RegExp("^"+e.B_CHARS+"*"))[0].length},n=function(t){return t.match(new RegExp("^"+e.C_CHARS+"*"))[0]};function o(t,r){var n=r?e.A_CHARS:e.B_CHARS,i=t.match(new RegExp("^("+n+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(i)return i[1]+String.fromCharCode(204)+a(t.substring(i[1].length));var s=t.match(new RegExp("^"+n+"+"))[0];return s.length===t.length?t:s+String.fromCharCode(r?205:206)+o(t.substring(s.length),!r)}function a(e){var a=n(e),i=a.length;if(i===e.length)return e;e=e.substring(i);var s=t(e)>=r(e);return a+String.fromCharCode(s?206:205)+o(e,s)}return oe.default=function(i){var s=void 0;if(n(i).length>=2)s=e.C_START_CHAR+a(i);else{var l=t(i)>r(i);s=(l?e.A_START_CHAR:e.B_START_CHAR)+o(i,l)}return s.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(e,t){return String.fromCharCode(203)+t})},oe}());function r(e){return e&&e.__esModule?e:{default:e}}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var o=function(e){function r(e,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),/^[\x00-\x7F\xC8-\xD3]+$/.test(e))var a=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,(0,t.default)(e),o));else a=n(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,o));return n(a)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),r}(e.default);return Y.default=o,Y}var ie,se={};function le(){if(ie)return se;ie=1,Object.defineProperty(se,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=te(),n=(e=r)&&e.__esModule?e:{default:e},o=ee();var a=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o.A_START_CHAR+e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return new RegExp("^"+o.A_CHARS+"+$").test(this.data)}}]),r}(n.default);return se.default=a,se}var ue,ce={};function fe(){if(ue)return ce;ue=1,Object.defineProperty(ce,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=te(),n=(e=r)&&e.__esModule?e:{default:e},o=ee();var a=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o.B_START_CHAR+e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return new RegExp("^"+o.B_CHARS+"+$").test(this.data)}}]),r}(n.default);return ce.default=a,ce}var de,pe,he={};function be(){if(de)return he;de=1,Object.defineProperty(he,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=te(),n=(e=r)&&e.__esModule?e:{default:e},o=ee();var a=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,o.C_START_CHAR+e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return new RegExp("^"+o.C_CHARS+"+$").test(this.data)}}]),r}(n.default);return he.default=a,he}var ve,xe={},ye={},me={};function ge(){return ve||(ve=1,Object.defineProperty(me,"__esModule",{value:!0}),me.SIDE_BIN="101",me.MIDDLE_BIN="01010",me.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]},me.EAN2_STRUCTURE=["LL","LG","GL","GG"],me.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"],me.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"]),me}var je,_e,we,Oe={},Ee={};function Ce(){if(je)return Ee;je=1,Object.defineProperty(Ee,"__esModule",{value:!0});var e=ge();return Ee.default=function(t,r,n){var o=t.split("").map(function(t,n){return e.BINARIES[r[n]]}).map(function(e,r){return e?e[t[r]]:""});if(n){var a=t.length-1;o=o.map(function(e,t){return t<a?e+n:e})}return o.join("")},Ee}function Ne(){if(_e)return Oe;_e=1,Object.defineProperty(Oe,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=ge(),r=n(Ce());function n(e){return e&&e.__esModule?e:{default:e}}var o=function(n){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return r.fontSize=!t.flat&&t.fontSize>10*t.width?10*t.width:t.fontSize,r.guardHeight=t.height+r.fontSize/2+t.textMargin,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),e(o,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(e,t){return this.text.substr(e,t)}},{key:"leftEncode",value:function(e,t){return(0,r.default)(e,t)}},{key:"rightText",value:function(e,t){return this.text.substr(e,t)}},{key:"rightEncode",value:function(e,t){return(0,r.default)(e,t)}},{key:"encodeGuarded",value:function(){var e={fontSize:this.fontSize},r={height:this.guardHeight};return[{data:t.SIDE_BIN,options:r},{data:this.leftEncode(),text:this.leftText(),options:e},{data:t.MIDDLE_BIN,options:r},{data:this.rightEncode(),text:this.rightText(),options:e},{data:t.SIDE_BIN,options:r}]}},{key:"encodeFlat",value:function(){return{data:[t.SIDE_BIN,this.leftEncode(),t.MIDDLE_BIN,this.rightEncode(),t.SIDE_BIN].join(""),text:this.text}}}]),o}(n($()).default);return Oe.default=o,Oe}function Se(){if(we)return ye;we=1,Object.defineProperty(ye,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0},n=ge(),o=Ne(),a=(e=o)&&e.__esModule?e:{default:e};var i=function(e){return(10-e.substr(0,12).split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+3*t:e+t},0)%10)%10},s=function(e){function o(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),-1!==e.search(/^[0-9]{12}$/)&&(e+=i(e));var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t));return r.lastChar=t.lastChar,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,e),t(o,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{13}$/)&&+this.data[12]===i(this.data)}},{key:"leftText",value:function(){return r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var e=this.data.substr(1,6),t=n.EAN13_STRUCTURE[this.data[0]];return r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"leftEncode",this).call(this,e,t)}},{key:"rightText",value:function(){return r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var e=this.data.substr(7,6);return r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"rightEncode",this).call(this,e,"RRRRRR")}},{key:"encodeGuarded",value:function(){var e=r(o.prototype.__proto__||Object.getPrototypeOf(o.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(e.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(e.push({data:"00"}),e.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),e}}]),o}(a.default);return ye.default=s,ye}var Pe,Ae={};function ke(){if(Pe)return Ae;Pe=1,Object.defineProperty(Ae,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in o)return o.value;var i=o.get;return void 0!==i?i.call(n):void 0},n=Ne(),o=(e=n)&&e.__esModule?e:{default:e};var a=function(e){return(10-e.substr(0,7).split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+t:e+3*t},0)%10)%10},i=function(e){function n(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),-1!==e.search(/^[0-9]{7}$/)&&(e+=a(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),t(n,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{8}$/)&&+this.data[7]===a(this.data)}},{key:"leftText",value:function(){return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var e=this.data.substr(0,4);return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"leftEncode",this).call(this,e,"LLLL")}},{key:"rightText",value:function(){return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var e=this.data.substr(4,4);return r(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"rightEncode",this).call(this,e,"RRRR")}}]),n}(o.default);return Ae.default=i,Ae}var Te,Me={};function Re(){if(Te)return Me;Te=1,Object.defineProperty(Me,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=ge(),r=o(Ce()),n=o($());function o(e){return e&&e.__esModule?e:{default:e}}var a=function(n){function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),e(o,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{5}$/)}},{key:"encode",value:function(){var e,n=t.EAN5_STRUCTURE[(e=this.data,e.split("").map(function(e){return+e}).reduce(function(e,t,r){return r%2?e+9*t:e+3*t},0)%10)];return{data:"1011"+(0,r.default)(this.data,n,"01"),text:this.text}}}]),o}(n.default);return Me.default=a,Me}var Le,Ie={};function De(){if(Le)return Ie;Le=1,Object.defineProperty(Ie,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=ge(),r=n(Ce());function n(e){return e&&e.__esModule?e:{default:e}}var o=function(n){function o(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),e(o,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{2}$/)}},{key:"encode",value:function(){var e=t.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,r.default)(this.data,e,"01"),text:this.text}}}]),o}(n($()).default);return Ie.default=o,Ie}var Ge,ze={};function Be(){if(Ge)return ze;Ge=1,Object.defineProperty(ze,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();ze.checksum=o;var t=r(Ce());function r(e){return e&&e.__esModule?e:{default:e}}var n=function(r){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),-1!==e.search(/^[0-9]{11}$/)&&(e+=o(e));var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));return r.displayValue=t.displayValue,t.fontSize>10*t.width?r.fontSize=10*t.width:r.fontSize=t.fontSize,r.guardHeight=t.height+r.fontSize/2+t.textMargin,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),e(n,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{12}$/)&&this.data[11]==o(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=(0,t.default)(this.data.substr(0,6),"LLLLLL"),e+="01010",e+=(0,t.default)(this.data.substr(6,6),"RRRRRR"),{data:e+="101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101"+(0,t.default)(this.data[0],"L"),options:{height:this.guardHeight}}),e.push({data:(0,t.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),e.push({data:"01010",options:{height:this.guardHeight}}),e.push({data:(0,t.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),e.push({data:(0,t.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),e}}]),n}(r($()).default);function o(e){var t,r=0;for(t=1;t<11;t+=2)r+=parseInt(e[t]);for(t=0;t<11;t+=2)r+=3*parseInt(e[t]);return(10-r%10)%10}return ze.default=n,ze}var Xe,He,Ue={};function Ve(){if(Xe)return Ue;Xe=1,Object.defineProperty(Ue,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),t=o(Ce()),r=o($()),n=Be();function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],s=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],l=function(r){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var r=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e,t));if(r.isValid=!1,-1!==e.search(/^[0-9]{6}$/))r.middleDigits=e,r.upcA=u(e,"0"),r.text=t.text||""+r.upcA[0]+e+r.upcA[r.upcA.length-1],r.isValid=!0;else{if(-1===e.search(/^[01][0-9]{7}$/))return a(r);if(r.middleDigits=e.substring(1,e.length-1),r.upcA=u(r.middleDigits,e[0]),r.upcA[r.upcA.length-1]!==e[e.length-1])return a(r);r.isValid=!0}return r.displayValue=t.displayValue,t.fontSize>10*t.width?r.fontSize=10*t.width:r.fontSize=t.fontSize,r.guardHeight=t.height+r.fontSize/2+t.textMargin,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r),e(n,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var e="";return e+="101",e+=this.encodeMiddleDigits(),{data:e+="010101",text:this.text}}},{key:"guardedEncoding",value:function(){var e=[];return this.displayValue&&e.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),e.push({data:"101",options:{height:this.guardHeight}}),e.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),e.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&e.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),e}},{key:"encodeMiddleDigits",value:function(){var e=this.upcA[0],r=this.upcA[this.upcA.length-1],n=s[parseInt(r)][parseInt(e)];return(0,t.default)(this.middleDigits,n)}}]),n}(r.default);function u(e,t){for(var r=parseInt(e[e.length-1]),o=i[r],a="",s=0,l=0;l<o.length;l++){var u=o[l];a+="X"===u?e[s++]:u}return""+(a=""+t+a)+(0,n.checksum)(a)}return Ue.default=l,Ue}var Fe,$e,qe={},We={},Ke={};function Qe(){if($e)return We;$e=1,Object.defineProperty(We,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=(Fe||(Fe=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.START_BIN="1010",Ke.END_BIN="11101",Ke.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"]),Ke),n=$();var o=function(e){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),t(n,[{key:"valid",value:function(){return-1!==this.data.search(/^([0-9]{2})+$/)}},{key:"encode",value:function(){var e=this,t=this.data.match(/.{2}/g).map(function(t){return e.encodePair(t)}).join("");return{data:r.START_BIN+t+r.END_BIN,text:this.text}}},{key:"encodePair",value:function(e){var t=r.BINARIES[e[1]];return r.BINARIES[e[0]].split("").map(function(e,r){return("1"===e?"111":"1")+("1"===t[r]?"000":"0")}).join("")}}]),n}(((e=n)&&e.__esModule?e:{default:e}).default);return We.default=o,We}var Ye,Je,Ze={};function et(){if(Ye)return Ze;Ye=1,Object.defineProperty(Ze,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Qe(),n=(e=r)&&e.__esModule?e:{default:e};var o=function(e){var t=e.substr(0,13).split("").map(function(e){return parseInt(e,10)}).reduce(function(e,t,r){return e+t*(3-r%2*2)},0);return 10*Math.ceil(t/10)-t},a=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),-1!==e.search(/^[0-9]{13}$/)&&(e+=o(e)),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]{14}$/)&&+this.data[13]===o(this.data)}}]),r}(n.default);return Ze.default=a,Ze}var tt,rt={},nt={};function ot(){if(tt)return nt;tt=1,Object.defineProperty(nt,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=$();var n=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"encode",value:function(){for(var e="110",t=0;t<this.data.length;t++){var r=parseInt(this.data[t]).toString(2);r=o(r,4-r.length);for(var n=0;n<r.length;n++)e+="0"==r[n]?"100":"110"}return{data:e+="1001",text:this.text}}},{key:"valid",value:function(){return-1!==this.data.search(/^[0-9]+$/)}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default);function o(e,t){for(var r=0;r<t;r++)e="0"+e;return e}return nt.default=n,nt}var at,it,st={},lt={};function ut(){if(at)return lt;return at=1,Object.defineProperty(lt,"__esModule",{value:!0}),lt.mod10=function(e){for(var t=0,r=0;r<e.length;r++){var n=parseInt(e[r]);(r+e.length)%2==0?t+=n:t+=2*n%10+Math.floor(2*n/10)}return(10-t%10)%10},lt.mod11=function(e){for(var t=0,r=[2,3,4,5,6,7],n=0;n<e.length;n++){var o=parseInt(e[e.length-1-n]);t+=r[n%r.length]*o}return(11-t%11)%11},lt}function ct(){if(it)return st;it=1,Object.defineProperty(st,"__esModule",{value:!0});var e,t=ot(),r=(e=t)&&e.__esModule?e:{default:e},n=ut();var o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,n.mod10)(e),r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);return st.default=o,st}var ft,dt={};function pt(){if(ft)return dt;ft=1,Object.defineProperty(dt,"__esModule",{value:!0});var e,t=ot(),r=(e=t)&&e.__esModule?e:{default:e},n=ut();var o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e+(0,n.mod11)(e),r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);return dt.default=o,dt}var ht,bt={};function vt(){if(ht)return bt;ht=1,Object.defineProperty(bt,"__esModule",{value:!0});var e,t=ot(),r=(e=t)&&e.__esModule?e:{default:e},n=ut();var o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,n.mod10)(e),e+=(0,n.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);return bt.default=o,bt}var xt,yt,mt={};function gt(){if(xt)return mt;xt=1,Object.defineProperty(mt,"__esModule",{value:!0});var e,t=ot(),r=(e=t)&&e.__esModule?e:{default:e},n=ut();var o=function(e){function t(e,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e+=(0,n.mod11)(e),e+=(0,n.mod10)(e),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t}(r.default);return mt.default=o,mt}var jt,_t={};function wt(){if(jt)return _t;jt=1,Object.defineProperty(_t,"__esModule",{value:!0}),_t.pharmacode=void 0;var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=$();var n=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t));return n.number=parseInt(e,10),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"encode",value:function(){for(var e=this.number,t="";!isNaN(e)&&0!=e;)e%2==0?(t="11100"+t,e=(e-2)/2):(t="100"+t,e=(e-1)/2);return{data:t=t.slice(0,-2),text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default);return _t.pharmacode=n,_t}var Ot,Et={};function Ct(){if(Ot)return Et;Ot=1,Object.defineProperty(Et,"__esModule",{value:!0}),Et.codabar=void 0;var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=$();var n=function(e){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),0===e.search(/^[0-9\-\$\:\.\+\/]+$/)&&(e="A"+e+"A");var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e.toUpperCase(),t));return n.text=n.options.text||n.text.replace(/[A-D]/g,""),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"valid",value:function(){return-1!==this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)}},{key:"encode",value:function(){for(var e=[],t=this.getEncodings(),r=0;r<this.data.length;r++)e.push(t[this.data.charAt(r)]),r!==this.data.length-1&&e.push("0");return{text:this.text,data:e.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default);return Et.codabar=n,Et}var Nt,St,Pt={};function At(){if(Nt)return Pt;Nt=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.GenericBarcode=void 0;var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=$();var n=function(e){function r(e,t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,e),t(r,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),r}(((e=r)&&e.__esModule?e:{default:e}).default);return Pt.GenericBarcode=n,Pt}function kt(){if(St)return U;St=1,Object.defineProperty(U,"__esModule",{value:!0});var e=q(),t=function(){if(pe)return Q;pe=1,Object.defineProperty(Q,"__esModule",{value:!0}),Q.CODE128C=Q.CODE128B=Q.CODE128A=Q.CODE128=void 0;var e=o(ae()),t=o(le()),r=o(fe()),n=o(be());function o(e){return e&&e.__esModule?e:{default:e}}return Q.CODE128=e.default,Q.CODE128A=t.default,Q.CODE128B=r.default,Q.CODE128C=n.default,Q}(),r=function(){if(He)return xe;He=1,Object.defineProperty(xe,"__esModule",{value:!0}),xe.UPCE=xe.UPC=xe.EAN2=xe.EAN5=xe.EAN8=xe.EAN13=void 0;var e=i(Se()),t=i(ke()),r=i(Re()),n=i(De()),o=i(Be()),a=i(Ve());function i(e){return e&&e.__esModule?e:{default:e}}return xe.EAN13=e.default,xe.EAN8=t.default,xe.EAN5=r.default,xe.EAN2=n.default,xe.UPC=o.default,xe.UPCE=a.default,xe}(),n=function(){if(Je)return qe;Je=1,Object.defineProperty(qe,"__esModule",{value:!0}),qe.ITF14=qe.ITF=void 0;var e=r(Qe()),t=r(et());function r(e){return e&&e.__esModule?e:{default:e}}return qe.ITF=e.default,qe.ITF14=t.default,qe}(),o=function(){if(yt)return rt;yt=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.MSI1110=rt.MSI1010=rt.MSI11=rt.MSI10=rt.MSI=void 0;var e=a(ot()),t=a(ct()),r=a(pt()),n=a(vt()),o=a(gt());function a(e){return e&&e.__esModule?e:{default:e}}return rt.MSI=e.default,rt.MSI10=t.default,rt.MSI11=r.default,rt.MSI1010=n.default,rt.MSI1110=o.default,rt}(),a=wt(),i=Ct(),s=At();return U.default={CODE39:e.CODE39,CODE128:t.CODE128,CODE128A:t.CODE128A,CODE128B:t.CODE128B,CODE128C:t.CODE128C,EAN13:r.EAN13,EAN8:r.EAN8,EAN5:r.EAN5,EAN2:r.EAN2,UPC:r.UPC,UPCE:r.UPCE,ITF14:n.ITF14,ITF:n.ITF,MSI:o.MSI,MSI10:o.MSI10,MSI11:o.MSI11,MSI1010:o.MSI1010,MSI1110:o.MSI1110,pharmacode:a.pharmacode,codabar:i.codabar,GenericBarcode:s.GenericBarcode},U}var Tt,Mt={};function Rt(){if(Tt)return Mt;Tt=1,Object.defineProperty(Mt,"__esModule",{value:!0});var e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e};return Mt.default=function(t,r){return e({},t,r)},Mt}var Lt,It={};var Dt,Gt={};var zt,Bt={},Xt={},Ht={};function Ut(){if(zt)return Ht;return zt=1,Object.defineProperty(Ht,"__esModule",{value:!0}),Ht.default=function(e){var t=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var r in t)t.hasOwnProperty(r)&&"string"==typeof e[r=t[r]]&&(e[r]=parseInt(e[r],10));"string"==typeof e.displayValue&&(e.displayValue="false"!=e.displayValue);return e},Ht}var Vt,Ft,$t={};function qt(){if(Vt)return $t;Vt=1,Object.defineProperty($t,"__esModule",{value:!0});return $t.default={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function(){}},$t}var Wt,Kt,Qt={},Yt={},Jt={};function Zt(){if(Wt)return Jt;Wt=1,Object.defineProperty(Jt,"__esModule",{value:!0}),Jt.getTotalWidthOfEncodings=Jt.calculateEncodingAttributes=Jt.getBarcodePadding=Jt.getEncodingHeight=Jt.getMaximumHeightOfEncodings=void 0;var e,t=Rt(),r=(e=t)&&e.__esModule?e:{default:e};function n(e,t){return t.height+(t.displayValue&&e.text.length>0?t.fontSize+t.textMargin:0)+t.marginTop+t.marginBottom}function o(e,t,r){if(r.displayValue&&t<e){if("center"==r.textAlign)return Math.floor((e-t)/2);if("left"==r.textAlign)return 0;if("right"==r.textAlign)return Math.floor(e-t)}return 0}function a(e,t,r){var n;if(r)n=r;else{if("undefined"==typeof document)return 0;n=document.createElement("canvas").getContext("2d")}n.font=t.fontOptions+" "+t.fontSize+"px "+t.font;var o=n.measureText(e);return o?o.width:0}return Jt.getMaximumHeightOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)e[r].height>t&&(t=e[r].height);return t},Jt.getEncodingHeight=n,Jt.getBarcodePadding=o,Jt.calculateEncodingAttributes=function(e,t,i){for(var s=0;s<e.length;s++){var l,u=e[s],c=(0,r.default)(t,u.options);l=c.displayValue?a(u.text,c,i):0;var f=u.data.length*c.width;u.width=Math.ceil(Math.max(l,f)),u.height=n(u,c),u.barcodePadding=o(l,f,c)}},Jt.getTotalWidthOfEncodings=function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r].width;return t},Jt}function er(){if(Kt)return Yt;Kt=1,Object.defineProperty(Yt,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Rt(),n=(e=r)&&e.__esModule?e:{default:e},o=Zt();var a=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.encodings=r,this.options=n}return t(e,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var e=0;e<this.encodings.length;e++){var t=(0,n.default)(this.options,this.encodings[e].options);this.drawCanvasBarcode(t,this.encodings[e]),this.drawCanvasText(t,this.encodings[e]),this.moveCanvasDrawing(this.encodings[e])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var e=this.canvas.getContext("2d");e.save(),(0,o.calculateEncodingAttributes)(this.encodings,this.options,e);var t=(0,o.getTotalWidthOfEncodings)(this.encodings),r=(0,o.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=t+this.options.marginLeft+this.options.marginRight,this.canvas.height=r,e.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(e.fillStyle=this.options.background,e.fillRect(0,0,this.canvas.width,this.canvas.height)),e.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(e,t){var r,n=this.canvas.getContext("2d"),o=t.data;r="top"==e.textPosition?e.marginTop+e.fontSize+e.textMargin:e.marginTop,n.fillStyle=e.lineColor;for(var a=0;a<o.length;a++){var i=a*e.width+t.barcodePadding;"1"===o[a]?n.fillRect(i,r,e.width,e.height):o[a]&&n.fillRect(i,r,e.width,e.height*o[a])}}},{key:"drawCanvasText",value:function(e,t){var r,n,o=this.canvas.getContext("2d"),a=e.fontOptions+" "+e.fontSize+"px "+e.font;e.displayValue&&(n="top"==e.textPosition?e.marginTop+e.fontSize-e.textMargin:e.height+e.textMargin+e.marginTop+e.fontSize,o.font=a,"left"==e.textAlign||t.barcodePadding>0?(r=0,o.textAlign="left"):"right"==e.textAlign?(r=t.width-1,o.textAlign="right"):(r=t.width/2,o.textAlign="center"),o.fillText(t.text,r,n))}},{key:"moveCanvasDrawing",value:function(e){this.canvas.getContext("2d").translate(e.width,0)}},{key:"restoreCanvas",value:function(){this.canvas.getContext("2d").restore()}}]),e}();return Yt.default=a,Yt}var tr,rr={};function nr(){if(tr)return rr;tr=1,Object.defineProperty(rr,"__esModule",{value:!0});var e,t=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),r=Rt(),n=(e=r)&&e.__esModule?e:{default:e},o=Zt();var a="http://www.w3.org/2000/svg",i=function(){function e(t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.svg=t,this.encodings=r,this.options=n,this.document=n.xmlDocument||document}return t(e,[{key:"render",value:function(){var e=this.options.marginLeft;this.prepareSVG();for(var t=0;t<this.encodings.length;t++){var r=this.encodings[t],o=(0,n.default)(this.options,r.options),a=this.createGroup(e,o.marginTop,this.svg);this.setGroupOptions(a,o),this.drawSvgBarcode(a,o,r),this.drawSVGText(a,o,r),e+=r.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,o.calculateEncodingAttributes)(this.encodings,this.options);var e=(0,o.getTotalWidthOfEncodings)(this.encodings),t=(0,o.getMaximumHeightOfEncodings)(this.encodings),r=e+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(r,t),this.options.background&&this.drawRect(0,0,r,t,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(e,t,r){var n,o=r.data;n="top"==t.textPosition?t.fontSize+t.textMargin:0;for(var a=0,i=0,s=0;s<o.length;s++)i=s*t.width+r.barcodePadding,"1"===o[s]?a++:a>0&&(this.drawRect(i-t.width*a,n,t.width*a,t.height,e),a=0);a>0&&this.drawRect(i-t.width*(a-1),n,t.width*a,t.height,e)}},{key:"drawSVGText",value:function(e,t,r){var n,o,i=this.document.createElementNS(a,"text");t.displayValue&&(i.setAttribute("style","font:"+t.fontOptions+" "+t.fontSize+"px "+t.font),o="top"==t.textPosition?t.fontSize-t.textMargin:t.height+t.textMargin+t.fontSize,"left"==t.textAlign||r.barcodePadding>0?(n=0,i.setAttribute("text-anchor","start")):"right"==t.textAlign?(n=r.width-1,i.setAttribute("text-anchor","end")):(n=r.width/2,i.setAttribute("text-anchor","middle")),i.setAttribute("x",n),i.setAttribute("y",o),i.appendChild(this.document.createTextNode(r.text)),e.appendChild(i))}},{key:"setSvgAttributes",value:function(e,t){var r=this.svg;r.setAttribute("width",e+"px"),r.setAttribute("height",t+"px"),r.setAttribute("x","0px"),r.setAttribute("y","0px"),r.setAttribute("viewBox","0 0 "+e+" "+t),r.setAttribute("xmlns",a),r.setAttribute("version","1.1"),r.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(e,t,r){var n=this.document.createElementNS(a,"g");return n.setAttribute("transform","translate("+e+", "+t+")"),r.appendChild(n),n}},{key:"setGroupOptions",value:function(e,t){e.setAttribute("style","fill:"+t.lineColor+";")}},{key:"drawRect",value:function(e,t,r,n,o){var i=this.document.createElementNS(a,"rect");return i.setAttribute("x",e),i.setAttribute("y",t),i.setAttribute("width",r),i.setAttribute("height",n),o.appendChild(i),i}}]),e}();return rr.default=i,rr}var or,ar,ir={};function sr(){if(or)return ir;or=1,Object.defineProperty(ir,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var t=function(){function t(e,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.object=e,this.encodings=r,this.options=n}return e(t,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),t}();return ir.default=t,ir}var lr,ur,cr={};function fr(){if(lr)return cr;function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}lr=1,Object.defineProperty(cr,"__esModule",{value:!0});var n=function(){function n(r,o){e(this,n);var a=t(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return a.name="InvalidInputException",a.symbology=r,a.input=o,a.message='"'+a.input+'" is not a valid input for '+a.symbology,a}return r(n,Error),n}(),o=function(){function n(){e(this,n);var r=t(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.name="InvalidElementException",r.message="Not supported type to render on",r}return r(n,Error),n}(),a=function(){function n(){e(this,n);var r=t(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return r.name="NoElementException",r.message="No element to render on.",r}return r(n,Error),n}();return cr.InvalidInputException=n,cr.InvalidElementException=o,cr.NoElementException=a,cr}function dr(){if(ur)return Bt;ur=1,Object.defineProperty(Bt,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t=function(){if(Ft)return Xt;Ft=1,Object.defineProperty(Xt,"__esModule",{value:!0});var e=r(Ut()),t=r(qt());function r(e){return e&&e.__esModule?e:{default:e}}return Xt.default=function(r){var n={};for(var o in t.default)t.default.hasOwnProperty(o)&&(r.hasAttribute("jsbarcode-"+o.toLowerCase())&&(n[o]=r.getAttribute("jsbarcode-"+o.toLowerCase())),r.hasAttribute("data-"+o.toLowerCase())&&(n[o]=r.getAttribute("data-"+o.toLowerCase())));return n.value=r.getAttribute("jsbarcode-value")||r.getAttribute("data-value"),(0,e.default)(n)},Xt}(),r=i(t),n=function(){if(ar)return Qt;ar=1,Object.defineProperty(Qt,"__esModule",{value:!0});var e=n(er()),t=n(nr()),r=n(sr());function n(e){return e&&e.__esModule?e:{default:e}}return Qt.default={CanvasRenderer:e.default,SVGRenderer:t.default,ObjectRenderer:r.default},Qt}(),o=i(n),a=fr();function i(e){return e&&e.__esModule?e:{default:e}}function s(t){if("string"==typeof t)return function(e){var t=document.querySelectorAll(e);if(0===t.length)return;for(var r=[],n=0;n<t.length;n++)r.push(s(t[n]));return r}(t);if(Array.isArray(t)){for(var n=[],i=0;i<t.length;i++)n.push(s(t[i]));return n}if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLImageElement)return l=t,{element:u=document.createElement("canvas"),options:(0,r.default)(l),renderer:o.default.CanvasRenderer,afterRender:function(){l.setAttribute("src",u.toDataURL())}};if(t&&t.nodeName&&"svg"===t.nodeName.toLowerCase()||"undefined"!=typeof SVGElement&&t instanceof SVGElement)return{element:t,options:(0,r.default)(t),renderer:o.default.SVGRenderer};if("undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement)return{element:t,options:(0,r.default)(t),renderer:o.default.CanvasRenderer};if(t&&t.getContext)return{element:t,renderer:o.default.CanvasRenderer};if(t&&"object"===(void 0===t?"undefined":e(t))&&!t.nodeName)return{element:t,renderer:o.default.ObjectRenderer};throw new a.InvalidElementException;var l,u}return Bt.default=s,Bt}var pr,hr,br,vr={};function xr(){if(pr)return vr;pr=1,Object.defineProperty(vr,"__esModule",{value:!0});var e=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var t=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=e}return e(t,[{key:"handleCatch",value:function(e){if("InvalidInputException"!==e.name)throw e;if(this.api._options.valid===this.api._defaults.valid)throw e.message;this.api._options.valid(!1),this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(e){try{var t=e.apply(void 0,arguments);return this.api._options.valid(!0),t}catch(r){return this.handleCatch(r),this.api}}}]),t}();return vr.default=t,vr}const yr=f(function(){if(br)return hr;br=1;var e=u(kt()),t=u(Rt()),r=u((Lt||(Lt=1,Object.defineProperty(It,"__esModule",{value:!0}),It.default=function(e){var t=[];return function e(r){if(Array.isArray(r))for(var n=0;n<r.length;n++)e(r[n]);else r.text=r.text||"",r.data=r.data||"",t.push(r)}(e),t}),It)),n=u((Dt||(Dt=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.default=function(e){return e.marginTop=e.marginTop||e.margin,e.marginBottom=e.marginBottom||e.margin,e.marginRight=e.marginRight||e.margin,e.marginLeft=e.marginLeft||e.margin,e}),Gt)),o=u(dr()),a=u(Ut()),i=u(xr()),s=fr(),l=u(qt());function u(e){return e&&e.__esModule?e:{default:e}}var c=function(){},f=function(e,t,r){var n=new c;if(void 0===e)throw Error("No element to render on was provided.");return n._renderProperties=(0,o.default)(e),n._encodings=[],n._options=l.default,n._errorHandler=new i.default(n),void 0!==t&&((r=r||{}).format||(r.format=b()),n.options(r)[r.format](t,r).render()),n};for(var d in f.getModule=function(t){return e.default[t]},e.default)e.default.hasOwnProperty(d)&&p(e.default,d);function p(e,r){c.prototype[r]=c.prototype[r.toUpperCase()]=c.prototype[r.toLowerCase()]=function(n,o){var i=this;return i._errorHandler.wrapBarcodeCall(function(){o.text=void 0===o.text?void 0:""+o.text;var s=(0,t.default)(i._options,o);s=(0,a.default)(s);var l=e[r],u=h(n,l,s);return i._encodings.push(u),i})}}function h(e,n,o){var a=new n(e=""+e,o);if(!a.valid())throw new s.InvalidInputException(a.constructor.name,e);var i=a.encode();i=(0,r.default)(i);for(var l=0;l<i.length;l++)i[l].options=(0,t.default)(o,i[l].options);return i}function b(){return e.default.CODE128?"CODE128":Object.keys(e.default)[0]}function v(e,o,a){o=(0,r.default)(o);for(var i=0;i<o.length;i++)o[i].options=(0,t.default)(a,o[i].options),(0,n.default)(o[i].options);(0,n.default)(a),new(0,e.renderer)(e.element,o,a).render(),e.afterRender&&e.afterRender()}return c.prototype.options=function(e){return this._options=(0,t.default)(this._options,e),this},c.prototype.blank=function(e){var t=new Array(e+1).join("0");return this._encodings.push({data:t}),this},c.prototype.init=function(){var r;if(this._renderProperties)for(var n in Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]),this._renderProperties){r=this._renderProperties[n];var o=(0,t.default)(this._options,r.options);"auto"==o.format&&(o.format=b()),this._errorHandler.wrapBarcodeCall(function(){var t=h(o.value,e.default[o.format.toUpperCase()],o);v(r,t,o)})}},c.prototype.render=function(){if(!this._renderProperties)throw new s.NoElementException;if(Array.isArray(this._renderProperties))for(var e=0;e<this._renderProperties.length;e++)v(this._renderProperties[e],this._encodings,this._options);else v(this._renderProperties,this._encodings,this._options);return this},c.prototype._defaults=l.default,"undefined"!=typeof window&&(window.JsBarcode=f),"undefined"!=typeof jQuery&&(jQuery.fn.JsBarcode=function(e,t){var r=[];return jQuery(this).each(function(){r.push(this)}),f(r,e,t)}),hr=f}()),mr=({value:e,className:t})=>{const r=d.useRef(null);return d.useEffect(()=>{if(r.current)try{yr(r.current,e,{format:"CODE128",width:2,height:30,displayValue:!0,fontSize:12,margin:0,background:"transparent"})}catch(t){console.error("Barcode error",t)}},[e]),h.jsx("svg",{ref:r,className:`w-full h-full max-w-full ${t}`})},gr=()=>{const[e,t]=d.useState([]),[r,n]=d.useState([]),[o,a]=d.useState("LIST"),[i,c]=d.useState(!1),[f,B]=d.useState(!1),[X,U]=d.useState(!1),[V,F]=d.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[$,q]=d.useState({isOpen:!1,title:"",message:"",type:"info"}),W=(e,t="Atenção",r="info")=>{q({isOpen:!0,message:e,title:t,type:r})},[K,Q]=d.useState([]),[Y,J]=d.useState(""),[Z,ee]=d.useState(1),[te,re]=d.useState(!1),[ne,oe]=d.useState({taxGroup:"A",unit:"UN",origin:"0"}),[ae,ie]=d.useState(null);d.useEffect(()=>{se()},[]);const se=()=>u(null,null,function*(){try{const[e,r]=yield Promise.all([p.getProducts(),p.getKardex()]);t(Array.isArray(e)?e:[]);const o=Array.isArray(r)?r:[];n(o.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()))}catch(e){console.error("Error refreshing inventory data:",e),t([]),n([])}}),le=(e,t)=>{t<1||Q(r=>r.map(r=>r.product.id===e?l(s({},r),{qty:t}):r))},ue=Y.length>0?e.filter(e=>e.name.toLowerCase().includes(Y.toLowerCase())||e.code.includes(Y)).slice(0,10):[],ce=K.flatMap(e=>Array(e.qty).fill(e.product));return h.jsxs("div",{className:"space-y-6",children:[h.jsx(b,{isOpen:V.isOpen,onClose:()=>F(e=>l(s({},e),{isOpen:!1})),onConfirm:V.onConfirm,title:V.title,message:V.message}),h.jsx(v,{isOpen:$.isOpen,onClose:()=>q(e=>l(s({},e),{isOpen:!1})),title:$.title,message:$.message,type:$.type}),h.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Controle de Estoque"}),h.jsx("p",{className:"text-slate-500",children:"Gerencie produtos e visualize o Kardex"})]}),h.jsxs("div",{className:"flex gap-2 flex-wrap",children:[h.jsxs("div",{className:"flex bg-white rounded-lg border border-slate-200 p-1",children:[h.jsx("button",{onClick:()=>a("LIST"),className:"px-4 py-1.5 rounded-md text-sm font-medium transition "+("LIST"===o?"bg-brand-100 text-brand-700":"text-slate-500 hover:text-slate-700"),children:"Produtos"}),h.jsx("button",{onClick:()=>a("KARDEX"),className:"px-4 py-1.5 rounded-md text-sm font-medium transition "+("KARDEX"===o?"bg-brand-100 text-brand-700":"text-slate-500 hover:text-slate-700"),children:"Kardex (Livro)"})]}),h.jsxs(x,{variant:"secondary",onClick:()=>{U(!0),re(!1)},children:[h.jsx(S,{size:18})," Etiquetas"]}),h.jsxs(x,{variant:"secondary",onClick:()=>B(!0),children:[h.jsx(O,{size:18})," Excel/CSV"]}),h.jsxs(x,{onClick:()=>c(!0),children:[h.jsx(P,{size:18})," Novo Produto"]})]})]}),"LIST"===o?h.jsxs(y,{className:"overflow-hidden p-0",children:[h.jsx("div",{className:"p-4 border-b border-slate-100 bg-slate-50 flex gap-4",children:h.jsxs("div",{className:"relative flex-1 max-w-md",children:[h.jsx(A,{className:"absolute left-3 top-2.5 text-slate-400",size:18}),h.jsx("input",{className:"w-full pl-10 pr-4 py-2 rounded-md border border-slate-300 text-sm focus:ring-2 focus:ring-brand-500 outline-none",placeholder:"Buscar por nome, EAN ou NCM..."})]})}),h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3",children:"Código"}),h.jsx("th",{className:"px-6 py-3",children:"Produto"}),h.jsx("th",{className:"px-6 py-3",children:"NCM"}),h.jsx("th",{className:"px-6 py-3 text-right",children:"Estoque"}),h.jsx("th",{className:"px-6 py-3 text-right",children:"Custo"}),h.jsx("th",{className:"px-6 py-3 text-right",children:"Venda"}),h.jsx("th",{className:"px-6 py-3",children:"Status"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:e.map(e=>h.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[h.jsx("td",{className:"px-6 py-4 font-mono text-slate-500",children:e.code}),h.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:e.name}),h.jsx("td",{className:"px-6 py-4 text-slate-500",children:e.ncm}),h.jsxs("td",{className:"px-6 py-4 text-right font-bold "+(e.stock<=e.minStock?"text-red-600":"text-slate-700"),children:[e.stock," ",e.unit]}),h.jsx("td",{className:"px-6 py-4 text-right text-slate-500",children:m(e.cost)}),h.jsx("td",{className:"px-6 py-4 text-right text-slate-900",children:m(e.price)}),h.jsx("td",{className:"px-6 py-4",children:e.stock<=e.minStock?h.jsx(g,{color:"bg-red-100 text-red-700",children:"Crítico"}):h.jsx(g,{color:"bg-emerald-100 text-emerald-700",children:"Ok"})})]},e.id))})]})})]}):h.jsx(y,{className:"overflow-hidden p-0",children:h.jsx("div",{className:"overflow-x-auto",children:h.jsxs("table",{className:"w-full text-sm text-left",children:[h.jsx("thead",{className:"text-xs text-slate-500 uppercase bg-slate-50 border-b border-slate-200",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3",children:"Data/Hora"}),h.jsx("th",{className:"px-6 py-3",children:"Produto"}),h.jsx("th",{className:"px-6 py-3",children:"Tipo"}),h.jsx("th",{className:"px-6 py-3",children:"Doc Ref."}),h.jsx("th",{className:"px-6 py-3 text-right",children:"Qtd Mov."}),h.jsx("th",{className:"px-6 py-3 text-right",children:"Saldo Final"})]})}),h.jsx("tbody",{className:"divide-y divide-slate-100",children:r.map(t=>{var r;const n=(null==(r=e.find(e=>e.id===t.productId))?void 0:r.name)||"Desconhecido",o=t.type===H.ENTRY||t.type===H.ADJUSTMENT&&t.quantity>0;return h.jsxs("tr",{className:"hover:bg-slate-50 transition",children:[h.jsx("td",{className:"px-6 py-4 text-slate-500",children:new Date(t.date).toLocaleString()}),h.jsx("td",{className:"px-6 py-4 font-medium text-slate-900",children:n}),h.jsx("td",{className:"px-6 py-4",children:h.jsxs("div",{className:"flex items-center gap-1 "+(o?"text-emerald-600":"text-red-600"),children:[o?h.jsx(R,{size:16}):h.jsx(M,{size:16}),h.jsx("span",{className:"font-bold",children:t.type})]})}),h.jsx("td",{className:"px-6 py-4 font-mono text-xs text-slate-500",children:t.documentRef||"-"}),h.jsxs("td",{className:"px-6 py-4 text-right font-bold "+(o?"text-emerald-600":"text-red-600"),children:[o?"+":"",t.quantity]}),h.jsx("td",{className:"px-6 py-4 text-right font-bold text-slate-900",children:t.balanceAfter})]},t.id)})})]})})}),f&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg p-6",children:[h.jsx("h3",{className:"text-xl font-bold mb-2",children:"Importar/Exportar Produtos"}),h.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Use planilhas (Excel/CSV) para gerenciar seu estoque em massa."}),h.jsxs("div",{className:"space-y-6",children:[h.jsxs("div",{className:"p-4 bg-slate-50 rounded-lg border border-slate-200",children:[h.jsxs("h4",{className:"font-bold text-slate-700 mb-2 flex items-center gap-2",children:[h.jsx(D,{size:18})," Exportar Dados"]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx(x,{variant:"secondary",onClick:()=>{E.downloadTemplate()},className:"text-sm w-full",children:"Baixar Modelo em Branco"}),h.jsx(x,{variant:"secondary",onClick:()=>{E.exportProducts(e)},className:"text-sm w-full",children:"Exportar Estoque Atual"})]})]}),h.jsxs("div",{className:"p-4 bg-brand-50 rounded-lg border border-brand-200",children:[h.jsxs("h4",{className:"font-bold text-brand-800 mb-2 flex items-center gap-2",children:[h.jsx(k,{size:18})," Importar Planilha"]}),h.jsx("p",{className:"text-xs text-brand-600 mb-3",children:"Selecione o arquivo .csv preenchido conforme o modelo. Produtos com códigos existentes serão atualizados."}),h.jsx("input",{type:"file",accept:".csv",onChange:e=>u(null,null,function*(){var t;const r=null==(t=e.target.files)?void 0:t[0];if(r){try{const e=yield E.parseCsv(r);e.length>0?F({isOpen:!0,title:"Importação de Dados",message:`Encontrados ${e.length} produtos. Deseja importar? \n(Códigos existentes serão atualizados)`,onConfirm:()=>u(null,null,function*(){const t=e.map(e=>l(s({},e),{id:e.id||crypto.randomUUID(),stock:e.stock||0}));try{yield p.saveProductsBatch(t),yield se(),B(!1),W("Importação concluída com sucesso!","Sucesso","success")}catch(r){W(r.message||"Erro ao importar produtos.","Erro","error")}})}):W("Nenhum produto válido encontrado no arquivo.","Erro","error")}catch(n){W("Erro ao processar arquivo. Verifique o formato.","Erro","error")}e.target.value=""}}),className:"block w-full text-sm text-slate-500\r\n                                file:mr-4 file:py-2 file:px-4\r\n                                file:rounded-full file:border-0\r\n                                file:text-sm file:font-semibold\r\n                                file:bg-brand-100 file:text-brand-700\r\n                                hover:file:bg-brand-200\r\n                            "})]})]}),h.jsx("div",{className:"mt-6 flex justify-end",children:h.jsx(x,{onClick:()=>B(!1),children:"Fechar"})})]})}),X&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-xl w-full max-w-6xl h-[90vh] flex flex-col shadow-2xl overflow-hidden",children:[h.jsxs("div",{className:"p-5 border-b border-slate-200 bg-slate-50 flex justify-between items-center shrink-0",children:[h.jsxs("div",{children:[h.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[h.jsx(S,{className:"text-brand-600"}),te?"Pré-visualização de Impressão":"Gerador de Etiquetas"]}),h.jsx("p",{className:"text-xs text-slate-500",children:te?"Verifique o layout antes de imprimir. Papel: 3 Colunas (33x21mm)":"Selecione os produtos para compor a fila de impressão."})]}),h.jsx("button",{onClick:()=>U(!1),className:"text-slate-400 hover:text-slate-600 transition p-2 hover:bg-slate-200 rounded-full",children:h.jsx(j,{size:24})})]}),h.jsx("div",{className:"flex-1 overflow-hidden relative",children:te?h.jsxs("div",{className:"h-full flex flex-col bg-slate-200",children:[h.jsx("div",{className:"flex-1 overflow-auto p-8 flex justify-center",children:h.jsxs("div",{className:"bg-white shadow-xl relative",style:{width:"105mm",minHeight:"100mm",paddingBottom:"20px"},children:[h.jsx("div",{className:"absolute top-0 left-0 bottom-0 w-[1px] bg-slate-100 border-l border-slate-200"}),h.jsx("div",{className:"absolute top-0 right-0 bottom-0 w-[1px] bg-slate-100 border-r border-slate-200"}),h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 33mm)",justifyContent:"start",padding:0,margin:0},children:ce.map((e,t)=>h.jsxs("div",{className:"relative border-b border-dashed border-slate-200 border-r",style:{width:"33mm",height:"21mm",padding:"1mm 2mm",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",overflow:"hidden"},children:[h.jsx("div",{className:"w-full text-center",children:h.jsx("p",{className:"text-[8px] font-bold leading-tight truncate w-full uppercase text-black",children:e.name.substring(0,18)})}),h.jsx("div",{className:"w-full text-center -mt-1",children:h.jsxs("p",{className:"text-[10px] font-black text-black",children:["R$ ",e.price.toFixed(2).replace(".",",")]})}),h.jsx("div",{className:"w-[95%] h-[12mm] flex items-center justify-center overflow-hidden",children:h.jsx(mr,{value:e.code})})]},`${e.id}-${t}`))})]})}),h.jsxs("div",{className:"p-4 bg-white border-t border-slate-300 flex justify-between items-center z-20",children:[h.jsxs(x,{variant:"secondary",onClick:()=>re(!1),className:"px-6",children:[h.jsx(L,{size:20})," Voltar e Editar"]}),h.jsxs("div",{className:"text-center text-sm text-slate-500",children:[h.jsxs("p",{className:"font-bold text-slate-700",children:[ce.length," Etiquetas"]}),h.jsxs("p",{children:["~",Math.ceil(ce.length/3)," Linhas de impressão"]})]}),h.jsxs(x,{onClick:()=>{window.print()},className:"px-8 py-3 bg-brand-700 hover:bg-brand-800 text-lg",children:[h.jsx(S,{size:20})," Imprimir Agora"]})]})]}):h.jsxs("div",{className:"flex h-full flex-col md:flex-row",children:[h.jsxs("div",{className:"w-full md:w-5/12 p-6 border-r border-slate-200 flex flex-col gap-6 bg-white z-10",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"Adicionar à Fila"}),h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsxs("div",{className:"w-24",children:[h.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Qtd"}),h.jsx("input",{type:"number",min:"1",value:Z,onChange:e=>ee(parseInt(e.target.value)||1),className:"w-full p-3 border border-slate-300 rounded-lg text-center font-bold text-slate-800 focus:ring-2 focus:ring-brand-500 outline-none"})]}),h.jsxs("div",{className:"flex-1 relative",children:[h.jsx("label",{className:"text-[10px] uppercase font-bold text-slate-400",children:"Buscar Produto (Nome ou EAN)"}),h.jsxs("div",{className:"relative",children:[h.jsx(A,{className:"absolute left-3 top-3.5 text-slate-400",size:18}),h.jsx("input",{value:Y,onChange:e=>J(e.target.value),className:"w-full pl-10 pr-4 py-3 rounded-lg border border-slate-300 focus:ring-2 focus:ring-brand-500 outline-none",placeholder:"Digite para buscar...",autoFocus:!0})]}),Y.length>0&&h.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white rounded-lg shadow-xl border border-slate-200 max-h-64 overflow-y-auto z-50",children:ue.length>0?ue.map(e=>h.jsxs("button",{onClick:()=>{return t=e,r=Z,Q(e=>{const n=e.findIndex(e=>e.product.id===t.id);if(n>=0){const t=[...e];return t[n].qty+=r,t}return[...e,{product:t,qty:r}]}),J(""),void ee(1);var t,r},className:"w-full text-left p-3 hover:bg-brand-50 border-b border-slate-50 last:border-none flex justify-between items-center transition group",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-bold text-sm text-slate-800 group-hover:text-brand-700",children:e.name}),h.jsxs("p",{className:"text-xs text-slate-400",children:[e.code," • ",m(e.price)]})]}),h.jsxs("div",{className:"flex items-center gap-2 text-brand-600 opacity-0 group-hover:opacity-100 transition",children:[h.jsxs("span",{className:"text-xs font-bold",children:["Adicionar ",Z,"x"]}),h.jsx(P,{size:18})]})]},e.id)):h.jsx("div",{className:"p-4 text-center text-slate-400 text-sm",children:"Nenhum produto encontrado."})})]})]}),h.jsx("p",{className:"text-xs text-slate-400",children:"Dica: Defina a quantidade primeiro, depois busque e clique no produto."})]}),h.jsxs("div",{className:"bg-brand-50 p-4 rounded-xl border border-brand-100 flex-1 flex flex-col items-center justify-center text-brand-800 opacity-70",children:[h.jsx(z,{size:48,className:"mb-2"}),h.jsx("p",{className:"text-center text-sm font-medium",children:"Selecione produtos ao lado para montar sua fila de impressão."})]})]}),h.jsxs("div",{className:"w-full md:w-7/12 bg-slate-50 flex flex-col",children:[h.jsxs("div",{className:"p-4 bg-white border-b border-slate-200 flex justify-between items-center shadow-sm",children:[h.jsxs("h4",{className:"font-bold text-slate-700 flex items-center gap-2",children:[h.jsx("span",{className:"bg-slate-800 text-white text-xs px-2 py-0.5 rounded-full",children:K.length}),"Itens na Fila"]}),h.jsx("button",{onClick:()=>Q([]),className:"text-xs text-red-500 hover:text-red-700 hover:underline",children:"Limpar Fila"})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:0===K.length?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-slate-400",children:[h.jsx(S,{size:48,className:"mb-4 opacity-20"}),h.jsx("p",{children:"Sua fila de impressão está vazia."})]}):K.map(e=>h.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm border border-slate-200 flex items-center justify-between group hover:border-brand-300 transition",children:[h.jsxs("div",{className:"flex items-center gap-3 overflow-hidden",children:[h.jsxs("div",{className:"w-8 h-8 bg-slate-100 rounded flex items-center justify-center text-slate-500 font-bold text-xs",children:[e.qty,"x"]}),h.jsxs("div",{className:"truncate",children:[h.jsx("p",{className:"font-bold text-sm text-slate-800 truncate",children:e.product.name}),h.jsx("p",{className:"text-[10px] text-slate-500 font-mono",children:e.product.code})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"flex items-center border border-slate-200 rounded-md bg-slate-50",children:[h.jsx("button",{onClick:()=>le(e.product.id,e.qty-1),className:"px-2 py-1 hover:bg-slate-200 text-slate-600",children:"-"}),h.jsx("input",{type:"number",min:"1",value:e.qty,onChange:t=>le(e.product.id,parseInt(t.target.value)||1),className:"w-10 text-center bg-transparent text-sm font-bold outline-none"}),h.jsx("button",{onClick:()=>le(e.product.id,e.qty+1),className:"px-2 py-1 hover:bg-slate-200 text-slate-600",children:"+"})]}),h.jsx("button",{onClick:()=>{return t=e.product.id,void Q(e=>e.filter(e=>e.product.id!==t));var t},className:"text-slate-400 hover:text-red-500 p-1 rounded transition",children:h.jsx(T,{size:16})})]})]},e.product.id))}),h.jsxs("div",{className:"p-4 bg-white border-t border-slate-200",children:[h.jsxs("div",{className:"flex justify-between text-sm text-slate-600 mb-4 bg-slate-50 p-3 rounded-lg border border-slate-100",children:[h.jsx("span",{children:"Total de Etiquetas:"}),h.jsx("span",{className:"font-bold text-lg text-brand-600",children:K.reduce((e,t)=>e+t.qty,0)})]}),h.jsxs(x,{onClick:()=>re(!0),disabled:0===K.length,className:"w-full py-3 text-lg font-bold shadow-lg shadow-brand-200",children:[h.jsx(G,{size:20})," Pré-visualizar Impressão"]})]})]})]})})]})}),C.createPortal(h.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 33mm)",width:"105mm",justifyContent:"start",backgroundColor:"white"},children:ce.map((e,t)=>h.jsxs("div",{style:{width:"33mm",height:"21mm",padding:"1mm 2mm",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"space-between",overflow:"hidden",boxSizing:"border-box",textAlign:"center",color:"black",backgroundColor:"white"},children:[h.jsx("div",{className:"w-full text-center",children:h.jsx("p",{style:{fontSize:"8px",fontWeight:"bold",margin:0,color:"black"},children:e.name.substring(0,18).toUpperCase()})}),h.jsx("div",{className:"w-full text-center",children:h.jsxs("p",{style:{fontSize:"10px",fontWeight:"900",margin:0,color:"black"},children:["R$ ",e.price.toFixed(2).replace(".",",")]})}),h.jsx("div",{style:{width:"95%",height:"12mm",display:"flex",alignItems:"center",justifyContent:"center"},children:h.jsx(mr,{value:e.code})})]},`${e.id}-${t}`))}),document.getElementById("printable-area")||document.body),i&&h.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[h.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between",children:[h.jsx("h3",{className:"text-xl font-bold",children:"Cadastro de Produto"}),h.jsx("button",{onClick:()=>c(!1),className:"text-slate-400 hover:text-slate-600",children:"✕"})]}),h.jsxs("div",{className:"p-6 space-y-4",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx(_,{label:"Código EAN/Barras",value:ne.code||"",onChange:e=>oe(l(s({},ne),{code:e.target.value})),placeholder:"789..."}),h.jsx(_,{label:"Nome do Produto",value:ne.name||"",onChange:e=>oe(l(s({},ne),{name:e.target.value}))})]}),h.jsxs("div",{className:"bg-slate-50 p-4 rounded-lg border border-slate-200 space-y-3",children:[h.jsxs("h4",{className:"text-xs font-bold text-slate-500 uppercase tracking-wider mb-2 flex items-center gap-1",children:[h.jsx(w,{size:14})," Dados Fiscais (NFC-e)"]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsx("div",{className:"flex justify-between items-end gap-2",children:h.jsx(_,{label:"NCM",value:ne.ncm||"",onChange:e=>oe(l(s({},ne),{ncm:e.target.value})),className:"flex-1"})}),h.jsx(_,{label:"CEST",value:ne.cest||"",onChange:e=>oe(l(s({},ne),{cest:e.target.value}))})]}),h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Origem da Mercadoria"}),h.jsxs("select",{className:"border border-slate-300 rounded-md p-2 text-sm bg-white",value:ne.origin,onChange:e=>oe(l(s({},ne),{origin:e.target.value})),children:[h.jsx("option",{value:"0",children:"0 - Nacional"}),h.jsx("option",{value:"1",children:"1 - Estrangeira (Imp. Direta)"}),h.jsx("option",{value:"2",children:"2 - Estrangeira (Adq. Mercado Interno)"}),h.jsxs("option",{value:"3",children:["3 - Nacional (Conteúdo Imp. ",">"," 40%)"]}),h.jsxs("option",{value:"5",children:["5 - Nacional (Conteúdo Imp. ","<="," 40%)"]})]})]}),h.jsxs("div",{className:"mt-2",children:[h.jsxs(x,{variant:"secondary",onClick:()=>u(null,null,function*(){if(ne.name&&ne.ncm){ie("Analisando...");const e=yield N.auditProduct(ne.name,ne.ncm);ie(e)}}),type:"button",className:"w-full text-xs py-1 h-8",children:[h.jsx(I,{size:14})," Auditar Dados Fiscais com IA"]}),ae&&"string"==typeof ae&&h.jsx("p",{className:"text-xs text-brand-600 mt-2 text-center",children:ae}),ae&&"object"==typeof ae&&h.jsxs("div",{className:"mt-2 text-sm p-2 rounded "+(ae.valid?"bg-emerald-100 text-emerald-800":"bg-red-100 text-red-800"),children:[h.jsx("span",{className:"font-bold",children:ae.valid?"NCM Válido!":"Atenção: NCM pode estar incorreto."}),h.jsx("p",{className:"mt-1 text-xs",children:ae.reason})]})]})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsx(_,{label:"Preço Custo",type:"number",value:ne.cost,onChange:e=>oe(l(s({},ne),{cost:parseFloat(e.target.value)}))}),h.jsx(_,{label:"Preço Venda",type:"number",value:ne.price,onChange:e=>oe(l(s({},ne),{price:parseFloat(e.target.value)}))}),h.jsx(_,{label:"Estoque Inicial",type:"number",value:ne.stock,onChange:e=>oe(l(s({},ne),{stock:parseFloat(e.target.value)}))})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Unidade"}),h.jsxs("select",{className:"border border-slate-300 rounded-md p-2",value:ne.unit,onChange:e=>oe(l(s({},ne),{unit:e.target.value})),children:[h.jsx("option",{value:"UN",children:"UN - Unidade"}),h.jsx("option",{value:"KG",children:"KG - Quilograma"}),h.jsx("option",{value:"L",children:"L - Litro"}),h.jsx("option",{value:"CX",children:"CX - Caixa"})]})]}),h.jsx(_,{label:"Estoque Mínimo",type:"number",value:ne.minStock,onChange:e=>oe(l(s({},ne),{minStock:parseFloat(e.target.value)}))}),h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("label",{className:"text-xs font-semibold text-slate-500 uppercase",children:"Grupo Tributário"}),h.jsxs("select",{className:"border border-slate-300 rounded-md p-2",value:ne.taxGroup,onChange:e=>oe(l(s({},ne),{taxGroup:e.target.value})),children:[h.jsx("option",{value:"A",children:"Grupo A - Tributado"}),h.jsx("option",{value:"B",children:"Grupo B - Isento"}),h.jsx("option",{value:"C",children:"Grupo C - Subst. Trib."})]})]})]})]}),h.jsxs("div",{className:"p-6 border-t border-slate-100 flex justify-end gap-3",children:[h.jsx(x,{variant:"secondary",onClick:()=>c(!1),children:"Cancelar"}),h.jsx(x,{onClick:()=>u(null,null,function*(){if(!ne.name||!ne.code)return;const e={id:crypto.randomUUID(),code:ne.code,name:ne.name,price:Number(ne.price||0),cost:Number(ne.cost||0),stock:Number(ne.stock||0),ncm:ne.ncm||"",cest:ne.cest||"",origin:ne.origin||"0",minStock:Number(ne.minStock||0),taxGroup:ne.taxGroup||"A",unit:ne.unit||"UN"};try{yield p.saveProduct(e),e.stock>0&&(yield p.updateStock(e.id,e.stock,H.ENTRY,"INIT","Estoque Inicial")),c(!1),oe({}),ie(null),yield se()}catch(t){W(t.message||"Erro ao salvar produto.","Erro","error")}}),children:"Salvar Produto"})]})]})})]})};export{gr as Inventory};
