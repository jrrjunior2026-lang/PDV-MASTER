import{c as e}from"./index-DbAfEtnp.js";
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t=e("file-spreadsheet",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),o=[{label:"CODIGO_BARRAS",key:"code"},{label:"NOME_PRODUTO",key:"name"},{label:"PRECO_VENDA",key:"price"},{label:"PRECO_CUSTO",key:"cost"},{label:"ESTOQUE_ATUAL",key:"stock"},{label:"ESTOQUE_MINIMO",key:"minStock"},{label:"UNIDADE",key:"unit"},{label:"NCM",key:"ncm"},{label:"CEST",key:"cest"},{label:"ORIGEM",key:"origin"},{label:"GRUPO_TRIB",key:"taxGroup"}],n={exportToCsv:(e,t,o)=>{if(0===e.length)return;const n="\ufeff"+[t.map(e=>e.label).join(";"),...e.map(e=>t.map(t=>{let o=e[t.key];return null==o&&(o=""),"number"==typeof o?o.toString().replace(".",","):"string"==typeof o?`"${o.replace(/"/g,'""')}"`:o}).join(";"))].join("\n"),r=new Blob([n],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(r),l=document.createElement("a");l.setAttribute("href",a),l.setAttribute("download",`${o}.csv`),document.body.appendChild(l),l.click(),document.body.removeChild(l)},exportProducts:e=>{const t="\ufeff"+[o.map(e=>e.label).join(";"),...e.map(e=>o.map(t=>{const o=e[t.key];return null==o?"":"number"==typeof o?o.toString().replace(".",","):String(o).replace(/;/g," ")}).join(";"))].join("\n"),n=new Blob([t],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(n),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download",`produtos_estoque_${(new Date).toISOString().split("T")[0]}.csv`),document.body.appendChild(a),a.click(),document.body.removeChild(a)},downloadTemplate:()=>{const e="\ufeff"+[o.map(e=>e.label).join(";"),"789000000000;PRODUTO EXEMPLO;10,00;5,00;100;10;UN;0000.00.00;00.000.00;0;A"].join("\n"),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),n=URL.createObjectURL(t),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download","modelo_importacao_produtos.csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r)},parseCsv:e=>{return t=null,n=null,r=function*(){return new Promise((t,n)=>{const r=new FileReader;r.onload=e=>{var n;const r=null==(n=e.target)?void 0:n.result;if(!r)return t([]);const a=r.split("\n").filter(e=>e.trim().length>0);if(a.length<2)return t([]);a[0].replace("\ufeff","").split(";").map(e=>e.trim().toUpperCase());const l=[];for(let t=1;t<a.length;t++){const e=a[t].split(";");if(e.length<o.length)continue;const n={id:crypto.randomUUID()};o.forEach((t,o)=>{var r;const a=null==(r=e[o])?void 0:r.trim();["price","cost","stock","minStock"].includes(t.key)?n[t.key]=parseFloat(a.replace(",","."))||0:n[t.key]=a}),n.code&&n.name&&l.push(n)}t(l)},r.onerror=()=>n("Erro ao ler arquivo"),r.readAsText(e,"UTF-8")})},new Promise((e,o)=>{var a=e=>{try{c(r.next(e))}catch(t){o(t)}},l=e=>{try{c(r.throw(e))}catch(t){o(t)}},c=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,l);c((r=r.apply(t,n)).next())});var t,n,r}};export{n as C,t as F};
