var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,l=(t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,i=(e,t)=>{for(var s in t||(t={}))a.call(t,s)&&l(e,s,t[s]);if(r)for(var s of r(t))n.call(t,s)&&l(e,s,t[s]);return e},o=(e,r)=>t(e,s(r)),c=(e,t,s)=>new Promise((r,a)=>{var n=e=>{try{i(s.next(e))}catch(t){a(t)}},l=e=>{try{i(s.throw(e))}catch(t){a(t)}},i=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,l);i((s=s.apply(e,t)).next())});import{c as d,g as u,r as x,S as h,A as m,j as p,P as f,f as g,b,d as N,L as v,H as w,e as j,X as y,h as k,F as C,Z as E,M as I,i as A}from"./index-CYhASfQ1.js";import{I as R,a as S}from"./apiService-CajUTdeo.js";import{U as T}from"./user-DqpxKpKg.js";import{S as M,C as P,T as O}from"./trash-2-Bol16Eao.js";import{L as D}from"./lock-COCEC9_y.js";import{C as L}from"./calendar-Dekr68OY.js";import{D as _}from"./dollar-sign-BRnAva-h.js";import{T as F}from"./trending-up-DfNt1vBr.js";import{P as z}from"./printer-C6ZcTGFR.js";
/**
 * @license lucide-react v0.555.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=d("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),U=d("chevrons-left",[["path",{d:"m11 17-5-5 5-5",key:"13zhaf"}],["path",{d:"m18 17-5-5 5-5",key:"h8a8et"}]]),V=d("circle-minus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}]]),H=d("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),$=d("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),Y=d("history",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),K=d("monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),G=d("octagon-alert",[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]]),q=d("refresh-ccw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),J=d("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Q=d("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),X={generatePayload:(e,t,s,r,a)=>{const n=t.substring(0,25).toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),l=s.substring(0,15).toUpperCase().normalize("NFD").replace(/[\u0300-\u036f]/g,""),i=a.toFixed(2),o=(e,t)=>`${e}${t.length.toString().padStart(2,"0")}${t}`;let c=o("00","01");const d=o("00","br.gov.bcb.pix"),u=o("01",e);c+=o("26",d+u),c+=o("52","0000"),c+=o("53","986"),c+=o("54",i),c+=o("58","BR"),c+=o("59",n),c+=o("60",l);const x=o("05",r||"***");c+=o("62",x),c+="6304";return c+X.calculateCRC16(c)},calculateCRC16:e=>{let t=65535;for(let s=0;s<e.length;s++){t^=e.charCodeAt(s)<<8;for(let e=0;e<8;e++)32768&t?t=t<<1^4129:t<<=1}return(65535&t).toString(16).toUpperCase().padStart(4,"0")}};var W,Z,ee={};var te,se={},re={};function ae(){if(te)return re;let e;te=1;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return re.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return 4*e+17},re.getSymbolTotalCodewords=function(e){return t[e]},re.getBCHDigit=function(e){let t=0;for(;0!==e;)t++,e>>>=1;return t},re.setToSJISFunction=function(t){if("function"!=typeof t)throw new Error('"toSJISFunc" is not a valid function.');e=t},re.isKanjiModeEnabled=function(){return void 0!==e},re.toSJIS=function(t){return e(t)},re}var ne,le,ie,oe,ce,de={};function ue(){return ne||(ne=1,(e=de).L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2},e.isValid=function(e){return e&&void 0!==e.bit&&e.bit>=0&&e.bit<4},e.from=function(t,s){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+t)}}(t)}catch(r){return s}}),de;var e}var xe,he={};var me,pe={};var fe,ge={};var be,Ne={};function ve(){if(be)return Ne;be=1;const e=ue(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],s=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Ne.getBlocksCount=function(s,r){switch(r){case e.L:return t[4*(s-1)+0];case e.M:return t[4*(s-1)+1];case e.Q:return t[4*(s-1)+2];case e.H:return t[4*(s-1)+3];default:return}},Ne.getTotalCodewordsCount=function(t,r){switch(r){case e.L:return s[4*(t-1)+0];case e.M:return s[4*(t-1)+1];case e.Q:return s[4*(t-1)+2];case e.H:return s[4*(t-1)+3];default:return}},Ne}var we,je,ye,ke,Ce={},Ee={};function Ie(){return je||(je=1,function(e){const t=function(){if(we)return Ee;we=1;const e=new Uint8Array(512),t=new Uint8Array(256);return function(){let s=1;for(let r=0;r<255;r++)e[r]=s,t[s]=r,s<<=1,256&s&&(s^=285);for(let t=255;t<512;t++)e[t]=e[t-255]}(),Ee.log=function(e){if(e<1)throw new Error("log("+e+")");return t[e]},Ee.exp=function(t){return e[t]},Ee.mul=function(s,r){return 0===s||0===r?0:e[t[s]+t[r]]},Ee}();e.mul=function(e,s){const r=new Uint8Array(e.length+s.length-1);for(let a=0;a<e.length;a++)for(let n=0;n<s.length;n++)r[a+n]^=t.mul(e[a],s[n]);return r},e.mod=function(e,s){let r=new Uint8Array(e);for(;r.length-s.length>=0;){const e=r[0];for(let n=0;n<s.length;n++)r[n]^=t.mul(s[n],e);let a=0;for(;a<r.length&&0===r[a];)a++;r=r.slice(a)}return r},e.generateECPolynomial=function(s){let r=new Uint8Array([1]);for(let a=0;a<s;a++)r=e.mul(r,new Uint8Array([1,t.exp(a)]));return r}}(Ce)),Ce}var Ae,Re={},Se={},Te={};function Me(){return Ae||(Ae=1,Te.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40}),Te}var Pe,Oe,De,Le={};function _e(){if(Pe)return Le;Pe=1;const e="[0-9]+";let t="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";t=t.replace(/u/g,"\\u");const s="(?:(?![A-Z0-9 $%*+\\-./:]|"+t+")(?:.|[\r\n]))+";Le.KANJI=new RegExp(t,"g"),Le.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),Le.BYTE=new RegExp(s,"g"),Le.NUMERIC=new RegExp(e,"g"),Le.ALPHANUMERIC=new RegExp("[A-Z $%*+\\-./:]+","g");const r=new RegExp("^"+t+"$"),a=new RegExp("^"+e+"$"),n=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return Le.testKanji=function(e){return r.test(e)},Le.testNumeric=function(e){return a.test(e)},Le.testAlphanumeric=function(e){return n.test(e)},Le}function Fe(){return Oe||(Oe=1,function(e){const t=Me(),s=_e();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(e,s){if(!e.ccBits)throw new Error("Invalid mode: "+e);if(!t.isValid(s))throw new Error("Invalid version: "+s);return s>=1&&s<10?e.ccBits[0]:s<27?e.ccBits[1]:e.ccBits[2]},e.getBestModeForData=function(t){return s.testNumeric(t)?e.NUMERIC:s.testAlphanumeric(t)?e.ALPHANUMERIC:s.testKanji(t)?e.KANJI:e.BYTE},e.toString=function(e){if(e&&e.id)return e.id;throw new Error("Invalid mode")},e.isValid=function(e){return e&&e.bit&&e.ccBits},e.from=function(t,s){if(e.isValid(t))return t;try{return function(t){if("string"!=typeof t)throw new Error("Param is not a string");switch(t.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+t)}}(t)}catch(r){return s}}}(Se)),Se}function ze(){return De||(De=1,function(e){const t=ae(),s=ve(),r=ue(),a=Fe(),n=Me(),l=t.getBCHDigit(7973);function i(e,t){return a.getCharCountIndicator(e,t)+4}function o(e,t){let s=0;return e.forEach(function(e){const r=i(e.mode,t);s+=r+e.getBitsLength()}),s}e.from=function(e,t){return n.isValid(e)?parseInt(e,10):t},e.getCapacity=function(e,r,l){if(!n.isValid(e))throw new Error("Invalid QR Code version");void 0===l&&(l=a.BYTE);const o=8*(t.getSymbolTotalCodewords(e)-s.getTotalCodewordsCount(e,r));if(l===a.MIXED)return o;const c=o-i(l,e);switch(l){case a.NUMERIC:return Math.floor(c/10*3);case a.ALPHANUMERIC:return Math.floor(c/11*2);case a.KANJI:return Math.floor(c/13);case a.BYTE:default:return Math.floor(c/8)}},e.getBestVersionForData=function(t,s){let n;const l=r.from(s,r.M);if(Array.isArray(t)){if(t.length>1)return function(t,s){for(let r=1;r<=40;r++)if(o(t,r)<=e.getCapacity(r,s,a.MIXED))return r}(t,l);if(0===t.length)return 1;n=t[0]}else n=t;return function(t,s,r){for(let a=1;a<=40;a++)if(s<=e.getCapacity(a,r,t))return a}(n.mode,n.getLength(),l)},e.getEncodedBits=function(e){if(!n.isValid(e)||e<7)throw new Error("Invalid QR Code version");let s=e<<12;for(;t.getBCHDigit(s)-l>=0;)s^=7973<<t.getBCHDigit(s)-l;return e<<12|s}}(Re)),Re}var Be,Ue={};var Ve,He,$e,Ye,Ke,Ge,qe,Je,Qe,Xe,We={};function Ze(){if(Je)return qe;Je=1;const e=Ge?Ke:(Ge=1,Ke=function(e){for(var t=[],s=e.length,r=0;r<s;r++){var a=e.charCodeAt(r);if(a>=55296&&a<=56319&&s>r+1){var n=e.charCodeAt(r+1);n>=56320&&n<=57343&&(a=1024*(a-55296)+n-56320+65536,r+=1)}a<128?t.push(a):a<2048?(t.push(a>>6|192),t.push(63&a|128)):a<55296||a>=57344&&a<65536?(t.push(a>>12|224),t.push(a>>6&63|128),t.push(63&a|128)):a>=65536&&a<=1114111?(t.push(a>>18|240),t.push(a>>12&63|128),t.push(a>>6&63|128),t.push(63&a|128)):t.push(239,191,189)}return new Uint8Array(t).buffer}),t=Fe();function s(s){this.mode=t.BYTE,"string"==typeof s&&(s=e(s)),this.data=new Uint8Array(s)}return s.getBitsLength=function(e){return 8*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){for(let t=0,s=this.data.length;t<s;t++)e.put(this.data[t],8)},qe=s}var et,tt,st,rt={exports:{}};function at(){return tt||(tt=1,function(e){const t=Fe(),s=function(){if(He)return Ve;He=1;const e=Fe();function t(t){this.mode=e.NUMERIC,this.data=t.toString()}return t.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(e){let t,s,r;for(t=0;t+3<=this.data.length;t+=3)s=this.data.substr(t,3),r=parseInt(s,10),e.put(r,10);const a=this.data.length-t;a>0&&(s=this.data.substr(t),r=parseInt(s,10),e.put(r,3*a+1))},Ve=t}(),r=function(){if(Ye)return $e;Ye=1;const e=Fe(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function s(t){this.mode=e.ALPHANUMERIC,this.data=t}return s.getBitsLength=function(e){return 11*Math.floor(e/2)+e%2*6},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let s;for(s=0;s+2<=this.data.length;s+=2){let r=45*t.indexOf(this.data[s]);r+=t.indexOf(this.data[s+1]),e.put(r,11)}this.data.length%2&&e.put(t.indexOf(this.data[s]),6)},$e=s}(),a=Ze(),n=function(){if(Xe)return Qe;Xe=1;const e=Fe(),t=ae();function s(t){this.mode=e.KANJI,this.data=t}return s.getBitsLength=function(e){return 13*e},s.prototype.getLength=function(){return this.data.length},s.prototype.getBitsLength=function(){return s.getBitsLength(this.data.length)},s.prototype.write=function(e){let s;for(s=0;s<this.data.length;s++){let r=t.toSJIS(this.data[s]);if(r>=33088&&r<=40956)r-=33088;else{if(!(r>=57408&&r<=60351))throw new Error("Invalid SJIS character: "+this.data[s]+"\nMake sure your charset is UTF-8");r-=49472}r=192*(r>>>8&255)+(255&r),e.put(r,13)}},Qe=s}(),l=_e(),i=ae(),o=function(){return et?rt.exports:(et=1,rt.exports=e={single_source_shortest_paths:function(t,s,r){var a={},n={};n[s]=0;var l,i,o,c,d,u,x,h=e.PriorityQueue.make();for(h.push(s,0);!h.empty();)for(o in i=(l=h.pop()).value,c=l.cost,d=t[i]||{})d.hasOwnProperty(o)&&(u=c+d[o],x=n[o],(void 0===n[o]||x>u)&&(n[o]=u,h.push(o,u),a[o]=i));if(void 0!==r&&void 0===n[r]){var m=["Could not find a path from ",s," to ",r,"."].join("");throw new Error(m)}return a},extract_shortest_path_from_predecessor_list:function(e,t){for(var s=[],r=t;r;)s.push(r),e[r],r=e[r];return s.reverse(),s},find_path:function(t,s,r){var a=e.single_source_shortest_paths(t,s,r);return e.extract_shortest_path_from_predecessor_list(a,r)},PriorityQueue:{make:function(t){var s,r=e.PriorityQueue,a={};for(s in t=t||{},r)r.hasOwnProperty(s)&&(a[s]=r[s]);return a.queue=[],a.sorter=t.sorter||r.default_sorter,a},default_sorter:function(e,t){return e.cost-t.cost},push:function(e,t){var s={value:e,cost:t};this.queue.push(s),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return 0===this.queue.length}}});var e}();function c(e){return unescape(encodeURIComponent(e)).length}function d(e,t,s){const r=[];let a;for(;null!==(a=e.exec(s));)r.push({data:a[0],index:a.index,mode:t,length:a[0].length});return r}function u(e){const s=d(l.NUMERIC,t.NUMERIC,e),r=d(l.ALPHANUMERIC,t.ALPHANUMERIC,e);let a,n;i.isKanjiModeEnabled()?(a=d(l.BYTE,t.BYTE,e),n=d(l.KANJI,t.KANJI,e)):(a=d(l.BYTE_KANJI,t.BYTE,e),n=[]);return s.concat(r,a,n).sort(function(e,t){return e.index-t.index}).map(function(e){return{data:e.data,mode:e.mode,length:e.length}})}function x(e,l){switch(l){case t.NUMERIC:return s.getBitsLength(e);case t.ALPHANUMERIC:return r.getBitsLength(e);case t.KANJI:return n.getBitsLength(e);case t.BYTE:return a.getBitsLength(e)}}function h(e,l){let o;const c=t.getBestModeForData(e);if(o=t.from(l,c),o!==t.BYTE&&o.bit<c.bit)throw new Error('"'+e+'" cannot be encoded with mode '+t.toString(o)+".\n Suggested mode is: "+t.toString(c));switch(o!==t.KANJI||i.isKanjiModeEnabled()||(o=t.BYTE),o){case t.NUMERIC:return new s(e);case t.ALPHANUMERIC:return new r(e);case t.KANJI:return new n(e);case t.BYTE:return new a(e)}}e.fromArray=function(e){return e.reduce(function(e,t){return"string"==typeof t?e.push(h(t,null)):t.data&&e.push(h(t.data,t.mode)),e},[])},e.fromString=function(s,r){const a=function(e){const s=[];for(let r=0;r<e.length;r++){const a=e[r];switch(a.mode){case t.NUMERIC:s.push([a,{data:a.data,mode:t.ALPHANUMERIC,length:a.length},{data:a.data,mode:t.BYTE,length:a.length}]);break;case t.ALPHANUMERIC:s.push([a,{data:a.data,mode:t.BYTE,length:a.length}]);break;case t.KANJI:s.push([a,{data:a.data,mode:t.BYTE,length:c(a.data)}]);break;case t.BYTE:s.push([{data:a.data,mode:t.BYTE,length:c(a.data)}])}}return s}(u(s,i.isKanjiModeEnabled())),n=function(e,s){const r={},a={start:{}};let n=["start"];for(let l=0;l<e.length;l++){const i=e[l],o=[];for(let e=0;e<i.length;e++){const c=i[e],d=""+l+e;o.push(d),r[d]={node:c,lastCount:0},a[d]={};for(let e=0;e<n.length;e++){const l=n[e];r[l]&&r[l].node.mode===c.mode?(a[l][d]=x(r[l].lastCount+c.length,c.mode)-x(r[l].lastCount,c.mode),r[l].lastCount+=c.length):(r[l]&&(r[l].lastCount=c.length),a[l][d]=x(c.length,c.mode)+4+t.getCharCountIndicator(c.mode,s))}}n=o}for(let t=0;t<n.length;t++)a[n[t]].end=0;return{map:a,table:r}}(a,r),l=o.find_path(n.map,"start","end"),d=[];for(let e=1;e<l.length-1;e++)d.push(n.table[l[e]].node);return e.fromArray(function(e){return e.reduce(function(e,t){const s=e.length-1>=0?e[e.length-1]:null;return s&&s.mode===t.mode?(e[e.length-1].data+=t.data,e):(e.push(t),e)},[])}(d))},e.rawSplit=function(t){return e.fromArray(u(t,i.isKanjiModeEnabled()))}}(We)),We}function nt(){if(st)return se;st=1;const e=ae(),t=ue(),s=function(){if(ie)return le;function e(){this.buffer=[],this.length=0}return ie=1,e.prototype={get:function(e){const t=Math.floor(e/8);return 1==(this.buffer[t]>>>7-e%8&1)},put:function(e,t){for(let s=0;s<t;s++)this.putBit(1==(e>>>t-s-1&1))},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},le=e}(),r=function(){if(ce)return oe;function e(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}return ce=1,e.prototype.set=function(e,t,s,r){const a=e*this.size+t;this.data[a]=s,r&&(this.reservedBit[a]=!0)},e.prototype.get=function(e,t){return this.data[e*this.size+t]},e.prototype.xor=function(e,t,s){this.data[e*this.size+t]^=s},e.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]},oe=e}(),a=(xe||(xe=1,function(e){const t=ae().getSymbolSize;e.getRowColCoords=function(e){if(1===e)return[];const s=Math.floor(e/7)+2,r=t(e),a=145===r?26:2*Math.ceil((r-13)/(2*s-2)),n=[r-7];for(let t=1;t<s-1;t++)n[t]=n[t-1]-a;return n.push(6),n.reverse()},e.getPositions=function(t){const s=[],r=e.getRowColCoords(t),a=r.length;for(let e=0;e<a;e++)for(let t=0;t<a;t++)0===e&&0===t||0===e&&t===a-1||e===a-1&&0===t||s.push([r[e],r[t]]);return s}}(he)),he),n=function(){if(me)return pe;me=1;const e=ae().getSymbolSize;return pe.getPositions=function(t){const s=e(t);return[[0,0],[s-7,0],[0,s-7]]},pe}(),l=(fe||(fe=1,function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t=3,s=3,r=40,a=10;function n(t,s,r){switch(t){case e.Patterns.PATTERN000:return(s+r)%2==0;case e.Patterns.PATTERN001:return s%2==0;case e.Patterns.PATTERN010:return r%3==0;case e.Patterns.PATTERN011:return(s+r)%3==0;case e.Patterns.PATTERN100:return(Math.floor(s/2)+Math.floor(r/3))%2==0;case e.Patterns.PATTERN101:return s*r%2+s*r%3==0;case e.Patterns.PATTERN110:return(s*r%2+s*r%3)%2==0;case e.Patterns.PATTERN111:return(s*r%3+(s+r)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}}e.isValid=function(e){return null!=e&&""!==e&&!isNaN(e)&&e>=0&&e<=7},e.from=function(t){return e.isValid(t)?parseInt(t,10):void 0},e.getPenaltyN1=function(e){const s=e.size;let r=0,a=0,n=0,l=null,i=null;for(let o=0;o<s;o++){a=n=0,l=i=null;for(let c=0;c<s;c++){let s=e.get(o,c);s===l?a++:(a>=5&&(r+=t+(a-5)),l=s,a=1),s=e.get(c,o),s===i?n++:(n>=5&&(r+=t+(n-5)),i=s,n=1)}a>=5&&(r+=t+(a-5)),n>=5&&(r+=t+(n-5))}return r},e.getPenaltyN2=function(e){const t=e.size;let r=0;for(let s=0;s<t-1;s++)for(let a=0;a<t-1;a++){const t=e.get(s,a)+e.get(s,a+1)+e.get(s+1,a)+e.get(s+1,a+1);4!==t&&0!==t||r++}return r*s},e.getPenaltyN3=function(e){const t=e.size;let s=0,a=0,n=0;for(let r=0;r<t;r++){a=n=0;for(let l=0;l<t;l++)a=a<<1&2047|e.get(r,l),l>=10&&(1488===a||93===a)&&s++,n=n<<1&2047|e.get(l,r),l>=10&&(1488===n||93===n)&&s++}return s*r},e.getPenaltyN4=function(e){let t=0;const s=e.data.length;for(let r=0;r<s;r++)t+=e.data[r];return Math.abs(Math.ceil(100*t/s/5)-10)*a},e.applyMask=function(e,t){const s=t.size;for(let r=0;r<s;r++)for(let a=0;a<s;a++)t.isReserved(a,r)||t.xor(a,r,n(e,a,r))},e.getBestMask=function(t,s){const r=Object.keys(e.Patterns).length;let a=0,n=1/0;for(let l=0;l<r;l++){s(l),e.applyMask(l,t);const r=e.getPenaltyN1(t)+e.getPenaltyN2(t)+e.getPenaltyN3(t)+e.getPenaltyN4(t);e.applyMask(l,t),r<n&&(n=r,a=l)}return a}}(ge)),ge),i=ve(),o=function(){if(ke)return ye;ke=1;const e=Ie();function t(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(t){this.degree=t,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const s=new Uint8Array(t.length+this.degree);s.set(t);const r=e.mod(s,this.genPoly),a=this.degree-r.length;if(a>0){const e=new Uint8Array(this.degree);return e.set(r,a),e}return r},ye=t}(),c=ze(),d=function(){if(Be)return Ue;Be=1;const e=ae(),t=e.getBCHDigit(1335);return Ue.getEncodedBits=function(s,r){const a=s.bit<<3|r;let n=a<<10;for(;e.getBCHDigit(n)-t>=0;)n^=1335<<e.getBCHDigit(n)-t;return 21522^(a<<10|n)},Ue}(),u=Fe(),x=at();function h(e,t,s){const r=e.size,a=d.getEncodedBits(t,s);let n,l;for(n=0;n<15;n++)l=1==(a>>n&1),n<6?e.set(n,8,l,!0):n<8?e.set(n+1,8,l,!0):e.set(r-15+n,8,l,!0),n<8?e.set(8,r-n-1,l,!0):n<9?e.set(8,15-n-1+1,l,!0):e.set(8,15-n-1,l,!0);e.set(r-8,8,1,!0)}function m(t,r,a){const n=new s;a.forEach(function(e){n.put(e.mode.bit,4),n.put(e.getLength(),u.getCharCountIndicator(e.mode,t)),e.write(n)});const l=8*(e.getSymbolTotalCodewords(t)-i.getTotalCodewordsCount(t,r));for(n.getLengthInBits()+4<=l&&n.put(0,4);n.getLengthInBits()%8!=0;)n.putBit(0);const c=(l-n.getLengthInBits())/8;for(let e=0;e<c;e++)n.put(e%2?17:236,8);return function(t,s,r){const a=e.getSymbolTotalCodewords(s),n=i.getTotalCodewordsCount(s,r),l=a-n,c=i.getBlocksCount(s,r),d=a%c,u=c-d,x=Math.floor(a/c),h=Math.floor(l/c),m=h+1,p=x-h,f=new o(p);let g=0;const b=new Array(c),N=new Array(c);let v=0;const w=new Uint8Array(t.buffer);for(let e=0;e<c;e++){const t=e<u?h:m;b[e]=w.slice(g,g+t),N[e]=f.encode(b[e]),g+=t,v=Math.max(v,t)}const j=new Uint8Array(a);let y,k,C=0;for(y=0;y<v;y++)for(k=0;k<c;k++)y<b[k].length&&(j[C++]=b[k][y]);for(y=0;y<p;y++)for(k=0;k<c;k++)j[C++]=N[k][y];return j}(n,t,r)}function p(t,s,i,o){let d;if(Array.isArray(t))d=x.fromArray(t);else{if("string"!=typeof t)throw new Error("Invalid data");{let e=s;if(!e){const s=x.rawSplit(t);e=c.getBestVersionForData(s,i)}d=x.fromString(t,e||40)}}const u=c.getBestVersionForData(d,i);if(!u)throw new Error("The amount of data is too big to be stored in a QR Code");if(s){if(s<u)throw new Error("\nThe chosen QR Code version cannot contain this amount of data.\nMinimum version required to store current data is: "+u+".\n")}else s=u;const p=m(s,i,d),f=e.getSymbolSize(s),g=new r(f);return function(e,t){const s=e.size,r=n.getPositions(t);for(let a=0;a<r.length;a++){const t=r[a][0],n=r[a][1];for(let r=-1;r<=7;r++)if(!(t+r<=-1||s<=t+r))for(let a=-1;a<=7;a++)n+a<=-1||s<=n+a||(r>=0&&r<=6&&(0===a||6===a)||a>=0&&a<=6&&(0===r||6===r)||r>=2&&r<=4&&a>=2&&a<=4?e.set(t+r,n+a,!0,!0):e.set(t+r,n+a,!1,!0))}}(g,s),function(e){const t=e.size;for(let s=8;s<t-8;s++){const t=s%2==0;e.set(s,6,t,!0),e.set(6,s,t,!0)}}(g),function(e,t){const s=a.getPositions(t);for(let r=0;r<s.length;r++){const t=s[r][0],a=s[r][1];for(let s=-2;s<=2;s++)for(let r=-2;r<=2;r++)-2===s||2===s||-2===r||2===r||0===s&&0===r?e.set(t+s,a+r,!0,!0):e.set(t+s,a+r,!1,!0)}}(g,s),h(g,i,0),s>=7&&function(e,t){const s=e.size,r=c.getEncodedBits(t);let a,n,l;for(let i=0;i<18;i++)a=Math.floor(i/3),n=i%3+s-8-3,l=1==(r>>i&1),e.set(a,n,l,!0),e.set(n,a,l,!0)}(g,s),function(e,t){const s=e.size;let r=-1,a=s-1,n=7,l=0;for(let i=s-1;i>0;i-=2)for(6===i&&i--;;){for(let s=0;s<2;s++)if(!e.isReserved(a,i-s)){let r=!1;l<t.length&&(r=1==(t[l]>>>n&1)),e.set(a,i-s,r),n--,-1===n&&(l++,n=7)}if(a+=r,a<0||s<=a){a-=r,r=-r;break}}}(g,p),isNaN(o)&&(o=l.getBestMask(g,h.bind(null,g,i))),l.applyMask(o,g),h(g,i,o),{modules:g,version:s,errorCorrectionLevel:i,maskPattern:o,segments:d}}return se.create=function(s,r){if(void 0===s||""===s)throw new Error("No input text");let a,n,i=t.M;return void 0!==r&&(i=t.from(r.errorCorrectionLevel,t.M),a=c.from(r.version),n=l.from(r.maskPattern),r.toSJISFunc&&e.setToSJISFunction(r.toSJISFunc)),p(s,a,i,n)},se}var lt,it,ot={},ct={};function dt(){return lt||(lt=1,function(e){function t(e){if("number"==typeof e&&(e=e.toString()),"string"!=typeof e)throw new Error("Color should be defined as hex string");let t=e.slice().replace("#","").split("");if(t.length<3||5===t.length||t.length>8)throw new Error("Invalid hex color: "+e);3!==t.length&&4!==t.length||(t=Array.prototype.concat.apply([],t.map(function(e){return[e,e]}))),6===t.length&&t.push("F","F");const s=parseInt(t.join(""),16);return{r:s>>24&255,g:s>>16&255,b:s>>8&255,a:255&s,hex:"#"+t.slice(0,6).join("")}}e.getOptions=function(e){e||(e={}),e.color||(e.color={});const s=void 0===e.margin||null===e.margin||e.margin<0?4:e.margin,r=e.width&&e.width>=21?e.width:void 0,a=e.scale||4;return{width:r,scale:r?4:a,margin:s,color:{dark:t(e.color.dark||"#000000ff"),light:t(e.color.light||"#ffffffff")},type:e.type,rendererOpts:e.rendererOpts||{}}},e.getScale=function(e,t){return t.width&&t.width>=e+2*t.margin?t.width/(e+2*t.margin):t.scale},e.getImageWidth=function(t,s){const r=e.getScale(t,s);return Math.floor((t+2*s.margin)*r)},e.qrToImageData=function(t,s,r){const a=s.modules.size,n=s.modules.data,l=e.getScale(a,r),i=Math.floor((a+2*r.margin)*l),o=r.margin*l,c=[r.color.light,r.color.dark];for(let e=0;e<i;e++)for(let s=0;s<i;s++){let d=4*(e*i+s),u=r.color.light;if(e>=o&&s>=o&&e<i-o&&s<i-o){u=c[n[Math.floor((e-o)/l)*a+Math.floor((s-o)/l)]?1:0]}t[d++]=u.r,t[d++]=u.g,t[d++]=u.b,t[d]=u.a}}}(ct)),ct}function ut(){return it||(it=1,function(e){const t=dt();e.render=function(e,s,r){let a=r,n=s;void 0!==a||s&&s.getContext||(a=s,s=void 0),s||(n=function(){try{return document.createElement("canvas")}catch(e){throw new Error("You need to specify a canvas element")}}()),a=t.getOptions(a);const l=t.getImageWidth(e.modules.size,a),i=n.getContext("2d"),o=i.createImageData(l,l);return t.qrToImageData(o.data,e,a),function(e,t,s){e.clearRect(0,0,t.width,t.height),t.style||(t.style={}),t.height=s,t.width=s,t.style.height=s+"px",t.style.width=s+"px"}(i,n,l),i.putImageData(o,0,0),n},e.renderToDataURL=function(t,s,r){let a=r;void 0!==a||s&&s.getContext||(a=s,s=void 0),a||(a={});const n=e.render(t,s,a),l=a.type||"image/png",i=a.rendererOpts||{};return n.toDataURL(l,i.quality)}}(ot)),ot}var xt,ht,mt={};function pt(){if(xt)return mt;xt=1;const e=dt();function t(e,t){const s=e.a/255,r=t+'="'+e.hex+'"';return s<1?r+" "+t+'-opacity="'+s.toFixed(2).slice(1)+'"':r}function s(e,t,s){let r=e+t;return void 0!==s&&(r+=" "+s),r}return mt.render=function(r,a,n){const l=e.getOptions(a),i=r.modules.size,o=r.modules.data,c=i+2*l.margin,d=l.color.light.a?"<path "+t(l.color.light,"fill")+' d="M0 0h'+c+"v"+c+'H0z"/>':"",u="<path "+t(l.color.dark,"stroke")+' d="'+function(e,t,r){let a="",n=0,l=!1,i=0;for(let o=0;o<e.length;o++){const c=Math.floor(o%t),d=Math.floor(o/t);c||l||(l=!0),e[o]?(i++,o>0&&c>0&&e[o-1]||(a+=l?s("M",c+r,.5+d+r):s("m",n,0),n=0,l=!1),c+1<t&&e[o+1]||(a+=s("h",i),i=0)):n++}return a}(o,i,l.margin)+'"/>',x='viewBox="0 0 '+c+" "+c+'"',h='<svg xmlns="http://www.w3.org/2000/svg" '+(l.width?'width="'+l.width+'" height="'+l.width+'" ':"")+x+' shape-rendering="crispEdges">'+d+u+"</svg>\n";return"function"==typeof n&&n(null,h),h},mt}const ft=u(function(){if(ht)return ee;ht=1;const e=Z?W:(Z=1,W=function(){return"function"==typeof Promise&&Promise.prototype&&Promise.prototype.then}),t=nt(),s=ut(),r=pt();function a(s,r,a,n,l){const i=[].slice.call(arguments,1),o=i.length,c="function"==typeof i[o-1];if(!c&&!e())throw new Error("Callback required as last argument");if(!c){if(o<1)throw new Error("Too few arguments provided");return 1===o?(a=r,r=n=void 0):2!==o||r.getContext||(n=a,a=r,r=void 0),new Promise(function(e,l){try{const l=t.create(a,n);e(s(l,r,n))}catch(i){l(i)}})}if(o<2)throw new Error("Too few arguments provided");2===o?(l=a,a=r,r=n=void 0):3===o&&(r.getContext&&void 0===l?(l=n,n=void 0):(l=n,n=a,a=r,r=void 0));try{const e=t.create(a,n);l(null,s(e,r,n))}catch(d){l(d)}}return ee.create=t.create,ee.toCanvas=a.bind(null,s.render),ee.toDataURL=a.bind(null,s.renderToDataURL),ee.toString=a.bind(null,function(e,t,s){return r.render(e,s)}),ee}()),gt=({cart:e,cartEndRef:t,logoUrl:s})=>p.jsxs("div",{className:"w-full md:w-1/2 bg-white flex flex-col border-r border-slate-200 relative shadow-2xl z-20 overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none z-0 overflow-hidden p-10",children:s?p.jsx("img",{src:s,alt:"Logo",className:"object-contain transition-all duration-700 ease-in-out "+(0===e.length?"opacity-20 w-full max-h-[60%] scale-100":"opacity-[0.03] w-1/2 max-h-[40%] grayscale scale-110")}):p.jsx("div",{className:"transition-all duration-700 "+(0===e.length?"opacity-10":"opacity-[0.02] scale-125"),children:p.jsx("div",{className:"w-80 h-80 bg-slate-100 rounded-full flex items-center justify-center text-slate-400",children:p.jsx(R,{size:160})})})}),0===e.length&&p.jsxs("div",{className:"absolute inset-0 z-10 flex flex-col items-center justify-center pb-10 pointer-events-none animate-fadeIn",children:[p.jsx("div",{className:"w-16 h-16 bg-blue-50 rounded-2xl flex items-center justify-center text-blue-500 mb-4 shadow-inner border border-blue-100/50",children:p.jsx(f,{size:32,className:"animate-pulse-subtle"})}),p.jsx("h1",{className:"text-3xl font-black text-slate-200 uppercase tracking-[0.2em] drop-shadow-sm",children:"Caixa Livre"}),p.jsx("p",{className:"text-slate-400 font-bold mt-2 tracking-widest uppercase text-[10px] opacity-50",children:"Aguardando primeiro item..."})]}),p.jsx("div",{className:"absolute inset-0 z-10 flex flex-col overflow-hidden min-h-0",children:e.length>0&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"grid grid-cols-12 text-[10px] font-black text-slate-400 border-b border-slate-100 py-4 px-6 bg-white/80 backdrop-blur-md uppercase tracking-[0.2em] shadow-sm shrink-0 z-30",children:[p.jsx("div",{className:"col-span-1",children:"#"}),p.jsx("div",{className:"col-span-7",children:"Descrição do Produto"}),p.jsx("div",{className:"col-span-4 text-right",children:"Subtotal"})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-6 space-y-2 min-h-0 bg-slate-50/30",children:[e.map((e,t)=>p.jsxs("div",{className:"grid grid-cols-12 items-center py-4 px-4 bg-white rounded-2xl border border-slate-100 shadow-sm hover:shadow-md hover:border-blue-100 transition-all duration-300 group animate-slideInRight",style:{animationDelay:.05*t+"s"},children:[p.jsx("div",{className:"col-span-1 text-slate-300 text-[10px] font-black font-mono",children:String(t+1).padStart(2,"0")}),p.jsxs("div",{className:"col-span-7 pr-4",children:[p.jsx("div",{className:"text-base font-black leading-tight text-slate-800 uppercase tracking-tight group-hover:text-blue-700 transition-colors",children:e.name}),p.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[p.jsxs("span",{className:"text-[10px] font-black bg-slate-100 text-slate-500 px-2 py-0.5 rounded uppercase tracking-tighter",children:[e.qty," ",e.unit]}),p.jsx("span",{className:"text-slate-300",children:"×"}),p.jsx("span",{className:"text-xs font-bold text-slate-400",children:g(e.price)}),p.jsx("span",{className:"text-slate-200 ml-auto font-mono text-[10px]",children:e.code})]})]}),p.jsx("div",{className:"col-span-4 text-right",children:p.jsx("div",{className:"text-lg font-black text-slate-900 tracking-tighter",children:g(e.total)})})]},e.id)),p.jsx("div",{ref:t,className:"h-10"})]}),p.jsx("div",{className:"p-6 bg-white border-t border-slate-100 shrink-0 z-30 shadow-[0_-10px_30px_rgba(0,0,0,0.02)]",children:p.jsxs("div",{className:"flex justify-between items-center",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Resumo da Compra"}),p.jsxs("span",{className:"text-slate-800 font-black text-xl",children:[e.length," ",1===e.length?"PRODUTO":"PRODUTOS"]})]}),p.jsx("div",{className:"flex items-center gap-3",children:p.jsx("div",{className:"w-10 h-10 bg-blue-50 rounded-xl flex items-center justify-center text-blue-600",children:p.jsx(f,{size:20})})})]})})]})})]}),bt=()=>{var e,t,s,r,a,n,l,d,u,R,W,Z,ee,te,se,re;const[ae,ne]=x.useState([]),[le,ie]=x.useState([]),[oe,ce]=x.useState(""),[de,ue]=x.useState([]),[xe,he]=x.useState(!1),[me,pe]=x.useState(!1),[fe,ge]=x.useState(null),[be,Ne]=x.useState(null),ve=(()=>{const[e,t]=x.useState([]),s=x.useRef(null),r=x.useMemo(()=>e.reduce((e,t)=>e+t.total,0),[e]);x.useEffect(()=>{var t;e.length>0&&(null==(t=s.current)||t.scrollIntoView({behavior:"smooth"}))},[e]);const a=x.useCallback(e=>{t(t=>t.find(t=>t.id===e.id)?t.map(t=>t.id===e.id?o(i({},t),{qty:t.qty+1,total:(t.qty+1)*t.price}):t):[...t,o(i({},e),{qty:1,total:e.price})])},[]),n=x.useCallback((e,s)=>{t(t=>t.map(t=>t.id===e?s<=0?null:o(i({},t),{qty:s,total:s*t.price}):t).filter(e=>null!==e))},[]),l=x.useCallback(()=>{t(e=>e.slice(0,-1))},[]),c=x.useCallback(()=>{t([])},[]);return{cart:e,cartEndRef:s,total:r,addToCart:a,updateItemQuantity:n,removeLastItem:l,clearCart:c}})(),we=(()=>{const[e,t]=x.useState(null),[s,r]=x.useState(null),[a,n]=x.useState("NONE"),[l,i]=x.useState(""),[o,d]=x.useState("SUPRIMENTO"),[u,p]=x.useState(""),[f,g]=x.useState(""),[b,N]=x.useState(null),[v,w]=x.useState(""),[j,y]=x.useState(null);x.useEffect(()=>{c(null,null,function*(){const e=h.getCurrentUser();if(!e)return;const s=yield h.getCurrentRegister(e.id);if(t(s),!s){const e=yield h.getLastClosedRegister();r(e),n("OPEN_BOX")}})},[]);const k=x.useCallback(()=>c(null,null,function*(){const e=parseFloat(l.replace(",","."));if(isNaN(e))return;const s=h.getCurrentUser();if(!s)return void console.error("No user logged in");const r=yield h.openRegister(e,s.id);t(r),n("NONE"),i("")}),[l]),C=x.useCallback(()=>c(null,null,function*(){const s=parseFloat(u.replace(",","."));if(isNaN(s)||!f)return;if(!e)return;const r="SUPRIMENTO"===o?"SUPPLY":"BLEED";yield h.addCashTransaction({id:crypto.randomUUID(),registerId:e.id,type:r,amount:s,description:f,date:(new Date).toISOString()}),m.log("CASH_OPERATION",`${o}: ${s.toFixed(2)}. Motivo: ${f}`,"SANGRIA"===o?"WARNING":"INFO");const a=h.getCurrentUser();if(a){const e=yield h.getCurrentRegister(a.id);t(e)}n("NONE"),p(""),g("")}),[u,f,o,e]),E=x.useCallback(e=>{d(e),p(""),g(""),n("GENERIC")},[]),I=x.useCallback(()=>{n("NONE")},[]),A=x.useCallback(()=>c(null,null,function*(){if(!e)return;const t=yield h.getRegisterSummary(e.id);N(t),w(""),n("CLOSE_BOX")}),[e]),R=x.useCallback(()=>c(null,null,function*(){if(!e)return null;const s=parseFloat(v.replace(",","."));if(isNaN(s))return null;yield h.closeRegister(e.id,s);const r=yield h.getLastClosedRegister();return r&&(y(r),t(null),n("NONE")),r}),[v,e]);return{register:e,lastClosedRegister:s,modal:a,openingBalance:l,genericType:o,genericValue:u,genericNote:f,closingSummary:b,closingCount:v,closedRegisterData:j,setModal:n,setOpeningBalance:i,setGenericValue:p,setGenericNote:g,setClosingCount:w,openRegister:k,handleGenericAction:C,openGenericModal:E,closeGenericModal:I,initiateCloseRegister:A,executeCloseRegister:R,resetAndPrepareForNewRegister:()=>c(null,null,function*(){y(null);const e=yield h.getLastClosedRegister();r(e),n("OPEN_BOX")}),closeRegister:A}})(),[je,ye]=x.useState("NONE"),[ke,Ce]=x.useState({isOpen:!1,title:"",message:"",onConfirm:()=>{}}),[Ee,Ie]=x.useState({isOpen:!1,title:"",message:"",type:"info"}),Ae=(e,t="Atenção",s="info")=>{Ie({isOpen:!0,message:e,title:t,type:s})},[Re,Se]=x.useState("METHODS"),[Te,Me]=x.useState(""),[Pe,Oe]=x.useState(null),[De,Le]=x.useState(null),[_e,Fe]=x.useState(""),[ze,Be]=x.useState("NFCE"),[Ue,Ve]=x.useState("SALE"),[He,$e]=x.useState(!1),Ye=x.useRef(null),Ke=x.useRef(null);x.useEffect(()=>{var e;c(null,null,function*(){const[e,t,s]=yield Promise.all([h.getProducts(),h.getCustomers(),h.getSettings()]);ne(e),ie(t),Ne(s)}),"NONE"===we.modal&&(null==(e=Ye.current)||e.focus());const t=setInterval(()=>{he(Math.random()>.95)},5e3);return()=>clearInterval(t)},[we.modal]),x.useEffect(()=>{var e;"PAYMENT"===je&&"CASH"===Re&&(null==(e=Ke.current)||e.focus())},[je,Re]),x.useEffect(()=>{if("PRINT_RECEIPT"===je&&De&&"SALE"===Ue){const e=`http://www.sefaz.gov.br/nfce/qrcode?p=${De.accessKey}|2|1|1|${De.total.toFixed(2).replace(".","")}|${De.date}`;ft.toDataURL(e,{width:150,margin:0}).then(Fe)}},[je,De,Ue]);const Ge=(e,t)=>c(null,null,function*(){if(0===ve.cart.length)return;const s=h.getCurrentUser();if(!s)return void Ae("Usuário não autenticado","Erro","error");if(!we.register)return void Ae("Caixa não está aberto","Erro","error");pe(!0);const r=`352410${Math.floor(1e14*Math.random())}550010000000011000000001`,a=yield h.createSale({id:crypto.randomUUID(),date:(new Date).toISOString(),items:ve.cart,total:ve.total,subtotal:ve.total,discount:0,paymentMethod:e,fiscalStatus:xe?"OFFLINE":"AUTHORIZED",operatorId:s.id,registerId:we.register.id,accessKey:r,customerId:null==fe?void 0:fe.id,amountPaid:null==t?void 0:t.paid,change:null==t?void 0:t.change});a&&(Le(a),ve.clearCart(),ge(null),pe(!1),Ve("SALE"),Se("METHODS"),Me(""),ye("PRINT_RECEIPT"),Oe(null),Be("NFCE"))}),qe=()=>{var e;ye("NONE"),Le(null),"CLOSING"===Ue?we.resetAndPrepareForNewRegister():null==(e=Ye.current)||e.focus()},Je=()=>c(null,null,function*(){(yield we.executeCloseRegister())?(Ve("CLOSING"),ye("PRINT_RECEIPT")):Ae("Informe o valor contado na gaveta.")});x.useEffect(()=>{const e=e=>{var t,s;if("NONE"===we.modal&&"NONE"===je&&!ke.isOpen&&!Ee.isOpen)switch(e.key){case"F1":e.preventDefault(),null==(t=Ye.current)||t.focus();break;case"F2":e.preventDefault(),ye("CUSTOMER");break;case"F5":e.preventDefault(),ve.cart.length>0&&(Se("METHODS"),Me(""),ye("PAYMENT"));break;case"F8":e.preventDefault(),(()=>{if(ve.cart.length>0){const e=ve.cart[ve.cart.length-1];Ce({isOpen:!0,title:"Cancelar Item",message:`Deseja remover o item "${e.name}" do carrinho?`,variant:"danger",onConfirm:()=>{m.log("ITEM_CANCEL",`Cancelou item: ${e.name} (R$ ${e.total.toFixed(2)})`,"WARNING"),ve.removeLastItem()}})}})();break;case"F10":e.preventDefault(),ye("MENU");break;case"Escape":e.preventDefault(),de.length>0?ue([]):null==(s=Ye.current)||s.focus()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[je,we.modal,ve.cart.length,de,ke.isOpen,Ee.isOpen]);const Qe=ve.cart[ve.cart.length-1],Xe=parseFloat(Te.replace(",","."))-ve.total;return be?p.jsxs("div",{className:"h-full flex flex-col bg-slate-900 text-slate-800 font-sans overflow-hidden",children:[p.jsx(b,{isOpen:ke.isOpen,onClose:()=>Ce(e=>o(i({},e),{isOpen:!1})),onConfirm:ke.onConfirm,title:ke.title,message:ke.message,variant:ke.variant}),p.jsx(N,{isOpen:Ee.isOpen,onClose:()=>Ie(e=>o(i({},e),{isOpen:!1})),title:Ee.title,message:Ee.message,type:Ee.type}),p.jsxs("header",{className:"h-14 bg-gradient-to-r from-blue-950 via-slate-900 to-blue-950 flex items-center justify-between px-6 shrink-0 z-30 shadow-xl border-b border-blue-800/50",children:[p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsx(v,{to:"/",className:"text-blue-300 hover:text-white transition-all transform hover:scale-110 active:scale-95",children:p.jsx(w,{size:22})}),p.jsx("div",{className:"h-6 w-[1px] bg-blue-800/50"}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("h1",{className:"font-black text-xs tracking-[0.2em] text-blue-100 uppercase drop-shadow-sm",children:(null==(e=null==be?void 0:be.company)?void 0:e.fantasyName)||"PDV MASTER"}),p.jsx("span",{className:"text-[9px] text-blue-400 font-bold tracking-wider uppercase",children:"Sistema de Gestão ERP"})]})]}),p.jsxs("div",{className:"flex items-center gap-6",children:[p.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest shadow-inner "+(xe?"bg-red-500/10 text-red-400 border border-red-500/20":"bg-emerald-500/10 text-emerald-400 border border-emerald-500/20"),children:[p.jsx("div",{className:"w-2 h-2 rounded-full "+(xe?"bg-red-500 animate-pulse":"bg-emerald-500")}),xe?"OFFLINE":"SISTEMA ONLINE"]}),p.jsxs("div",{className:"flex items-center gap-3 text-[11px] text-blue-200 font-mono bg-blue-900/30 px-3 py-1.5 rounded-lg border border-blue-800/30",children:[p.jsx("span",{className:"opacity-50",children:"CAIXA:"}),p.jsx("span",{className:"font-bold text-blue-100",children:(null==(t=we.register)?void 0:t.id.slice(0,4))||"FECHADO"}),p.jsx("div",{className:"w-[1px] h-3 bg-blue-800"}),p.jsx("span",{className:"opacity-50",children:"OP:"}),p.jsx("span",{className:"font-bold text-blue-100 uppercase",children:"ADMIN"})]})]})]}),p.jsxs("div",{className:"flex-1 flex flex-col md:flex-row overflow-hidden",children:[p.jsx(gt,{cart:ve.cart,cartEndRef:ve.cartEndRef,logoUrl:null==(s=null==be?void 0:be.appearance)?void 0:s.logoUrl}),p.jsxs("div",{className:"w-full md:w-1/2 flex flex-col bg-slate-50 relative border-l border-slate-300",children:[p.jsxs("div",{className:"h-16 bg-white/80 backdrop-blur-md border-b border-slate-200 flex items-center justify-between px-8 z-10 shadow-sm shrink-0",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"p-3 rounded-2xl shadow-sm transition-all duration-300 "+(fe?"bg-blue-600 text-white rotate-3":"bg-slate-100 text-slate-400"),children:p.jsx(T,{size:24})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black uppercase text-slate-400 tracking-[0.15em] mb-0.5",children:"Cliente Identificado"}),p.jsx("p",{className:"font-black text-xl leading-none truncate max-w-[250px] transition-colors "+(fe?"text-slate-800":"text-slate-300"),children:fe?fe.name:"CONSUMIDOR FINAL"})]})]}),p.jsxs("button",{onClick:()=>ye("CUSTOMER"),className:"group flex items-center gap-2 px-5 py-2.5 bg-slate-900 hover:bg-blue-600 text-white rounded-xl text-xs font-black uppercase tracking-widest transition-all shadow-lg hover:shadow-blue-200 active:scale-95",children:[p.jsx("span",{children:"Trocar"}),p.jsx("span",{className:"bg-white/20 px-1.5 py-0.5 rounded text-[10px] group-hover:bg-white/30",children:"F2"})]})]}),p.jsxs("div",{className:"flex-1 flex flex-col justify-center items-center p-6 z-10 relative overflow-hidden bg-gradient-to-b from-slate-50 to-white",children:[p.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-blue-50 rounded-full blur-[100px] opacity-50 pointer-events-none"}),p.jsxs("p",{className:"text-blue-600 font-black uppercase tracking-[0.3em] text-[9px] mb-4 flex items-center gap-3 self-center bg-blue-50 px-4 py-1.5 rounded-full border border-blue-100 shadow-sm",children:[p.jsx(K,{size:14,className:"animate-pulse"})," Último Registro"]}),Qe?p.jsxs("div",{className:"animate-slideInRight w-full max-w-2xl text-center relative z-10",children:[p.jsx("h1",{className:"text-3xl md:text-4xl font-black text-slate-900 leading-tight mb-4 drop-shadow-sm uppercase break-words line-clamp-2 py-2 px-4 tracking-tight",children:Qe.name}),p.jsxs("div",{className:"flex items-center justify-center gap-8 border-t border-slate-100 pt-6",children:[p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-slate-400 text-[9px] font-black uppercase tracking-[0.2em] mb-1",children:"Unitário"}),p.jsx("p",{className:"text-2xl font-bold text-slate-500",children:g(Qe.price)})]}),p.jsx("div",{className:"w-[1px] h-10 bg-slate-100"}),p.jsxs("div",{className:"text-center",children:[p.jsx("p",{className:"text-blue-400 text-[9px] font-black uppercase tracking-[0.2em] mb-1",children:"Total Item"}),p.jsx("p",{className:"text-5xl font-black text-blue-600 tracking-tighter drop-shadow-md",children:g(Qe.total)})]})]})]}):p.jsxs("div",{className:"text-center opacity-10 select-none",children:[p.jsx("h1",{className:"text-6xl md:text-[8rem] font-black text-slate-900 uppercase tracking-tighter leading-none",children:"LIVRE"}),p.jsx("p",{className:"text-xl font-bold tracking-[1em] mt-2",children:"AGUARDANDO PRODUTO"})]})]}),p.jsx("div",{className:"px-6 pb-6 pt-2 z-20 shrink-0 w-full max-w-5xl mx-auto",children:p.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),!oe.trim())return;const t=ae.find(e=>e.code===oe);if(t)return ve.addToCart(t),ce(""),void ue([]);if(1===de.length)return ve.addToCart(de[0]),ce(""),void ue([]);const s=ae.find(e=>e.name.toLowerCase().includes(oe.toLowerCase()));if(s)return ve.addToCart(s),ce(""),void ue([]);Ae("Produto não encontrado!"),ce(""),ue([])},className:"relative group",children:[p.jsx("div",{className:"absolute inset-y-0 left-0 pl-6 flex items-center pointer-events-none",children:p.jsx(M,{className:"text-blue-500 group-focus-within:text-blue-600 transition-colors",size:24})}),p.jsx("input",{ref:Ye,value:oe,onChange:e=>{const t=e.target.value;if(ce(t),t.trim().length>0){const e=ae.filter(e=>e.name.toLowerCase().includes(t.toLowerCase())||e.code.includes(t)).slice(0,6);ue(e)}else ue([])},className:"block w-full pl-14 pr-6 py-4 border-2 border-slate-200 rounded-2xl leading-5 bg-white placeholder-slate-300 focus:outline-none focus:border-blue-500 focus:ring-8 focus:ring-blue-500/10 text-xl font-black transition-all shadow-2xl group-hover:border-slate-300",placeholder:"Digitar código ou nome (F1)",autoComplete:"off"}),p.jsx("div",{className:"absolute inset-y-0 right-0 pr-6 flex items-center",children:p.jsxs("kbd",{className:"hidden sm:inline-flex items-center gap-1 bg-slate-50 border border-slate-200 rounded-lg px-3 py-1.5 text-xs font-black text-slate-400 shadow-sm uppercase tracking-tighter",children:["Enter ",p.jsx(B,{size:12})]})}),de.length>0&&p.jsxs("div",{className:"absolute bottom-full left-0 w-full mb-4 bg-white/95 backdrop-blur-xl rounded-2xl shadow-[0_20px_50px_rgba(0,0,0,0.2)] border border-slate-200 overflow-hidden z-50 animate-fadeInUp origin-bottom",children:[p.jsxs("div",{className:"bg-slate-900 px-6 py-3 text-[10px] font-black text-white uppercase flex justify-between tracking-widest",children:[p.jsx("span",{children:"Produtos Sugeridos"}),p.jsx("span",{className:"opacity-50",children:"Selecione para adicionar"})]}),p.jsx("div",{className:"max-h-[400px] overflow-y-auto custom-scrollbar",children:de.map((e,t)=>p.jsxs("button",{type:"button",onClick:()=>{return t=e,ve.addToCart(t),ce(""),ue([]),void(null==(s=Ye.current)||s.focus());var t,s},className:"w-full text-left px-6 py-4 border-b border-slate-100 last:border-0 hover:bg-blue-50 hover:pl-8 transition-all duration-300 group flex justify-between items-center "+(0===t?"bg-blue-50/30":""),children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:bg-white group-hover:text-blue-600 group-hover:shadow-md transition-all duration-300",children:p.jsx(f,{size:24})}),p.jsxs("div",{children:[p.jsx("p",{className:"font-black text-slate-800 text-lg leading-tight group-hover:text-blue-700",children:e.name}),p.jsx("p",{className:"text-xs text-slate-400 font-mono mt-1 tracking-wider",children:e.code})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsx("p",{className:"font-black text-slate-900 text-xl group-hover:text-blue-600",children:g(e.price)}),p.jsxs("div",{className:"flex items-center justify-end gap-1.5 mt-1",children:[p.jsx("div",{className:"w-1.5 h-1.5 rounded-full "+(e.stock<=e.minStock?"bg-red-500 animate-pulse":"bg-emerald-500")}),p.jsxs("p",{className:"text-[10px] font-black uppercase tracking-tighter "+(e.stock<=e.minStock?"text-red-500":"text-emerald-600"),children:["Estoque: ",e.stock]})]})]})]},e.id))})]})]})}),p.jsxs("div",{className:"bg-slate-900 p-6 z-20 text-white shadow-[0_-10px_40px_rgba(0,0,0,0.3)] shrink-0 border-t border-white/5",children:[p.jsxs("div",{className:"flex justify-between items-center mb-4",children:[p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-blue-400 font-black uppercase tracking-[0.3em] text-[9px] mb-1",children:"Total a Pagar"}),p.jsxs("span",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-widest",children:[ve.cart.length," Itens no carrinho"]})]}),p.jsx("div",{className:"text-5xl font-black tracking-tighter text-white drop-shadow-2xl",children:g(ve.total)})]}),p.jsxs("button",{disabled:0===ve.cart.length,onClick:()=>{Se("METHODS"),Me(""),ye("PAYMENT")},className:"w-full py-4 bg-emerald-500 hover:bg-emerald-400 disabled:opacity-20 disabled:grayscale disabled:cursor-not-allowed text-white text-2xl font-black uppercase tracking-widest rounded-2xl shadow-[0_10px_30px_rgba(16,185,129,0.3)] transition-all transform hover:-translate-y-1 active:scale-[0.98] flex items-center justify-center gap-4 group",children:[p.jsx("span",{children:"Finalizar Venda"}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx("span",{className:"bg-white/20 px-2 py-1 rounded text-[10px] group-hover:bg-white/30 transition-colors",children:"F5"}),p.jsx(B,{size:24,strokeWidth:3,className:"group-hover:translate-x-1 transition-transform"})]})]})]})]})]}),p.jsx("div",{className:"bg-slate-900 border-t border-white/5 py-2 flex justify-center gap-8 text-[9px] uppercase font-black text-slate-400 tracking-[0.2em] shrink-0 overflow-x-auto",children:[{k:"F1",l:"Busca"},{k:"F2",l:"Cliente"},{k:"F5",l:"Pagamento"},{k:"F8",l:"Cancelar Item"},{k:"F10",l:"Menu"},{k:"ESC",l:"Voltar"}].map(e=>p.jsxs("button",{className:"flex items-center gap-3 cursor-pointer hover:text-white transition-all transform hover:scale-105 active:scale-95 whitespace-nowrap group",onClick:()=>{const t="Busca"===e.k?"F1":"Voltar"===e.k?"Escape":e.k.split(" ")[0];window.dispatchEvent(new KeyboardEvent("keydown",{key:t}))},children:[p.jsx("span",{className:"bg-white/10 border border-white/10 px-2 py-0.5 rounded-lg text-blue-400 font-black shadow-lg group-hover:bg-blue-600 group-hover:text-white transition-colors",children:e.k}),p.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:e.l})]},e.k))}),"OPEN_BOX"===we.modal&&p.jsx("div",{className:"fixed inset-0 bg-slate-950/80 z-50 flex items-center justify-center backdrop-blur-xl animate-fadeIn",children:p.jsxs("div",{className:"bg-white rounded-[2.5rem] w-full max-w-xl shadow-[0_30px_100px_rgba(0,0,0,0.4)] animate-scaleIn overflow-hidden border border-white/20",children:[p.jsxs("div",{className:"bg-slate-50/50 p-10 border-b border-slate-100 flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-5",children:[p.jsx("div",{className:"p-4 bg-blue-600 rounded-3xl text-white shadow-lg shadow-blue-200 rotate-3",children:p.jsx(D,{size:28})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Abertura de Caixa"}),p.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Inicie seu turno de trabalho"})]})]}),p.jsxs("div",{className:"text-right",children:[p.jsxs("p",{className:"text-sm font-black text-slate-700 flex items-center justify-end gap-2",children:[p.jsx(L,{size:16,className:"text-blue-500"})," ",(new Date).toLocaleDateString()]}),p.jsxs("p",{className:"text-xs text-slate-400 font-bold flex items-center justify-end gap-2 mt-1",children:[p.jsx(j,{size:14})," ",(new Date).toLocaleTimeString().slice(0,5)]})]})]}),p.jsxs("div",{className:"p-12",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-6 mb-10",children:[p.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 shadow-inner",children:[p.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mb-2",children:"Operador"}),p.jsxs("p",{className:"font-black text-slate-800 flex items-center gap-2 text-lg",children:[p.jsx(T,{size:20,className:"text-blue-500"})," ",(null==(r=h.getCurrentUser())?void 0:r.name)||"ADMIN"]})]}),p.jsxs("div",{className:"bg-slate-50 p-6 rounded-3xl border border-slate-100 shadow-inner",children:[p.jsx("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mb-2",children:"Saldo Anterior"}),p.jsxs("p",{className:"font-black flex items-center gap-2 text-lg "+(we.lastClosedRegister?"text-slate-800":"text-slate-300 italic"),children:[p.jsx(_,{size:20,className:"text-emerald-500"}),we.lastClosedRegister?g(we.lastClosedRegister.finalCount||0):"N/A"]})]})]}),p.jsxs("div",{className:"mb-12",children:[p.jsx("label",{className:"block text-slate-400 font-black mb-4 text-[10px] uppercase tracking-[0.3em] text-center",children:"Informe o Fundo de Troco (R$)"}),p.jsxs("div",{className:"relative max-w-xs mx-auto",children:[p.jsx("input",{autoFocus:!0,type:"number",value:we.openingBalance,onChange:e=>we.setOpeningBalance(e.target.value),className:"w-full text-center text-5xl py-6 font-black border-none bg-slate-50 focus:ring-0 text-slate-900 rounded-[2rem] shadow-inner placeholder-slate-200",placeholder:"0,00"}),p.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-24 h-1 bg-blue-500 rounded-full shadow-[0_0_15px_rgba(59,130,246,0.5)]"})]})]}),p.jsx("button",{onClick:we.openRegister,className:"w-full py-6 text-xl font-black shadow-2xl bg-slate-900 hover:bg-blue-600 text-white rounded-3xl transition-all transform hover:-translate-y-1 active:scale-95 uppercase tracking-widest",children:"Confirmar Abertura"}),p.jsx("div",{className:"mt-8 text-center",children:p.jsx(v,{to:"/",className:"text-slate-400 hover:text-blue-600 text-[10px] font-black uppercase tracking-[0.2em] transition-colors",children:"Voltar ao Dashboard"})})]})]})}),"CLOSE_BOX"===we.modal&&we.closingSummary&&p.jsx("div",{className:"fixed inset-0 bg-slate-950/90 z-50 flex items-center justify-center p-6 backdrop-blur-xl animate-fadeIn",children:p.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-xl shadow-[0_50px_150px_rgba(0,0,0,0.5)] animate-scaleIn overflow-hidden border border-white/20",children:[p.jsxs("div",{className:"bg-slate-50/50 p-10 border-b border-slate-100 flex justify-between items-center",children:[p.jsxs("div",{className:"flex items-center gap-5",children:[p.jsx("div",{className:"p-4 bg-red-600 rounded-3xl text-white shadow-lg shadow-red-200 rotate-3",children:p.jsx(G,{size:28})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:"Fechamento de Caixa"}),p.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Encerramento do turno"})]})]}),p.jsx("button",{onClick:()=>we.setModal("NONE"),className:"p-3 hover:bg-white rounded-2xl transition-colors text-slate-400 hover:text-slate-900 shadow-sm",children:p.jsx(y,{size:24})})]}),p.jsxs("div",{className:"p-12",children:[p.jsxs("div",{className:"space-y-4 mb-10",children:[p.jsxs("div",{className:"flex justify-between items-center bg-slate-50 p-4 rounded-2xl border border-slate-100",children:[p.jsx("span",{className:"text-slate-500 font-bold uppercase text-[10px] tracking-widest",children:"Fundo de Abertura"}),p.jsx("span",{className:"font-black text-lg",children:g(we.closingSummary.opening)})]}),p.jsxs("div",{className:"flex justify-between items-center bg-emerald-50/50 p-4 rounded-2xl border border-emerald-100 text-emerald-700",children:[p.jsxs("span",{className:"flex items-center gap-2 font-bold uppercase text-[10px] tracking-widest",children:[p.jsx(F,{size:14})," Vendas em Dinheiro"]}),p.jsxs("span",{className:"font-black text-lg",children:["+ ",g(we.closingSummary.salesCash)]})]}),p.jsxs("div",{className:"flex justify-between items-center bg-blue-50/50 p-4 rounded-2xl border border-blue-100 text-blue-700",children:[p.jsxs("span",{className:"flex items-center gap-2 font-bold uppercase text-[10px] tracking-widest",children:[p.jsx(F,{size:14})," Suprimentos"]}),p.jsxs("span",{className:"font-black text-lg",children:["+ ",g(we.closingSummary.supply)]})]}),p.jsxs("div",{className:"flex justify-between items-center bg-red-50/50 p-4 rounded-2xl border border-red-100 text-red-700",children:[p.jsxs("span",{className:"flex items-center gap-2 font-bold uppercase text-[10px] tracking-widest",children:[p.jsx(Q,{size:14})," Sangrias"]}),p.jsxs("span",{className:"font-black text-lg",children:["- ",g(we.closingSummary.bleed)]})]})]}),p.jsxs("div",{className:"bg-slate-900 p-8 rounded-[2rem] mb-10 shadow-2xl",children:[p.jsx("label",{className:"block text-blue-400 font-black mb-4 text-[10px] uppercase tracking-[0.3em] text-center",children:"Conferência Física (Gaveta)"}),p.jsxs("div",{className:"relative max-w-xs mx-auto",children:[p.jsx("input",{autoFocus:!0,type:"number",value:we.closingCount,onChange:e=>we.setClosingCount(e.target.value),className:"w-full text-center text-5xl py-4 font-black border-none bg-white/5 focus:ring-0 text-white rounded-2xl placeholder-white/10",placeholder:"0,00"}),p.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-24 h-1 bg-blue-500 rounded-full shadow-lg"})]}),we.closingCount&&p.jsxs("div",{className:"text-center mt-6 text-sm font-black uppercase tracking-widest ${(parseFloat(cashRegister.closingCount.replace(',', '.')) - cashRegister.closingSummary.calculated) >= -0.01 ? 'text-emerald-400' : 'text-red-400'}",children:["Diferença: ",g(parseFloat(we.closingCount.replace(",","."))-we.closingSummary.calculated)]})]}),p.jsx("button",{onClick:()=>Ce({isOpen:!0,title:"Fechar Caixa",message:"Deseja realmente fechar o caixa agora?",variant:"danger",onConfirm:Je}),className:"w-full py-6 text-xl font-black shadow-2xl bg-red-600 hover:bg-red-700 text-white rounded-3xl transition-all transform hover:-translate-y-1 active:scale-95 uppercase tracking-widest",children:"Confirmar Fechamento"})]})]})}),"PRINT_RECEIPT"===je&&(De&&"SALE"===Ue||we.closedRegisterData&&"CLOSING"===Ue)&&p.jsx("div",{className:"fixed inset-0 bg-slate-950/90 z-50 flex items-center justify-center p-6 backdrop-blur-xl animate-fadeIn",children:p.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-5xl h-[90vh] flex shadow-[0_50px_150px_rgba(0,0,0,0.5)] overflow-hidden animate-scaleIn border border-white/20",children:[p.jsx("div",{className:"w-1/2 bg-slate-100 p-12 overflow-y-auto flex justify-center shadow-inner",children:p.jsx("div",{className:"bg-white shadow-2xl w-[80mm] min-h-[120mm] p-6 text-[10px] font-mono leading-tight text-slate-800 border-t-8 border-slate-900",children:"SALE"===Ue&&De?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"text-center mb-4",children:[p.jsx("h2",{className:"font-black text-sm uppercase tracking-tighter",children:(null==(a=null==be?void 0:be.company)?void 0:a.fantasyName)||"PDV MASTER"}),p.jsx("p",{className:"text-[8px]",children:(null==(n=null==be?void 0:be.company)?void 0:n.corporateName)||""}),p.jsx("p",{className:"text-[8px]",children:(null==(l=null==be?void 0:be.company)?void 0:l.address)||""}),p.jsxs("p",{className:"text-[8px]",children:["CNPJ: ",(null==(d=null==be?void 0:be.company)?void 0:d.cnpj)||"","  IE: ",(null==(u=null==be?void 0:be.company)?void 0:u.ie)||""]}),p.jsx("div",{className:"border-b border-dashed border-slate-300 my-3"}),p.jsx("h3",{className:"font-black uppercase mb-1 text-[9px]",children:"NFCE"===ze?"Documento Auxiliar da Nota Fiscal de Consumidor Eletrônica":"RECIBO DE VENDA"}),"NFCE"===ze&&p.jsx("p",{className:"text-[7px]",children:"Não permite aproveitamento de crédito de ICMS"})]}),p.jsxs("table",{className:"w-full mb-4",children:[p.jsx("thead",{children:p.jsxs("tr",{className:"border-b border-slate-900",children:[p.jsx("th",{className:"text-left py-1",children:"ITEM"}),p.jsx("th",{className:"text-right py-1",children:"QTD"}),p.jsx("th",{className:"text-right py-1",children:"TOTAL"})]})}),p.jsx("tbody",{children:De.items.map((e,t)=>p.jsxs("tr",{className:"border-b border-slate-100",children:[p.jsx("td",{className:"py-1 truncate max-w-[35mm] uppercase font-bold",children:e.name}),p.jsx("td",{className:"text-right py-1",children:e.qty}),p.jsx("td",{className:"text-right py-1 font-bold",children:e.total.toFixed(2)})]},t))})]}),p.jsxs("div",{className:"flex justify-between font-black text-sm mb-1",children:[p.jsx("span",{children:"TOTAL R$"}),p.jsx("span",{children:De.total.toFixed(2).replace(".",",")})]}),p.jsxs("div",{className:"flex justify-between text-[9px] mb-3",children:[p.jsx("span",{children:"FORMA PGTO"}),p.jsx("span",{className:"font-bold uppercase",children:De.paymentMethod})]}),"CASH"===De.paymentMethod&&p.jsxs(p.Fragment,{children:[" ",p.jsxs("div",{className:"flex justify-between text-[8px]",children:[p.jsx("span",{children:"RECEBIDO"}),p.jsx("span",{children:g(De.amountPaid||0)})]})," ",p.jsxs("div",{className:"flex justify-between font-black text-[10px] mt-1",children:[p.jsx("span",{children:"TROCO"}),p.jsx("span",{children:g(De.change||0)})]})]}),p.jsx("div",{className:"border-b border-dashed border-slate-300 my-4"}),p.jsxs("div",{className:"text-center text-[8px]",children:[p.jsxs("p",{className:"font-bold",children:["CONSUMIDOR: ",(null==(R=le.find(e=>e.id===De.customerId))?void 0:R.name)||"NÃO IDENTIFICADO"]}),(null==(W=le.find(e=>e.id===De.customerId))?void 0:W.document)&&p.jsxs("p",{children:["CPF: ",null==(Z=le.find(e=>e.id===De.customerId))?void 0:Z.document]})]}),"NFCE"===ze&&p.jsxs("div",{className:"mt-6 text-center",children:[p.jsx("p",{className:"mb-2 text-[8px] font-bold",children:"CONSULTA VIA QR CODE"}),p.jsx("div",{className:"flex justify-center mb-3 bg-white p-2 border border-slate-100 inline-block mx-auto",children:_e&&p.jsx("img",{src:_e,className:"w-28 h-28",alt:"QR Code"})}),p.jsxs("p",{className:"break-all text-[7px] mb-2 font-black leading-relaxed",children:["CHAVE DE ACESSO:",p.jsx("br",{}),null==(ee=De.accessKey)?void 0:ee.replace(/(.{4})/g,"$1 ")]}),p.jsx("p",{className:"text-[7px]",children:"PROTOCOLO: 135240001234567"}),p.jsxs("p",{className:"text-[7px]",children:["DATA: ",new Date(De.date).toLocaleString()]})]}),p.jsxs("div",{className:"mt-8 text-center border-t border-slate-900 pt-4",children:[p.jsx("p",{className:"text-[7px] uppercase font-bold",children:"Obrigado pela preferência!"}),p.jsx("p",{className:"mt-2 font-black italic text-[9px] tracking-widest",children:"PDV MASTER ERP"})]})]}):we.closedRegisterData&&p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"text-center mb-6",children:[p.jsx("h2",{className:"font-black text-sm uppercase tracking-widest",children:"Fechamento de Caixa"}),p.jsx("div",{className:"border-b-2 border-slate-900 w-12 mx-auto my-3"}),p.jsxs("p",{className:"font-bold",children:["CAIXA: ",we.closedRegisterData.id.slice(0,8).toUpperCase()]}),p.jsxs("p",{children:["OPERADOR: ",(null==(te=h.getCurrentUser())?void 0:te.name)||"ADMIN"]})]}),p.jsxs("div",{className:"space-y-2 text-[9px] mb-8",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"ABERTURA:"}),p.jsx("span",{className:"font-bold",children:new Date(we.closedRegisterData.openedAt).toLocaleString()})]}),p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"FECHAMENTO:"}),p.jsx("span",{className:"font-bold",children:new Date(we.closedRegisterData.closedAt).toLocaleString()})]})]}),p.jsx("div",{className:"border-b border-slate-900 mb-4"}),p.jsxs("div",{className:"space-y-3",children:[p.jsxs("div",{className:"flex justify-between",children:[p.jsx("span",{children:"(+) FUNDO ABERTURA"}),p.jsx("span",{className:"font-bold",children:g(we.closedRegisterData.openingBalance)})]}),p.jsxs("div",{className:"flex justify-between text-blue-600",children:[p.jsx("span",{children:"(+) TOTAL VENDAS"}),p.jsx("span",{className:"font-bold",children:g(we.closedRegisterData.currentBalance-we.closedRegisterData.openingBalance)})]}),p.jsxs("div",{className:"flex justify-between font-black text-xs pt-2 border-t border-slate-200",children:[p.jsx("span",{children:"(=) SALDO SISTEMA"}),p.jsx("span",{children:g(we.closedRegisterData.currentBalance)})]}),p.jsxs("div",{className:"flex justify-between font-black text-xs",children:[p.jsx("span",{children:"(=) SALDO FÍSICO"}),p.jsx("span",{children:g(we.closedRegisterData.finalCount||0)})]}),p.jsxs("div",{className:"flex justify-between font-black text-sm pt-3 border-t-2 border-slate-900",children:[p.jsx("span",{children:"DIFERENÇA"}),p.jsx("span",{className:we.closedRegisterData.difference<0?"text-red-600":"text-emerald-600",children:g(we.closedRegisterData.difference||0)})]})]}),p.jsxs("div",{className:"mt-16 text-center text-[8px] uppercase font-black border-t border-dashed border-slate-300 pt-8",children:[p.jsx("p",{className:"mb-10",children:"Assinatura do Responsável"}),p.jsx("p",{children:"_______________________________________"})]})]})})}),p.jsxs("div",{className:"w-1/2 p-16 bg-white flex flex-col justify-between relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-emerald-500/5 rounded-full blur-[100px] -ml-48 -mt-48"}),p.jsxs("div",{className:"relative z-10",children:[p.jsxs("div",{className:"flex items-center gap-5 mb-10",children:[p.jsx("div",{className:"p-5 bg-emerald-100 text-emerald-600 rounded-[2rem] shadow-lg shadow-emerald-50 animate-bounce",children:p.jsx(k,{size:48})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-4xl font-black text-slate-900 tracking-tight",children:"SALE"===Ue?"Venda Concluída!":"Caixa Encerrado!"}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs mt-1",children:"Operação realizada com sucesso"})]})]}),"SALE"===Ue&&p.jsxs("div",{className:"space-y-6",children:[p.jsx("p",{className:"text-slate-500 font-medium text-lg",children:"Escolha o formato do comprovante:"}),p.jsx("div",{className:"grid grid-cols-1 gap-4",children:[{id:"NFCE",title:"Nota Fiscal (NFC-e)",desc:"Documento fiscal oficial com QR Code",icon:p.jsx(C,{size:28}),color:"blue"},{id:"RECIBO",title:"Recibo Simples",desc:"Comprovante não fiscal para o cliente",icon:p.jsx(z,{size:28}),color:"slate"}].map(e=>p.jsxs("label",{className:"flex items-center gap-5 p-6 border-2 rounded-[2rem] cursor-pointer transition-all duration-300 group "+(ze===e.id?`border-${e.color}-500 bg-${e.color}-50 shadow-xl shadow-${e.color}-100`:"border-slate-100 hover:border-slate-200 bg-slate-50/50"),children:[p.jsx("input",{type:"radio",name:"receiptType",checked:ze===e.id,onChange:()=>Be(e.id),className:"hidden"}),p.jsx("div",{className:"p-4 rounded-2xl transition-colors "+(ze===e.id?`bg-${e.color}-500 text-white`:"bg-white text-slate-400 group-hover:text-slate-600"),children:e.icon}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"font-black text-lg uppercase tracking-tight "+(ze===e.id?`text-${e.color}-900`:"text-slate-700"),children:e.title}),p.jsx("p",{className:"text-sm text-slate-400 font-medium",children:e.desc})]}),p.jsx("div",{className:"w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all "+(ze===e.id?`border-${e.color}-500 bg-${e.color}-500`:"border-slate-300"),children:ze===e.id&&p.jsx("div",{className:"w-2 h-2 bg-white rounded-full"})})]},e.id))})]})]}),p.jsxs("div",{className:"space-y-4 relative z-10",children:[p.jsxs("button",{onClick:()=>{const e=document.querySelector(".bg-white.shadow-2xl.w-\\[80mm\\]"),t=document.getElementById("printable-area");e&&t?(t.innerHTML=e.innerHTML,window.print(),setTimeout(()=>{t.innerHTML="",qe()},500)):Ae("Erro ao preparar impressão.","Erro","error")},className:"w-full py-6 bg-slate-900 hover:bg-blue-600 text-white text-xl font-black rounded-[2rem] shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 flex items-center justify-center gap-4 uppercase tracking-widest",children:[p.jsx(z,{size:28}),"Imprimir ","SALE"===Ue?"NFCE"===ze?"NFC-e":"Recibo":"Relatório"]}),(null==(se=null==be?void 0:be.acbr)?void 0:se.enabled)&&"SALE"===Ue&&p.jsxs("button",{onClick:()=>c(null,null,function*(){if(De){$e(!0);try{const e=yield S.post(`/fiscal/emitir-nfce/${De.id}`);e.success?Ae("NFC-e emitida com sucesso!","Sucesso","success"):Ae("Erro ao emitir NFC-e: "+e.message,"Erro","error")}catch(e){Ae("Erro ao emitir NFC-e: "+e.message,"Erro","error")}finally{$e(!1)}}}),disabled:He,className:"w-full py-6 bg-blue-600 hover:bg-blue-700 text-white text-xl font-black rounded-[2rem] shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 flex items-center justify-center gap-4 uppercase tracking-widest",children:[p.jsx(E,{size:28}),He?"Emitindo...":"Emitir NFC-e (ACBr)"]}),p.jsx("button",{onClick:qe,className:"w-full py-5 bg-slate-100 hover:bg-slate-200 text-slate-500 font-black rounded-[1.5rem] transition-all uppercase tracking-widest text-xs",children:"SALE"===Ue?"Pular e Nova Venda (ESC)":"Fechar e Sair"})]})]})]})}),"PAYMENT"===je&&p.jsx("div",{className:"fixed inset-0 bg-slate-950/90 z-50 flex items-center justify-center p-6 backdrop-blur-xl animate-fadeIn",children:p.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-6xl h-[85vh] flex shadow-[0_50px_150px_rgba(0,0,0,0.5)] animate-scaleIn overflow-hidden border border-white/20",children:[p.jsxs("div",{className:"w-1/3 bg-slate-900 p-12 flex flex-col justify-between text-white relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-blue-600/20 rounded-full blur-[80px] -mr-32 -mt-32"}),p.jsxs("div",{className:"relative z-10",children:[p.jsx("h3",{className:"text-blue-400 font-black uppercase tracking-[0.3em] mb-4 text-xs",children:"Resumo do Pagamento"}),p.jsx("p",{className:"text-7xl font-black tracking-tighter mb-10 drop-shadow-2xl",children:g(ve.total)}),p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{className:"flex justify-between items-center border-b border-white/10 pb-4",children:[p.jsx("span",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:"Total de Itens"}),p.jsx("span",{className:"font-black text-2xl",children:ve.cart.length})]}),p.jsxs("div",{className:"flex flex-col border-b border-white/10 pb-4",children:[p.jsx("span",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest mb-2",children:"Cliente"}),p.jsx("span",{className:"font-black text-xl text-blue-100 truncate",children:(null==fe?void 0:fe.name)||"CONSUMIDOR FINAL"})]})]})]}),p.jsx("button",{onClick:()=>ye("NONE"),className:"relative z-10 w-full py-5 bg-white/10 hover:bg-white/20 text-white rounded-2xl uppercase font-black tracking-widest transition-all border border-white/10 active:scale-95",children:"Cancelar (ESC)"})]}),p.jsxs("div",{className:"w-2/3 p-16 bg-white overflow-y-auto relative",children:["METHODS"===Re&&p.jsxs("div",{className:"animate-fadeIn",children:[p.jsx("h3",{className:"text-4xl font-black text-slate-900 mb-4 tracking-tight",children:"Forma de Pagamento"}),p.jsx("p",{className:"text-slate-400 font-bold mb-12 uppercase tracking-widest text-xs",children:"Selecione como o cliente deseja pagar"}),p.jsx("div",{className:"grid grid-cols-2 gap-8",children:[{id:"CASH",label:"Dinheiro",icon:p.jsx(_,{size:48}),color:"emerald",action:()=>Se("CASH")},{id:"PIX",label:"PIX QR Code",icon:p.jsx(J,{size:48}),color:"blue",action:()=>c(null,null,function*(){var e,t;const s=crypto.randomUUID().replace(/-/g,"").substring(0,25),r=X.generatePayload((null==(e=null==be?void 0:be.payment)?void 0:e.pixKey)||"00.000.000/0001-00",(null==(t=null==be?void 0:be.company)?void 0:t.fantasyName)||"PDV MASTER","SAO PAULO",s,ve.total);try{const e=yield ft.toDataURL(r,{width:300,margin:2});Oe({payload:r,img:e}),ye("PIX_WAITING")}catch(a){Ae("Erro ao gerar QR Code")}})},{id:"DEBIT",label:"Cartão Débito",icon:p.jsx(P,{size:48}),color:"slate",action:()=>Ge("DEBIT")},{id:"CREDIT",label:"Cartão Crédito",icon:p.jsx(P,{size:48}),color:"purple",action:()=>Ge("CREDIT")}].map(e=>p.jsxs("button",{onClick:e.action,className:`h-48 bg-slate-50 hover:bg-white border-2 border-transparent hover:border-${e.color}-500 rounded-[2.5rem] flex flex-col items-center justify-center gap-5 transition-all duration-300 group hover:shadow-2xl hover:shadow-${e.color}-100 transform hover:-translate-y-2`,children:[p.jsx("div",{className:`p-5 bg-${e.color}-100 text-${e.color}-600 rounded-3xl group-hover:scale-110 transition-transform duration-300`,children:e.icon}),p.jsx("span",{className:"font-black text-xl text-slate-800 uppercase tracking-widest",children:e.label})]},e.id))})]}),"CASH"===Re&&p.jsxs("div",{className:"animate-fadeIn flex flex-col h-full",children:[p.jsxs("button",{onClick:()=>Se("METHODS"),className:"absolute top-10 left-10 flex items-center gap-3 text-xs font-black text-slate-400 hover:text-slate-900 uppercase tracking-widest transition-colors",children:[p.jsx(U,{size:20})," Voltar"]}),p.jsxs("div",{className:"text-center mt-4 mb-12",children:[p.jsx("h3",{className:"text-4xl font-black text-slate-900 mb-2 tracking-tight",children:"Pagamento em Dinheiro"}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-xs",children:"Informe o valor recebido"})]}),p.jsxs("div",{className:"max-w-md mx-auto w-full space-y-8",children:[p.jsxs("div",{className:"relative",children:[p.jsx("input",{autoFocus:!0,type:"number",value:Te,onChange:e=>Me(e.target.value),ref:Ke,className:"w-full text-center text-6xl py-8 font-black border-none bg-slate-50 focus:ring-0 text-slate-900 rounded-[2.5rem] shadow-inner placeholder-slate-200",placeholder:"0,00"}),p.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-32 h-1.5 bg-emerald-500 rounded-full shadow-[0_0_20px_rgba(16,185,129,0.5)]"})]}),p.jsx("div",{className:"grid grid-cols-3 gap-3",children:[10,20,50,100,200,ve.total].map(e=>p.jsx("button",{onClick:()=>Me(e.toFixed(2).replace(".",",")),className:"py-4 bg-slate-100 hover:bg-slate-900 hover:text-white rounded-2xl font-black transition-all active:scale-95 uppercase text-xs tracking-widest",children:e===ve.total?"Valor Exato":`R$ ${e}`},e))}),p.jsxs("div",{className:"p-10 rounded-[2.5rem] flex flex-col items-center justify-center text-center transition-all duration-500 "+(Xe>=0?"bg-emerald-50 shadow-inner":"bg-red-50"),children:[p.jsx("p",{className:"text-[10px] font-black uppercase text-emerald-800 tracking-[0.3em] mb-2",children:"Troco a Devolver"}),p.jsx("p",{className:"text-7xl font-black text-emerald-900 tracking-tighter drop-shadow-sm",children:g(Xe>=0?Xe:0)})]}),p.jsx("button",{onClick:()=>Ge("CASH",{paid:parseFloat(Te.replace(",",".")),change:Xe}),disabled:Xe<0||!Te,className:"w-full py-6 bg-slate-900 hover:bg-emerald-600 disabled:opacity-20 text-white text-2xl font-black rounded-[2rem] shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 uppercase tracking-widest",children:"Confirmar Pagamento"})]})]}),me&&p.jsxs("div",{className:"absolute inset-0 bg-white/90 backdrop-blur-md flex flex-col items-center justify-center gap-6 text-blue-600 z-50",children:[p.jsxs("div",{className:"relative",children:[p.jsx("div",{className:"w-24 h-24 border-8 border-blue-100 border-t-blue-600 rounded-full animate-spin"}),p.jsx(q,{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-blue-600",size:32})]}),p.jsx("span",{className:"text-2xl font-black uppercase tracking-[0.3em] animate-pulse",children:"Processando..."})]})]})]})}),"PIX_WAITING"===je&&Pe&&p.jsx("div",{className:"fixed inset-0 bg-slate-950/90 z-50 flex items-center justify-center p-6 backdrop-blur-xl animate-fadeIn",children:p.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-lg p-12 shadow-[0_50px_150px_rgba(0,0,0,0.5)] animate-scaleIn text-center border border-white/20",children:[p.jsx("div",{className:"mb-8",children:p.jsx("div",{className:"p-6 bg-blue-100 text-blue-600 rounded-[2rem] inline-block shadow-lg shadow-blue-50 animate-pulse-subtle",children:p.jsx(J,{size:56})})}),p.jsx("h2",{className:"text-3xl font-black text-slate-900 mb-2 tracking-tight",children:"Escaneie o QR Code"}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px] mb-10",children:"Abra o app do seu banco para pagar"}),p.jsx("div",{className:"bg-white p-6 rounded-[2.5rem] border-2 border-slate-100 inline-block mb-10 shadow-inner",children:p.jsx("img",{src:Pe.img,alt:"QR Code Pix",className:"w-64 h-64"})}),p.jsxs("div",{className:"mb-10 bg-slate-50 p-6 rounded-3xl border border-slate-100",children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:"Valor Total"}),p.jsx("p",{className:"text-5xl font-black text-blue-600 tracking-tighter",children:g(ve.total)})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"relative group",children:[p.jsx("input",{readOnly:!0,value:Pe.payload,className:"w-full pl-6 pr-16 py-4 bg-slate-100 rounded-2xl text-[10px] font-mono truncate border-2 border-transparent focus:border-blue-500 transition-all"}),p.jsx("button",{onClick:()=>{Pe&&(navigator.clipboard.writeText(Pe.payload),Ae("Código PIX copiado!","Sucesso","success"))},className:"absolute right-3 top-1/2 -translate-y-1/2 p-2.5 bg-white hover:bg-blue-600 hover:text-white rounded-xl shadow-md transition-all active:scale-90",children:p.jsx($,{size:18})})]}),p.jsx("button",{onClick:()=>Ge("PIX"),className:"w-full py-6 bg-slate-900 hover:bg-emerald-600 text-white text-xl font-black rounded-[2rem] shadow-2xl transition-all transform hover:-translate-y-1 active:scale-95 uppercase tracking-widest",children:"Pagamento Confirmado"}),p.jsx("button",{onClick:()=>ye("PAYMENT"),className:"text-slate-400 hover:text-red-500 font-black uppercase tracking-widest text-[10px] transition-colors",children:"Cancelar Operação"})]})]})}),"CUSTOMER"===je&&p.jsx("div",{className:"fixed inset-0 bg-slate-950/90 z-50 flex items-center justify-center p-6 backdrop-blur-xl animate-fadeIn",children:p.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-2xl p-10 shadow-[0_50px_150px_rgba(0,0,0,0.5)] animate-scaleIn border border-white/20",children:[p.jsxs("div",{className:"flex items-center gap-5 mb-10",children:[p.jsx("div",{className:"p-5 bg-blue-600 text-white rounded-[2rem] shadow-lg shadow-blue-100",children:p.jsx(T,{size:32})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Identificar Cliente"}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px] mt-1",children:"Vincule um cliente à venda atual"})]})]}),p.jsxs("div",{className:"max-h-[400px] overflow-y-auto space-y-4 mb-10 pr-4 custom-scrollbar",children:[p.jsxs("button",{onClick:()=>{var e;ge(null),ye("NONE"),null==(e=Ye.current)||e.focus()},className:"w-full text-left p-6 hover:bg-slate-900 hover:text-white rounded-[2rem] border-2 border-slate-100 transition-all duration-300 group flex justify-between items-center",children:[p.jsxs("div",{children:[p.jsx("span",{className:"font-black text-xl uppercase tracking-tight",children:"Consumidor Final"}),p.jsx("p",{className:"text-xs opacity-50 font-bold uppercase tracking-widest mt-1",children:"Venda sem identificação"})]}),p.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-100 group-hover:bg-white/20 flex items-center justify-center transition-colors",children:p.jsx(B,{size:24})})]}),le.map(e=>p.jsxs("button",{onClick:()=>{var t;ge(e),ye("NONE"),null==(t=Ye.current)||t.focus()},className:"w-full text-left p-6 hover:bg-blue-600 hover:text-white rounded-[2rem] border-2 border-slate-100 transition-all duration-300 group flex justify-between items-center",children:[p.jsxs("div",{className:"flex-1 pr-4",children:[p.jsx("span",{className:"font-black text-xl uppercase tracking-tight block group-hover:translate-x-1 transition-transform",children:e.name}),p.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[p.jsx("span",{className:"text-[10px] font-black bg-slate-100 group-hover:bg-white/20 px-2 py-1 rounded uppercase tracking-widest",children:e.document}),p.jsx("span",{className:"text-xs opacity-50 font-medium truncate",children:e.email||"Sem e-mail cadastrado"})]})]}),p.jsx("div",{className:"w-12 h-12 rounded-2xl bg-slate-100 group-hover:bg-white/20 flex items-center justify-center transition-colors",children:p.jsx(B,{size:24})})]},e.id))]}),p.jsx("button",{onClick:()=>ye("NONE"),className:"w-full py-5 bg-slate-100 hover:bg-slate-200 text-slate-500 font-black rounded-[1.5rem] transition-all uppercase tracking-widest text-xs",children:"Cancelar Operação"})]})}),"MENU"===je&&p.jsx("div",{className:"fixed inset-0 bg-slate-950/90 z-50 flex items-center justify-center p-6 backdrop-blur-xl animate-fadeIn",children:p.jsx("div",{className:"bg-white rounded-[3rem] w-full max-w-4xl p-12 shadow-[0_50px_150px_rgba(0,0,0,0.5)] animate-scaleIn border border-white/20",children:p.jsxs("div",{className:"flex items-center justify-between mb-12",children:[p.jsxs("div",{className:"flex items-center gap-5",children:[p.jsx("div",{className:"p-5 bg-slate-900 text-white rounded-[2rem] shadow-xl",children:p.jsx(I,{size:32})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Menu de Funções"}),p.jsx("p",{className:"text-slate-400 font-bold uppercase tracking-widest text-[10px] mt-1",children:"Acesso rápido às operações do sistema"})]})]}),p.jsx("button",{onClick:()=>ye("NONE"),className:"p-4 hover:bg-slate-100 rounded-2xl transition-colors text-slate-400 hover:text-slate-900",children:p.jsx(y,{size:32})}),p.jsx("div",{className:"grid grid-cols-3 gap-6 mb-12",children:[{label:"Suprimento",icon:p.jsx(H,{size:32}),color:"emerald",action:()=>we.openGenericModal("SUPRIMENTO")},{label:"Sangria",icon:p.jsx(V,{size:32}),color:"red",action:()=>we.openGenericModal("SANGRIA")},{label:"Fechar Caixa",icon:p.jsx(D,{size:32}),color:"slate",action:we.closeRegister},{label:"Limpar Carrinho",icon:p.jsx(O,{size:32}),color:"orange",action:()=>{ve.clearCart(),ye("NONE")}},{label:"Últimas Vendas",icon:p.jsx(Y,{size:32}),color:"blue",action:()=>{De?(Ve("SALE"),ye("PRINT_RECEIPT")):Ae("Nenhuma venda realizada nesta sessão.","Aviso","info")}},{label:"Configurações",icon:p.jsx(A,{size:32}),color:"purple",action:()=>window.location.href="/settings"}].map(e=>p.jsxs("button",{onClick:e.action,className:"p-8 bg-slate-50 hover:bg-white border-2 border-transparent hover:border-slate-200 rounded-[2.5rem] flex flex-col items-center justify-center gap-4 transition-all duration-300 group hover:shadow-2xl transform hover:-translate-y-2",children:[p.jsx("div",{className:"p-5 rounded-3xl group-hover:scale-110 transition-transform duration-300 "+("emerald"===e.color?"bg-emerald-50 text-emerald-600":"red"===e.color?"bg-red-50 text-red-600":"slate"===e.color?"bg-slate-100 text-slate-600":"orange"===e.color?"bg-orange-50 text-orange-600":"blue"===e.color?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"),children:e.icon}),p.jsx("span",{className:"font-black text-sm text-slate-800 uppercase tracking-widest",children:e.label})]},e.label))}),p.jsxs("div",{className:"bg-slate-900 rounded-[2rem] p-8 flex items-center justify-between text-white",children:[p.jsxs("div",{className:"flex items-center gap-4",children:[p.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center",children:p.jsx(T,{size:24,className:"text-blue-400"})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Operador Logado"}),p.jsx("p",{className:"font-black text-lg",children:(null==(re=h.getCurrentUser())?void 0:re.name)||"ADMINISTRADOR"})]})]}),p.jsx("button",{onClick:()=>window.location.href="/",className:"px-8 py-4 bg-white/10 hover:bg-red-500 text-white rounded-2xl font-black uppercase tracking-widest text-xs transition-all active:scale-95",children:"Sair do PDV"})]})]})})}),"GENERIC"===we.modal&&p.jsx("div",{className:"fixed inset-0 bg-slate-950/90 z-[60] flex items-center justify-center p-6 backdrop-blur-xl animate-fadeIn",children:p.jsxs("div",{className:"bg-white rounded-[3rem] w-full max-w-xl shadow-[0_50px_150px_rgba(0,0,0,0.5)] animate-scaleIn overflow-hidden border border-white/20",children:[p.jsxs("div",{className:"p-10 flex justify-between items-center border-b border-slate-100 "+("SUPRIMENTO"===we.genericType?"bg-emerald-50/50":"bg-red-50/50"),children:[p.jsxs("div",{className:"flex items-center gap-5",children:[p.jsx("div",{className:"p-4 rounded-3xl text-white shadow-lg rotate-3 "+("SUPRIMENTO"===we.genericType?"bg-emerald-500 shadow-emerald-100":"bg-red-500 shadow-red-100"),children:"SUPRIMENTO"===we.genericType?p.jsx(H,{size:28}):p.jsx(V,{size:28})}),p.jsxs("div",{children:[p.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:we.genericType}),p.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest mt-1",children:"Movimentação manual de caixa"})]})]}),p.jsx("button",{onClick:we.closeGenericModal,className:"p-3 hover:bg-white rounded-2xl transition-colors text-slate-400 hover:text-slate-900 shadow-sm",children:p.jsx(y,{size:24})})]}),p.jsxs("div",{className:"p-12 space-y-10",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-slate-400 font-black mb-4 text-[10px] uppercase tracking-[0.3em] text-center",children:"Valor da Operação (R$)"}),p.jsxs("div",{className:"relative max-w-xs mx-auto",children:[p.jsx("input",{autoFocus:!0,type:"number",value:we.genericValue,onChange:e=>we.setGenericValue(e.target.value),className:"w-full text-center text-5xl py-6 font-black border-none bg-slate-50 focus:ring-0 text-slate-900 rounded-[2rem] shadow-inner placeholder-slate-200",placeholder:"0,00"}),p.jsx("div",{className:"absolute -bottom-2 left-1/2 -translate-x-1/2 w-24 h-1 rounded-full shadow-lg "+("SUPRIMENTO"===we.genericType?"bg-emerald-500 shadow-emerald-200":"bg-red-500 shadow-red-200")})]})]}),p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest ml-1",children:"Observação / Motivo"}),p.jsx("textarea",{value:we.genericNote,onChange:e=>we.setGenericNote(e.target.value),className:"w-full bg-slate-50 border-2 border-slate-100 rounded-[1.5rem] p-6 focus:ring-8 focus:ring-blue-500/10 focus:border-blue-500 focus:bg-white outline-none transition-all font-bold text-slate-800 placeholder-slate-300 min-h-[120px] resize-none",placeholder:"Descreva o motivo desta movimentação..."})]}),p.jsxs("button",{onClick:we.handleGenericAction,disabled:!we.genericValue||parseFloat(we.genericValue)<=0,className:"w-full py-6 text-xl font-black shadow-2xl text-white rounded-3xl transition-all transform hover:-translate-y-1 active:scale-95 uppercase tracking-widest disabled:opacity-20 "+("SUPRIMENTO"===we.genericType?"bg-emerald-600 hover:bg-emerald-700":"bg-red-600 hover:bg-red-700"),children:["Confirmar ",we.genericType]})]})]})})]}):p.jsx("div",{className:"h-full flex items-center justify-center bg-slate-900 text-white",children:p.jsxs("div",{className:"text-center",children:[p.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),p.jsx("p",{children:"Carregando configurações..."})]})})};export{bt as POS};
